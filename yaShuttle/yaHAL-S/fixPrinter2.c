/*
  Filename:     fixPrinter2.c
  Purpose:      Part of the compiler front-end for the HAL/S language.
                It is a fix for the Printer.c files auto-generated by
                BNF Converter, and needs to be #include'd first thing
                in the Printer.c.  Additionally, the entire Printer.c file
                has to be edited to replace
                  bufAppendS("
                by
                  bufAppendSp(p, "
                Note that this substitution is *only* for calls to
                bufAppendS with a parameter that's a string literal.
                (Done automatically by makefile.)  The result is that
                the abstract syntax tree output by the parser, which
                may previously have looked something like
                  (AAcompilation (AAany_statement (AAstatement ...
                instead now looks like
                  (AAcompilation 1 2 (AAany_statement 1 2 (AAstatement 1 2 ...
                where the numbers that have been added are the source-code
                line number and column number corresponding to the object.
                The presence of this stuff allows the compiler, interpreter,
                or presumably standalone emulator to associate errors with
                positions in the source code.
  Compiler:     GNU gcc.
  Reference:    http://www.ibibio.org/apollo
  Mods:         2023-02-15 RSB  Created
*/

char sAppendSp[32];
#define bufAppendSp(p, s) { \
  bufAppendS(s); \
  sprintf(sAppendSp, " %d %d", p->line_number, p->char_number); \
  bufAppendS(sAppendSp); \
}
