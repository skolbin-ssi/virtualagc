# Copyright:    Public domain.
# Filename:     YUL_SYSTEM_ASSEMBLER_--_PASS_2.mitigus
# Purpose:      Part of the source code for YUL (revision 9).
# Assembler:    TBD
# Contact:      Jim Lawton <jim.lawton@gmail.com>
# Website:      https://www.ibiblio.org/apollo/index.html
# Page scans:   https://archive.org/details/yulsystemsourcec00hugh
# Pages:        265-331
# Mod history:  2016-10-06 JL   Created.
#               2016-12-03 JL   Transcribed pages 279-282.
#               2016-12-05 JL   Transcribed pages 283-287.
#               2016-12-08 JL   Transcribed pages 288-294.
#               2016-12-09 JL   Transcribed pages 295-302.
#               2016-12-10 JL   Transcribed pages 303-308.
#               2016-12-11 JL   Transcribed pages 309-310.
#               2016-12-12 JL   Transcribed pages 311-317.
#               2016-12-16 JL   Transcribed pages 318-320.
#               2016-12-17 JL   Transcribed pages 321-323.
#               2016-12-19 JL   Transcribed pages 324-329.
#               2016-12-20 JL   Transcribed pages 330-331.
#               2018-01-03 JL   Fixed symbol OCT7777 definition on p.274.
#               2018-01-03 JL   Fixed symbol LFINI2P definition on p.280.

# Annotations:
#
#   B L A I R - S M I T H
#    Y U L   S Y S T E M
#
#       Listings in
#    MITIGUS  Format
#

# Note: Page numbers are scan page numbers rather than listing.


L      @YUL SYSTEM ASSEMBLER -- PASS 2

# Page 265
#      @YUL SYSTEM ASSEMBLER -- PASS 2                                           USER'S OWN PAGE NO.   1        PAGE   1

R000001 WE ARE DEEPLY INDEBTED TO THE ONE, THE ONLY, THE GREAT JOHN SHAW FOR THE FOLLOWING STRONG MAGIC....
R00001  JSOCTL



R00005  BANK 7 PART OF GENERAL PASS 2.

 0001              SETLOC,6C    1024          B7

 0002              MASKGRP,6    S,0           F,0

 00022  CUSS LIST  RESERVE      64

R00024  GENERAL PASS 2 MASKS ARE IN UPPER HALF OF BANK 7.  PROGRAM IS IN BANK 1.



 00026             SETLOC,1C    0             B1



R0003              YUL SYSTEM PASS 2 FINISHES THE ESSENTIAL FUNCTIONS OF ASSEMBLY.  IT READS POPO RECORDS FROM TAPE 2
R0005   AND MERGES THE RESULTING SYPT RECORDS (PROGRAM ASSEMBLY) OR SYLT RECORDS (SUBROUTINE ASSEMBLY) WITH THE SAVED
R0007   SYPT AND SYLT RECORDS FROM TAPE 3 ONTO TAPE 1.  UNSORTED WORD RECORDS ARE WRITTEN ON TAPE 4.

R0009              PASS 2 ALSO PRINTS THE ASSEMBLY LISTING, SHOWING THE ORIGINAL YUL LANGUAGE SIDE BY SIDE WITH OCTAL
R0011   EQUIVALENTS, AND INSERTING DETAILED ERROR AND WARNING MESSAGES AS REQUIRED.  RIGHT PRINT CARDS ACCOMPANYING "R"
R0013   OR "P" REMARKS CARDS ARE PRINTED TO THE RIGHT OF THE "R" OR "P" CARD, ON THE SAME LINE; OTHERWISE AS CONTINUA-
R0014   TION CARDS (BELOW, AT THE RIGHT).  THIS CODING ALSO INCLUDES PASS 1.5 (SEE PAGE 53).



R0016              THE CHIEF FUNCTIONS OF PASS 2 FOR VARIOUS CARD TYPES ARE TABULATED BELOW...

R0018           1) INSTRUCTIONS.   EVALUATE THE ADDRESS FIELD AND FORM THE INSTRUCTION WORD, COMPLEMENTING IF REQUIRED.

R0020           2) CONSTANTS.   EVALUATE THE CONSTANT, FLAG IT AS SUCH, AND FORM ONE OR TWO WORDS, AS NEEDED.

R0026           3) OTHER.   REPORT RESULTS FROM PASSES 1 AND 1.5.



R0027              AT THE END OF PASS 2, TAPES 2, 3, AND 4 ARE REWOUND.  TAPE 2 AND TAPE 3 ARE RELEASED, UNLESS THERE IS
R0029   TO BE ANOTHER TASK.

# Page 266
#      @YUL SYSTEM ASSEMBLER -- PASS 2                                           USER'S OWN PAGE NO.   2        PAGE   2

P0030   ITEMS FOR INTERPASS STORAGE. 63 WORDS.



 0031   PROG NAME  RESERVE      1
 0032   NEXT NAME  RESERVE      1
 0033   SWITCH     RESERVE      1
 0034   L OLD LINE RESERVE      1

 0035   OLD LINE   RESERVE      16
 0036   PAGE HEAD  RESERVE      16

 0037   PAGE NO    RESERVE      1
 0039   SYM PLACE  RESERVE      1
 0040   SYM TAB XS RESERVE      1
 0041   L COP BUFS RESERVE      1

 0043   MID POINT  RESERVE      1
 0044   LIN COUNT  RESERVE      1
 0045   N WD RECS  RESERVE      1
 0046   E SYLT BAN RESERVE      1

 0047   L PROG FIL RESERVE      1
 0048   N LINES    RESERVE      1
 00485  L COMP NAM RESERVE      1
 0049   N COPIES   RESERVE      1

 00491  PAPER PLY  RESERVE      1
 00492  ERR PAGES  RESERVE      1
 00493  N ERR LINS RESERVE      1
 00494  L AUTH NAM RESERVE      1

 00495  SORS NAME  RESERVE      1
 00496  COMPUTER   RESERVE      1
 00499  SEG OWNER  RESERVE      1

 0050   SUBSTRAB   RESERVE      8



R0051              THE FOLLOWING INSTRUCTION IS PLACED AT THE BASE ADDRESS OF PASS 2 (10077) FOR CONVENIENCE.

 0053   YUL PASS 2 TS           P1▪5 MXR      Z.MXR         PASS 1▪5            FIRST PROCESS CONSEQUENCES OF PASS 1.

R00541  SIMULATED EXTENDED TS ROUTINE, PLACED HERE TO TAKE ADVANTAGE OF THE 7.  WORKS WITH EITHER MASKGRP 0 OR 7.

 00542  ETS        EQUALS       YUL PASS 2
 00543             SWS, C7T8    ETS           12            C,+2           C    ADDRESS OF REGISTER TO BE LOADED.
 00544             EX           N,AU1         CAC 3         ETS            C    INPUT IS 16 BITS.
 00545             EBA          ETS           BIT 25        Z,0            C    OUTPUT IS 24 BITS.
 00546             NA           Z,CSH         Z,SC          N,AU2          C
 00547             TX           Z,AU2         -             Z,SC           S    EXIT IN SAME MODE AS ENTRY.

# Page 267
#      @YUL SYSTEM ASSEMBLER -- PASS 2                                           USER'S OWN PAGE NO.   3        PAGE   3

P005478 TRANSFER VECTOR ENTRIES 69 ONWARD.  (TRANSFER VECTOR BEGINS WITH PROGNAME.)

 00548  ZERO       OCT          0
 005484 BIT 45 NOT OCT          -177767
 005488 BIT 46     OCT          -4

 005492 FREE EXIT  OCT          -133760
 005496 SYPT NTRY  OCT          -33777
 0055   L CUS LIST SPEC                                     CUSS LIST
 006132 GENL MXR   MASKBASE     S,0           F,0

 00508  CONTINUE   DEC          +0
 005512 MAY MERGE  DEC          +0
 005516 END PARAS  DEC          +G
 00552  LYST SYPT  TS           SYPT NTRY     Z,R4          LIST SYPT -2   C

R005521 ROUTINE FOR ALL UNMANAGEABLE TROUBLES.

 005524 DISASTER   MPC, H       Z,1           301           MON PCR             IMITATE THE ACTION OF A BACKGROUND.
 006148            ALF          DISASTER

R005532 COSEQUENCE SLEEPING SUBROUTINE.  ENTRY:  TS  Z,SC  Z,AU1  CSC SLEEP  S

 005536 CSC SLEEP  TS           -             -             MON SLEEP      C
 00554             TS           Z,AU1         Z,SC          N,SH           C    RECOVER SAVED SC AND EXIT.

R005544 TRIVIAL SUBROUTINE(S) TO RELEASE A TAPE IF THERE WILL NOT BE ANOTHER TASK, OR JUST REWIND IT IF THERE WILL.

 005548 RELS OR RW TS           Z,SC          Z,CSC         PHI RLEAS
 005552            TS           Z,SC          Z,CSC         PHI TAPE

R005556 COSEQUENCE SUBROUTINE TO PLACE IN AU1 THE NAME OF A FREE BUFFER.  SLEEPS IF NECESSARY UNTIL A BUFFER IS FREE.

 00556  GRAB FREE  TS           Z,CSH         Z,AU2         C,+3           C    USE CSH FOR RETURN ADDRESS.
 005564            TS           N,R4          Z,AU1         C,+4           C    GET BUFFER NAME.
 005568            TS           Z,SC          Z,AU1         CSC SLEEP      C    GO TO SLEEP UNTIL A BUFFER IS FREE.
 005572            TS           FREE EXIT     Z,R4          -              C    GET FREE LIST EXIT POINTER.
 005576            SSL, ONE     N,R4          16            C,-3           C    TEST WHETHER THERE ARE ANY FREE BUFFERS.
 00558             TS           BIT 32        N,R4,1        -              C    PLANT BUSY FLAG IN FREE LIST.
 005584            EX           Z,R4          BIT 45 NOT    FREE EXIT      C    MODULATE FREE LIST EXIT POINTER.
 005588            TX           Z,AU2         -             Z,CSC          C    MAY BE USED IN SC MODE WITH CARE.

# Page 268
#      @YUL SYSTEM ASSEMBLER -- PASS 2                                           USER'S OWN PAGE NO.   4        PAGE   4

P005599            FIELD AND SHIFT MASKS FOR GENERAL PART OF PASS 2.



 0056   B,BIT 1    OCT          4
 0057   B,BIT 2    OCT          2
 0058   B,BIT 3    OCT          1
 0059   B,B2B6     OCT          21

 0060   B,B3T6     OCT          17
 0061   B,BIT7     OCT          004
 0062   B,BIT8     OCT          002
 0063   B,BIT9     OCT          001

 0065   B,BIT11    OCT          0002
 0066   B,BIT 12   OCT          0001
 0067   B,B11T12   OCT          0003
 0068   B,BIT14    OCT          00002

 0069   B,BIT15    OCT          00001
 0070   B,BIT16    OCT          0000 04
 0071   B,BIT17    DEC          00008
 0072   B,BIT33    DEC          -8000

 0074   B,B1B17B33 DEC          8000 8000 8000
 0075   B,ALLBUTB1 DEC          7GGG GGGG GGGG
 0076   B,ONE      OCT          -1
 0077   B,C7T8     OCT          -7777                                           C7T8 MUST BE THE 20TH B MASK.

 0078   B,D12      DEC          -G
 0079   B,D2T12    DEC          0GGG GGGG GGGG
 0080   B,CHAR1    OCT          77
 0081   B,CHAR7    OCT          -7700

 0082   B,CHAR8    OCT          -77
 0083   B,C2T8     OCT          0077 7777 7777 7777
 0084   B,BIT34    OCT          -40000
 0085   B,CAC3     DEC          -GGGG

 0086   B,CHAR6    OCT          -77 0000
 0087   B,C5T8     OCT          -7777 7777
 0089   B,AVMSK    OCT          0                                               VARIABLE MASK.
 0091   B,BIT44    OCT          -20

# Page 269
#      @YUL SYSTEM ASSEMBLER -- PASS 2                                           USER'S OWN PAGE NO.   5        PAGE   5

P0093   FURTHER SHIFT MASKS FOR THE GENERAL PART OF PASS 2.

 0094   S,BIT36    OCT          -1 0000
 0095   S,B2T8     DEC          7G
 0096   S,B5T6     OCT          03
 0097   S,TWO      OCT          -2

 0098   S,B10T12   OCT          0007
 0099   S,B19T25   OCT          0000 0077 4
 0100   S,B20T25   OCT          0000 0037 4
 0101   S,B26T30   OCT          -3700 0000

 0102   S,B28T30   OCT          -700 0000
 0103   S,B38T48   OCT          -3777
 0104   S,C1T7     OCT          7777 7777 7777 7700
 0105   S,DECALFM1 OCT          0000 7777 0000 7777

 0107   S,B42T48   OCT          -177
 0108   S,B44T47   OCT          -36
 0109   S,B47T48   OCT          -3
 0111   S,DECALFM2 OCT          0074 0074 0074 0074

 0112   S,DECALFM3 OCT          1717 1717 1717 1717
 0113   S,D1T11    DEC          GGGG GGGG GGG0
 0114   S,D1D3T12  DEC          G0GG GGGG GGGG
 0115   S,D8T12    DEC          -G GGGG

 0116   S,SPECMAG  OCT          -77777
 0117   S,CAC2     DEC          0000 GGGG
 0118   S,D4T8     DEC          000G GGGG
 0119   S,D1T3     DEC          GGG

 0120   S,ONES     DEC          GGGG GGGG GGGG
 0121   S,OCTMASK  OCT          -7777 7770
 0122   S,THREAD10 OCT          -3776
 0123   S,BIT38    OCT          -2000

 0124   S,B1THRU45 OCT          7777 7777 7777 7770
 0125   S,C1T4     OCT          7777 7777
 0126   S,BIT29    OCT          -200 0000
 0127   S,BADRES   OCT          -7777 0000

# Page 270
#      @YUL SYSTEM ASSEMBLER -- PASS 2                                           USER'S OWN PAGE NO.   6        PAGE   6

P0129              CONSTANTS, VARIABLE STORAGE, ASSIGNMENTS, ETC. FOR GENERAL PASS 2.

R0131   VARIABLE STORAGE RESERVATIONS.

 0132   POPO BUFF  RESERVE      1
 0133   POB PLACE  RESERVE      1
 0134   HEALTH     RESERVE      12
 0135   CARD       EQUALS       HEALTH +1
 0136   MOD RETRN  RESERVE      1

 0137   SAVE W6    RESERVE      1
 0138   MAX DECML  RESERVE      3
 0139   ISCALE     EQUALS       MAX DECML +1
 0140   MAX NUMBR  EQUALS       MAX DECML +2
 0141   LOCATION   RESERVE      1

 0142   2ND ALF    RESERVE      2
 0144   2ND HALF   RESERVE      1
 0145   WORD       RESERVE      1
 0146   COMMON     RESERVE      10

 0147   WORD PAGE  RESERVE      1
 0148   L WD BUFF  RESERVE      1
 0149   L OLD FWA  RESERVE      1
 0150   ADR WD     RESERVE      3
 0151   EQUALOC    RESERVE      3

 0152   ADDRESS    RESERVE      1
 0153   SYB PLACE  RESERVE      1
 0154   SYPT BUFF  RESERVE      1
 0155   END SYBUF  RESERVE      1
 0156   FIELD COD  RESERVE      2

 0157   AFIELD     RESERVE      3
 0158   ADDRESS 1  EQUALS       CARD +3
 0159   ADDRESS 2  EQUALS       CARD +4
 0160   DIG FILE   RESERVE      8
 0161   SENT LOC   RESERVE      1

 0162   EXPONENT   RESERVE      1
 0163   MANTISSA   RESERVE      1
 0164   FULL DELT  RESERVE      1
 0165   NFUL DELT  RESERVE      1
 0166   CARACTER   RESERVE      1

 0167   CON WORD   RESERVE      1
 0168   NUMBER     RESERVE      1
 0169   E NUMBER   RESERVE      1
 0170   DEC DIGS   RESERVE      1
 0171   B NUMBER   RESERVE      1
 01711  WBUF FULL  RESERVE      1

# Page 271
#      @YUL SYSTEM ASSEMBLER -- PASS 2                                           USER'S OWN PAGE NO.   7        PAGE   7

P0173   NUMERICAL CONSTANTS.

 0174   COUNT PTR  OCT          -4010 0001                                      (INITIAL CONDITION).
 0175   MIN ADRES  OCT          0                                               POPO BUFF THRU MIN ADRES ARE AN ARRAY.
 0176   (RIGHTP)   OCT          07
 0177   D4         DEC          000G
 0178   B39T48     OCT          -1777
 0179   OCT 1777   EQUALS       B39T48

 0180   BIT 32     DEC          -1 0000
 0181   C31        OCT          -37
 0182   TYPE E     OCT          -4000 0000
 0183   TYPE F     OCT          - 2000 0000
 0184   6D4        DEC          0006
 0186   5D8        DEC          -5 0000
 0190   CD8        DEC          -C 0000
 0191   B26T48     OCT          -3777 7777
 0192   DEC 600    DEC          -600
 0193   DEC 999    DEC          -999
 0195   EIGHT      DEC          -8
 0196   UNSIG NUM  OCT          23
 0197   PLUS 75    FXBIN        75
 0198   TEN        FXBIN        -10
 0199   FL UNITY   FLDEC        1.0
 0200   BIT 41     OCT          -200
 0201   B210       FXBIN        -210
 0202   HEX 49L    DEC          49
 0203   B1B2       OCT          6
 0204   FLI ZERO   DEC          DB
 02061  HALF ADJ   FLDEC        0.5
 0207   PLUS 42    FXBIN        42
 0208   PLUS 3     FXBIN        3
 0209   B1B5T48    DEC          8GGG GGGG GGGG
 0210   B25T26     OCT          -6000 0000
 0211   DEC5 FLAG  DEC          5
 0212   DEC6 FLAG  DEC          6
 02122  USER PAGE  DEC          0
 02125  B20T24     OCT          0000 0037
 02126  A ADRES    OCT          0000 7777
 02127  DEF XFORM  OCT          -311116 15554
 02128  CAC12      DEC          GGGG GGGG

# Page 272
#      @YUL SYSTEM ASSEMBLER -- PASS 2                                           USER'S OWN PAGE NO.   8        PAGE   8

P0213              PRINT LINE STORAGE; EQUIVALENCES AND ASSIGNMENTS.



 02131  LINE STOR  OCT          0
 02132             ALF,5
 02133             ALF,5
 02134             ALF,5



 0214   LINE       ASSIGN       0,0

 02145  CUSS LIST  ASSIGN       1,0

 0215   PHI TAPE   ASSIGN       7,1
 0216   EOR        ASSIGN       7,4
 0217   PHI LOAD   ASSIGN       7,7
 0218   PHI RLEAS  ASSIGN       7,19

 0220   PHI PRINT  ASSIGN       7,23
 0221   BASE ADDR  ASSIGN       7,47
 02213  MON WAKE   ASSIGN       7,99
 02216  MON SLEEP  ASSIGN       7,166
 02218  MON TYPER  ASSIGN       7,215
 02219  MON PCR    ASSIGN       7,220

# Page 273
#      @YUL SYSTEM ASSEMBLER -- PASS 2                                           USER'S OWN PAGE NO.   9        PAGE   9

P0222   ASSIGNMENTS TO ALLOW MASKS TO BE USED AS CONSTANTS.



 022201 BIT 1      ASSIGN       1,064
 022202 BIT 2      ASSIGN       1,065
 022203 BIT 3      ASSIGN       1,066
 022204 B2B6       ASSIGN       1,067

 022205 B3T6       ASSIGN       1,068
 022206 BIT7       ASSIGN       1,069
 022207 BIT8       ASSIGN       1,070
 022208 BIT9       ASSIGN       1,071

 022209 BIT11      ASSIGN       1,072
 02221  BIT 12     ASSIGN       1,073
 022211 B11T12     ASSIGN       1,074
 022212 BIT14      ASSIGN       1,075

 022213 BIT15      ASSIGN       1,076
 022214 BIT16      ASSIGN       1,077
 022215 BIT17      ASSIGN       1,078
 022216 BIT33      ASSIGN       1,079

 022217 B1B17B33   ASSIGN       1,080
 022218 ALLBUTB1   ASSIGN       1,081
 022219 ONE        ASSIGN       1,082
 02222  C7T8       ASSIGN       1,083

 022221 D12        ASSIGN       1,084
 022222 D2T12      ASSIGN       1,085
 022223 CHAR1      ASSIGN       1,086
 022224 CHAR7      ASSIGN       1,087

 022225 CHAR8      ASSIGN       1,088
 022226 C2T8       ASSIGN       1,089
 022227 BIT34      ASSIGN       1,090
 022228 CAC3       ASSIGN       1,091

 022229 CHAR6      ASSIGN       1,092
 02223  C5T8       ASSIGN       1,093
 022231 AVMSK      ASSIGN       1,094
 022232 BIT44      ASSIGN       1,095

 022233 BIT36      ASSIGN       1,096
 022234 B2T8       ASSIGN       1,097
 022235 B5T6       ASSIGN       1,098
 022236 TWO        ASSIGN       1,099

 022237 B10T12     ASSIGN       1,100
 022238 B19T25     ASSIGN       1,101
 022239 B20T25     ASSIGN       1,102
 02224  B26T30     ASSIGN       1,103

 022241 B28T30     ASSIGN       1,104

# Page 274
#      @YUL SYSTEM ASSEMBLER -- PASS 2                                           USER'S OWN PAGE NO.  10        PAGE  10

 022242 B38T48     ASSIGN       1,105
 022243 C1T7       ASSIGN       1,106
 022244 DECALFM1   ASSIGN       1,107

 022245 B42T48     ASSIGN       1,108
 022246 B44T47     ASSIGN       1,109
 022247 B47T48     ASSIGN       1,110
 022248 DECALFM2   ASSIGN       1,111

 022249 DECALFM3   ASSIGN       1,112
 02225  D1T11      ASSIGN       1,113
 022251 D1D3T12    ASSIGN       1,114
 022252 D8T12      ASSIGN       1,115

 022253 SPECMAG    ASSIGN       1,116
 022254 CAC2       ASSIGN       1,117
 022255 D4T8       ASSIGN       1,118
 022256 D1T3       ASSIGN       1,119

 022257 ONES       ASSIGN       1,120
 022258 OCTMASK    ASSIGN       1,121
 022259 THREAD10   ASSIGN       1,122
 02226  B1T38      ASSIGN       1,123

 022261 B1THRU45   ASSIGN       1,124
 022262 C1T4       ASSIGN       1,125
 022263 BIT29      ASSIGN       1,126
 022264 BADRES     ASSIGN       1,127



 022265 LASTREM    EQUALS       BIT8
 022266 SPEC SIGN  EQUALS       BIT33
 022267 CACN       EQUALS       AV MSK
 022268 THREE      EQUALS       B47T48

 022269 FL ZERO    EQUALS       BIT1
 02227  A COLUMN 1 EQUALS       B2 B6
 022271 OCT 7777   EQUALS       C7T8
 022272 OCT 10000  EQUALS       BIT 36

 022273 OCT 3777   EQUALS       B38T48
 022274 OCT 177    EQUALS       B42T48
 022275 C1T2       EQUALS       D1T3
 022276 OCT 2000   EQUALS       BIT 38

 022277 ALF 2000   EQUALS       BIT 29
 022278 BIT 25     EQUALS       TYPE E
 022279 FOUR       EQUALS       BIT 46
 02229  SPRA       EQUALS       128
 022291 ZX         EQUALS       8

# Page 275
#      @YUL SYSTEM ASSEMBLER -- PASS 2                                           USER'S OWN PAGE NO.  11        PAGE  11

P0223   ALPHABETIC CONSTANTS.

 0224   PARP NAME  ALF          ????PAS2
 02241  OLD PAGE   EQUALS       PARP NAME
 0225   PASS 3     ALF          YULPASS3
 0226   W END POPO ALF          END¢POPO
 0227   E COLUMN 1 ALF          E██████
 0228   BLOT WORD  ALF,2        ████████████████
 0229   ASTRISKS   ALF          ********
 0230   C COLUMN 1 ALF          C
 0231   BLANKS     ALF
 0232   W BAD WORD ALF          BAD WORD
 0233   HEAD       ALF
 0234   W LAST     ALF          LAST
 02342  REF 1XXX   ALF          REF >1K
 02344  W TO       ALF           TO
 02346  W REV      ALF            REV
 0235   ALF 9 C1   ALF          9
 0236   DC1        ALF          D
 0237   POINT C8   ALF          0000000.
 0238   EC8        ALF          0000000E
 0239   BC8        ALF          0000000B
 0240   STAR C8    ALF          0000000*
 0241   P COLUMN 1 ALF          P      @
 024101 COMERC AT  EQUALS       P COLUMN 1
 0242   L COLUMN 1 ALF          L      *
 024201 MARKER     EQUALS       L COLUMN 1
 02421  ZSUP ONE   ALF          █      1
 024211 BLOT C1    EQUALS       ZSUP ONE
 02422  USERLOG    OCT          0002
 02423             ALF,5
 02424             ALF,5
 02425             ALF,5         USER'S OWN PAGE NO.

 02426  W END NEW  ALF,2            END OF
 02427  W END REV  ALF,2          END OF REVISIO
 02428  W REVN0    ALF          N 0 OF
 02429  W LASS ASS ALF,2        LAST ASSEMBLED O

# Page 276
#      @YUL SYSTEM ASSEMBLER -- PASS 2                                           USER'S OWN PAGE NO.  12        PAGE  12

P04299             ADDRESS CONSTANTS.

 0243   L CD TYPES CAC          1024                        CARD TYPS
 02431  J COL 1    EQUALS       L CD TYPES
 02432  J COLUMN 1 EQUALS       J COL 1

 0244   CARD TYPS  CAC          MODIFY        14            END OF
 0245              CAC          CARD NO       14            END ERROR
 0246              CAC          DELETE        14            ACCEPT
 0247              CAC          DISASTER      2             REMARKS
 0248              CAC          MEMORY        14            NO LOC SYM
 0249              CAC          ILLEGOP       10            INSTRUCT
 0250              CAC          OCTAL         DAMN ZERO     DECIMAL
 0251              CAC          SETLOC        15            EQUALS
 0252              CAC          2OCTAL        3             ERASE
 0253              CAC          BLOCK         12            2DECIMAL
 0254              CAC          TOO LATE      15            HEAD TAIL
 0255              CAC          INSTRUCT +1   15            SUBRO
 0256              CAC          COUNT         15            EVEN
 02561             CAC                        3             SEGNUM

 0257   L PASS 2   CAC          14343         11089         PASS 2
 0258   L PROC WD  SPEC                                     PROC WORD
 02581  L END CARD SPEC                                     CARD +10
 02591  L NEXT SUB RESERVE      1
 0261   L LINE     SPEC                                     LINE STOR
 02615  L AV TABLE SPEC,B4                                  DAMN ZERO
 0262   L SYM THR  SPEC,B5                                  836
 0263   L TYP TAB  SPEC,B5                                  900
 0264   L CUSSER   SPEC                                     CUSSER
 0265   L SUSTAB   SPEC                                     SUBSTRAB
 0266   BANK 5     CAC          30720                       10240
 0267   DEPAGIN8   EQUALS       BANK 5
 0268   L DIRECTY  SPEC,B7                                  DAMN ZERO
 02681  DAMN ZERO  EQUALS       0
 0269   L DIG FILE CAC          10240                       DIG FILE
 02691  SHARP C1   EQUALS       L DIG FILE
 0270   L END THR  SPEC,B7                                  6
 0271   END SY TAB EQUALS       L AV TABLE

# Page 277
#      @YUL SYSTEM ASSEMBLER -- PASS 2                                           USER'S OWN PAGE NO.  13        PAGE  13

P0330              BEGINNING OF PASS 2 LOOP.  BEGINS BY GETTING A POPO CARD FROM TAPE 2.

 0332   PASS 2     TS           PASS 2 OLD    PASS 2        PHI TAPE            BEGINNING-OF-BUFFER STATE.
 0334              RF,2         -             -             DISASTER
 0335              WA           POPO BUFF     ONE           Z,X4
 0336              NA           4,1           W END POPO    PASS 2 OLD +1
 0337              TS           -             -             END PASS 2          END OF POPO FILE MEANS END OF PASS 2.

 0339   END ERROR  NA, CHAR1    CARD          B1B2          PASS 2 OLD -3       BRANCH UNLESS ANNOUNCEMENT OF REJECTS.
 03402             SS           CARD          CHAR1         L COLUMN 1          END ERROR MESSAGE MUST BE LAST LOG LINE.
 03404             TS           OWN PROC      QU COL SSL -2 UN LAS REM     C    INHIBIT CHECK ON COLUMNS 1, 17, AND 24.
 0341              TS, BIT34    ONES          SWITCH        MODIFY              PRINT ERROR MESSAGE ABOUT THAT.
 0343              S, MON TYPER PAGE HEAD +14 SPRA +16      -                   "█REJECT PAGE NNN".
 03442             SM           SWITCH        BIT 44        SWITCH              SHUT OFF PRINTING OF REST OF PROGRAM.
 03444             TS           C,-3          C,-2          C,-2                TYPE THAT JUST ONCE.

 0345   PASS 2 OLD TS           POB PLACE     Z,X4          C,+1
 0346              TN           N,X4,11       11            HEALTH              MOVE POPO INTO HEALTH AND CARD.
 0348              NA           4,2           EOR           NO PO EOR           BRANCH IF NOT END OF RECORD.

 0350              TS           POPO BUFF     Z,X4          PHI TAPE
 0351              RF,2         4,0           -             DISASTER
 0352              TX           N,SC,1        -             PASS 2              RE-INITIALIZE LOOP.
 0354              TS           PASS 2 OLD    PASS 2        PHI TAPE

 0355   NO PO EOR  TX           Z,X4          -             POB PLACE           SAVE PLACE IN BUFFER.
 03554             TS           ZERO          EQUALOC       PRINT LIN      C    CLEAR LOCATION SYMBOL SWITCH.
 0356              NA, LAST REM SWITCH        ONES          RIGHT PQ            BRANCH IF LAST CARD WASNT REMARKS.

 0358   UN LAS REM SS           ZERO          LAST REM      SWITCH         S
 0359              NA, CHAR1    HEALTH        (RIGHTP)      RIGHT PQ -1         BRANCH IF THIS CARD ISNT RIGHT PRINT.

 03601             NA, BIT44    CARD          ONES          C,+2                BRANCH IF LINE UNAFFECTED BY THIS REV.
 03603             TS, CHAR8    MARKER        3,1           MARK LINE +1
 0361              TS           -             -             SEND SYPT      C
 0362              TN           CARD +1       5             3,11                SET RIGHT PRINT REMARKS IN PRINT.
 0364              NA, BIT 7    HEALTH        ONES          CUSSER              BRANCH IF NO RIGHT PRINT CARDNO ERROR.

 0366              SWS, B38T48  CUSS LIST     32            Z,R5                ADDRESS OF CDNO CUSS USING B.I. 5 IN R5.
 0367              TN           N,R5          4             LINE +12            MAKE UP CARD NUMBER ERROR NOTE.
 0369              LA           BIT 1         CUSS LIST     REM CN ERR

 0370              WA           Z,X0          THREE         Z,X5                IF 1ST CUSS OF PAGE, LEFT END OF BLOTS.
 03702             TS           Z,SC,3        COMMON        GO NUM CUS     C    APPLY SERIAL NUMBER TO CUSS.

 0371   REM CN ERR SWE, CAC3    CUSS LIST     32            COMMON
 0373              TS, BIT 1    ZERO          CUSS LIST     PRIN CUSS      C    CUSS CRD NUMBER ERROR IN REMARKS CARD.
 0375              NA, CHAR 1   HEALTH        (RIGHTP)      MAIN ONLY           BRANCH IF THIS CARD NOT RIGHT PRINT.
 0377              TS, CAC3     6 CAC3        COMMON        COUNT CUS      C    CARD NUMBER ERROR(S) COUNT AS A CUSS.

 0383   MAIN ONLY  SM           BIT 1         TEN           COMMON              REL ADDR FOR CUSS WITH WITH RETURN FLAG.
 0385              TS           Z,SC,1        -             COUNT CUS      C

 0387              LA           BIT 1         CUSS LIST     REM CN ERR          BRANCH IF LONE REMARKS CARD HAS BAD NUM.

# Page 278
#      @YUL SYSTEM ASSEMBLER -- PASS 2                                           USER'S OWN PAGE NO.  14        PAGE  14

P0389   PROCEDURE WHEN LAST CARD WAS NOT LEFT PRINT REMARKS.

 0390   RIGHT PQ   SS           CARD          C1T7          LINE +1             SET UP COLUMNS 1-7.
 0391              NA, BIT44    CARD          ZERO          MARK LINE           BRANCH IF LINE AFFECTED BY THIS REVISON.
 0393              SWS, BIT 1   HEALTH        6,L           CUSS LIST           MAYBE CUSS CARD NUMBER SEQUENCE ERROR.
 0395              NA, CHAR1    HEALTH        (RIGHTP)      WHAT TYPE           BRANCH IF CARD IS NOT RIGHT PRINT.

 0396              TN           CARD +1       5             LINE +11            PRINT UNDER 1ST HALF OF REMARKS FIELD.
 0398              TS, CHAR1    C COLUMN 1    LINE +1       NO LOC SYM          MAKE RIGHT PRINT A CONTINUATION CARD.

 0400   WHAT TYPE  SWS, BIT 1   CARD          4             LINE                MAYBE SET UP SKIP BIT.
 0402              SPS, B10T12  CARD          8             LINE                MAYBE SET UP SPACE COUNT.
 0406              TN           CARD +1       9             LINE +7             SET UP COLUMNS 9-80.
 04091             SS           ZERO          BIT 2         SWITCH              TURN OFF LEFTOVER SWITCH.
 0410              TX           L CD TYPES    -             Z,X4
 0411              SWS, B20T25  HEALTH        19            OWN PROC
 04112             SS           OWN PROC      B20T24        QUCOL SSL
 04114             SWS, BIT 29  OWN PROC      4             QUCOL SSL           SET UP BRANCHES ON CARD TYPE.
 04116  QUCOL SSL  SSL, B47T48  4,0           16            C,+1                USE TERNARY KEY TO CHECK WHETHER COLUMNS

 04118             NA, CHAR1    CARD          J COL 1       C,+3                1, 17, AND 24 CONTAIN QUEER INFORMATION.
 041191            TS           -             -             OWN PROC +2

 0412   OWN PROC   SWE, CAC3    4,0           0             Z,SC                GOI TO OWN PROCEDURE.

 04122             NA, CHAR1    CARD          BLANKS        QUEER C1
 04124             NA, CHAR1    CARD +2       BLANKS        QUEER C17
 04126             NA, CHAR8    CARD +2       BLANKS        QUEER C24
 04128             TS           -             -             OWN PROC



R0413   TRIVIAL SUBROUTINE IN PASS 2 TO MARK A LINE AFFECTED BY THE CURRENT REVISION.

 04132  MARK LINE  SS           MARKER        CHAR8         LINE +1             MARK PRINT POSITION 8 OF LINE.
 04136             SS           ASTRISKS      CHAR8         MARKER              RESTORE ASTERISK AFTER ACCEPTANCE.
 04138             TX           Z,SH          -             Z,SC

# Page 279
#      @YUL SYSTEM ASSEMBLER -- PASS 2                                           USER'S OWN PAGE NO.  15        PAGE  15

P0414              PROCEDURE IN PASS 2 FOR INSTRUCTIONS.  CALLS FOR LOCATION PROCESSING, OP CODE AND ADDRESS PROCESSING,
R0416   AND GOES ON TO PROCESS THE RESULTING WORD.

 0417   INSTRUCT   TS           Z,SC          Z,X4          INSTRONT
 0418              SWE, CAC3    M PROC OP     32            Z,CSC
 0419              TS           L PROC WD     MOD RETRN     N,CSC



R0420              PROCEDURE IN PASS 2 FOR SINGLE-PRECISION DECIMAL CONSTANTS.  CALLS FOR LOCATION PROCESSING, TRANSLA-
R0422   TION OF THE CONSTANT, AND WORD PROCESSING.

 0423   DECIMAL    TS           Z,SC          Z,X4          INSTRONT
 0424              TS           CARD +5       SAVE W6       DELIMIT        C    ENSURE DELIMITING OF FIELD BY ASTERISK.
 0426              TN           D1 PARAMS     3             MAX DECML           SET PARAMETERS FOR 1P DECIMAL.
 0428              TS           N,SC          Z,X4          DEC CONST           TRANSLATE CONSTANT.
 0430   L FINI 1P  CAC          CARD +3                     C,+1

 0431              SWE, CAC3    M PROC 1P     16            Z,CSC
 0432              TX           L PROC WD     -             Z,SC           C



R0433              PROCEDURE IN PASS 2 FOR SINGLE-PRECISION OCTAL CONSTANTS.  CALLS FOR LOCATION PROCESSING, TRANSLATION
R0435   OF THE CONSTANT, AND WORD PROCESSING.

 0436   OCTAL      TS           Z,SC          Z,X4          INSTRONT
 0437              TS           CARD +5       SAVE W6       DELIMIT        C    ENSURE DELIMITING OF FIELD BY ASTERISK.
 0439              TX           K1 MAXNUM     -             MAX NUMBR           SET LIMIT FOR 1P OCTAL NUMBER.
 04401             SWS, B28T30  ONE           18,L          SIGND OCT           SET UP TO SHIFT LIMIT 1 IF SIGNED.
 0441              TS           L FINI 1P     Z,X4          OCT CONST           TRANSLATE CONSTANT AND JOIN DECIMAL.



R0443   TRIVIAL SUBROUTINE TO DELIMIT A CONSTANT FIELD BY AN ASTERISK, USING THE PRESENCE OR ABSENCE OF AN ASTERISK IN
R0445   THE OPERATION CODE FIELD.  ALSO SETS UP Z,S3 TO THE BEGINNING OF THE FIELD.

 0447   DELIMIT    SWE, CAC3    L FINI 1P     32            Z,S3           C
 0448              SSL, ONE     HEALTH        37            C,+1           C    TEST SO-CALLED INDIRECT ADDRESSING BIT.
 0450              TX           ASTRISKS      -             CARD +5             IF ZERO, FIELD IS 2 WORDS LONG.
 0452              SM           ASTRISKS      B5T6          CARD +10            IF ONE, THERE SHOULD BE AN EXPLICIT *.

# Page 280
#      @YUL SYSTEM ASSEMBLER -- PASS 2                                           USER'S OWN PAGE NO.  16        PAGE  16

P0454              PROCEDURE IN PASS 2 FOR DOUBLE-PRECISION DECIMAL CONSTANTS.  CALLS FOR LOCATION PROCESSING, TRANSLA-
R0456   TION OF THE CONSTANT, PRINTS THE FIRST LINE, SENDS THE FIRST WORD IF POSSIBLE, SETS UP A CONTINUATION LINE,
R0458   PROCESSES THE SECOND LOCATION, SETS UP THE SECOND WORD, AND CALLS FOR WORD PROCESSING.

 0460   2 DECIMAL  TS           Z,SC          Z,X4          INSTRONT
 0461              TS           CARD +5       SAVE W6       DELIMIT        C    ENSURE DELIMITING OF FIELD BY ASTERISK.
 0463              TN           D2 PARAMS     3             MAX DECML           SET PARAMETERS FOR 2P DECIMAL.
 0465              TS           N,SC          Z,X4          DEC CONST
 0466   L FINI 2P  CAC                                      C,+1

 0467              SWE, CAC3    M PROC 2P     32            Z,CSC          C    FINISH WORDS ACCORDING TO MACHINE.
 0471              TS           Z,SC          Z,X4          PRINT LIN           PRINT FIRST LINE.
 0473              TX           L OLD LINE    -             Z,X3
 0474              TS           3,1           LINE +1       SEND WORD      C    SEND WORD THAT HAS VALID LOCATION.
 0475              SS           C COLUMN 1    CHAR1         LINE +1             SET UP CONTINUATION LINE.
 0477              LA           ONES          LOCATION      2 BAD LOCS          BRANCH IF BOTH LOCATIONS ARE BAD.

 0479              NA, BIT 14   HEALTH        ONES          C,+2                BRANCH IF BOTH LOCATIONS ARE GOOD.
 0481              TS           ONES          LOCATION      C,+2                WHEN ONLY 2ND LOCATION IS BAD.

 0483              WA           LOCATION      ONE           LOCATION

 0484   2 BAD LOCS SWE, CAC3    M PLOC EB     16            Z,CSC          C    PRINT SECOND LOCATION.
 0486              SS           2ND ALF       CON MASK      LINE +5
 0487              SS           2ND ALF +1    CON MASK +1   LINE +6             PRINT SECOND WORD.
 0489              TS           2ND HALF      WORD          PROC WORD




R0490              PROCEDURE IN PASS 2 FOR DOUBLE-PRECISION OCTAL CONSTANTS.  CALLS FOR LOCATION PROCESSING, TRANSLATION
R0492   OF THE CONSTANT, AND JOINS THE 2DECIMAL PROCEDURE.

 0493   2 OCTAL    TS           Z,SC          Z,X4          INSTRONT
 0494              TS           CARD +5       SAVE W6       DELIMIT        C    ENSURE DELIMITING OF FIELD BY ASTERISK.
 0496              TX           K2 MAXNUM     -             MAX NUMBR           SET UP LIMIT ON SIZE OF CONSTANT.
 04971             SWS, B28T30  TWO           18,L          SIGND OCT           SET UP TO SHIFT LIMIT 2 IF SIGNED.
 0498              TS           L FINI 2P     Z,X4          OCT CONST           TRANSLATE AND JOIN 2DECIMAL.

# Page 281
#      @YUL SYSTEM ASSEMBLER -- PASS 2                                           USER'S OWN PAGE NO.  17        PAGE  17

P0500              SUBROUTINE IN PASS 2 TO PROCESS THE LOCATION FIELD OF AN INSTRUCTION OR CONSTANT.  CUSSES ABOUT LOCA-
R0502   TION FORMAT AND VALUE, DETERMINES THE VALUE OF A LEFTOVER LOCATION IF REQUIRED, AND PRINTS THE LOCATION VALUE
R0504   WITH END OF BLOCK OR BANK NOTATION IF REQUIRED.  RETURN VIA X4.

 0505   INSTRONT   NA, BIT 8    HEALTH        ZERO          C,+3                BRANCH IF LOCATION IS SYMBOLIC.
 05054             SWS, BIT 1   HEALTH        12,L          CUSS LIST +1        MAYBE CUSS REJECTION OF LEFTOVER STATUS.
 05058             TS           Z,SC,2        -             SETLOC         C    MAYBE CUSS "D" ERROR, ZERO EQUALOC.

 050595            SWS, BIT 33  HEALTH        16            CUSS LIST +4        MAYBE CUSS LOC SYM NO FIT IN TABLE.
 0506              TS           Z,SC          Z,X6          LOC SYM 1           ANALYZE AND PRE-PROCESS LOCATION SYMBOL.
 05062             LA           EQUALOC       ZERO          MAYBE CUS           BRANCH IF SYMBOL DIDN'T FIT IN TABLE.
 05066             SWS, BIT 1   HEALTH        12,L          CUSS LIST +17       MAYBE CUSS WRONGFUL PREDEFINITION.
 05068             SWS, B38T48  CUSS LIST +17 32            Z,R5                PUT LOCATION SYMBOL INTO CUSS IN CASE IT
 05069             TS           -             -             SYM CUSS 2     C    WAS WRONGFULLY PREDEFINED.

 0507   MAYBE CUS  SWS, BIT 1   HEALTH        13,L          CUSS LIST +2        MAYBE CUSS OVERSIZE LOCATION VALUE.
 0509              SWS, BIT 33  HEALTH        18            CUSS LIST +1        MAYBE CUSS LOCATION MEMORY TYPE ERROR.
 0511              SWS, BIT 17  HEALTH        1             CUSS LIST +1        MAYBE CUSS CONFLICT IN LOCATION CONTENT.
 0513              SWS, BIT 17  HEALTH        7             CUSS LIST +4        MAYBE CUSS PREDEFINITION FAILURE.
 05144             NA, BIT14    HEALTH        ZERO          REGULOC -2          BRANCH IF THERE'S NO GOOD LOCATION VALU.
 0515              NA, BIT 12   HEALTH        ONES          REGULOC             BRANCH IF LOCATION NOT LEFTOVER.

 0516              NA, BIT8     HEALTH        ONES          REGULOC             BRANCH IF NO LOCATION FIELD SYMBOL.
 0517              SM           SWITCH        BIT 2         SWITCH              TURN ON LEFTOVER SWITCH.
 0519              LA           BIT 1         EQUALOC +1    C,+2                BRANCH IF THE LEFTOVER WAS DEFINED.
 0520              TS           ONES          LOCATION      REGULOC +1          SHOW LACK OF LOCATION VALUE.
 0521              SS           COMMON +2     CAC3          HEALTH              USE VALUE FOUND BY PASS 1.5.

 0522   REGULOC    EX           HEALTH        CAC3          LOCATION
 0523              SWE, CAC3    M PLOC EB     16            Z,CSC
 0524              TX           Z,X4          -             Z,SC           C    PRINT LOCATION VALUE AND RETURN.

R0530   SUBROUTINE IN PASS 2 TO ANALYZE AND PRE-PROCESS A LOCATION SYMBOL.

 0532   LOC SYM 1  TS           CARD +1       COMMON        ANALOXIM            FETCH LOCATION FIELD OF CARD.
 0534              NA, CHAR1    COMMON        BLANKS        ANALOXIM +1         BRANCH WHEN SYMBOL IS NORMALIZED.
 0536              SWE, ONES    COMMON        A,1,L         COMMON
 0537   ANALOXIM   TS           ZERO          EQUALOC +1    C,-2                SHOW UNDEFINED WHEN NOT FIT IN TABLE.

 0539              NA, BIT 33   CUSS LIST +4  ONES          LSYM FITS           BRANCH IF LOCATION SYMBOL IS IN TABLE.
 0541              TS           ZERO          EQUALOC       FULLNESS +1    C    SET UP PARAMETERS TO SHOW FULL TABLE.
 0543              SS           CUSS LIST +4  B38T48        Z,R5
 0544              TS           Z,X6          Z,SC          SYM CUSS 2     C    CUSS FIT FAILURE AND EXIT.

 0546   LSYM FITS  TS           COMMON        EQUALOC       ANAL SYMB      C    GET HISTORY OF NORMALIZED SYMBOL.
 0548              LA           2,1           D4            NO MUL DEF          BRANCH IF NO PAGE-OF-DEFINITION FOR SYM.
 0550              S, ETS       3,0           ZX +5         C,+1                OTHERWISE, POINT TO MULT. DEF. FLAG.
 0552              SM           CAC12         N,X2          5,2                 ADVANCE POINTER TO NEXT MEMBER OF SET.
 0554              S, ETS       2,0           ZX +2         C,+1
 05542             TS           Z,X2,1        -             FOUND SYM      C    GET HISTORY OF THIS DEFINITION.
 0556   NO MUL DEF EBA          Z,X2          ZERO          EQUALOC +1          COPY OTHER SYMBOL PARAMETERS TO SAFETY.
 0558              SWS, B26T30  COMMON +2     2,L           C,+1                USE SYMBOL HEALTH AS SHIFT COUNT.
 0560              SWS, BIT 1   DEF XFORM                   EQUALOC +1          SHOW WHETHER THERE IS A VALID DEFINITON.
 0562              TS           COMMON +2     EQUALOC +2    N,X6

# Page 282
#      @YUL SYSTEM ASSEMBLER -- PASS 2                                           USER'S OWN PAGE NO.  18        PAGE  18

P0684              ROUTINE IN PASS 2 TO FINISH PROCESSING A WORD (EITHER AN INSTRUCTION OR CONSTANT).  RELEASES THE LINE
R0686   FOR PRINTING, TRANSMITS WORD TO "SEND WORD" IF THE LOCATION IS VALID, SETS UP ALL CUSSES CONCERNING THE LOCATION
R0688   SYMBOL IF ANY, RESTORES "NO LOC SYM" AS A GENERAL END PROCEDURE, RELEASES THE CARD FOR TRANSMISSION TO TAPE AS A
R0690   SYPT OR SYLT RECORD COMPONENT, AND PROCEEDS TO THE UNIVERSAL CUSSING ROUTINE.

 0691   PROC WORD  TS           Z,SC          Z,X4          PRINT LIN           RELEASE LINE FOR PRINTING.
 06912             TS           N,SC,1        NO LOC SYM    SEND WORD      C    TEMPORARY CHANGE TO NO LOC SYM.
 06914             TX           PROC WORD     -             NO LOC SYM

 0692   NO WORD    NA, BIT 8    HEALTH        ONES          ZEQUALOC            BRANCH IF THERE IS NO LOCATION SYMBOL.
 0694              NA           EQUALOC       ZERO          HEALTH CQ           BRANCH IF LOC SYM IS IN SYMBOL TABLE.

 0699   ZEQUALOC   TS           ZERO          EQUALOC       NO LOC SYM

 0702   HEALTH CQ  TN           EQUALOC       3             COMMON              RECOVER LOCATION SYMBOL PARAMETERS.
 0704              LA           CD8           COMMON +2     C,+2                BRANCH IF SYMBOL HEALTH IS C OR MORE.
 0706              SSL, B44T47  COMMON +2     15            NO LOC SYM -12      BRANCH ON HEALTHS 5 - B.
 0708              SWS, B38T48  CUSS LIST +7  16            Z,R5
 0709              TS, BIT 17   ONES          CUSS LIST +7  SYM CUSS 2     C    CUSS MULTIPLE DEFINITION.
 0711              SSL, B44T47  COMMON +2     15            HELTHS 8C -22       BRANCH ON HEALTHS C - G.

 07121             SS           ZERO          BIT 17        CUSS LIST +7        INHIBIT MULT. DEF. CUSS FOR HEALTHS F,G.
 0713   SYM CUSS 4 TS           Z,SC,2        -             SYM CUSS 2     C    SET UP LOCATION SYMBOL FOR CUSSING.

 0714   HEALTH 5   SWS, B38T48  CUSS LIST +10 32            Z,R5
 0715              TS, BIT 1    ONES          CUSS LIST +10 SYM CUSS 4          INDEFINABLY LEFTOVER.

 0716   NO LOC SYM TS           Z,SC          Z,X4          PRINT LIN           (CHANGED, RESTORED BY PROC WORD ENTRY.)
 0718              S, ETS       EQUALOC +1    ZX +2         PAG LOXIM           RECOVER LOC SYM ENTRY ADR, JOIN SETLOC.

 0720   HEALTH 7   SWS, B38T48  CUSS LIST +7  16            Z,R5
 0721              TS, BIT 17   ONES          CUSS LIST +7  SYM CUSS 4          MULTIPLE DEFINITION.

 0723   HELTHS 8C  SS           CUSS LIST +6  B38T48        Z,R5
 0724              TS, BIT 33   ONES          CUSS LIST +6  SYM CUSS 4          OVERSIZE LOCATION.

 0726   HELTHS 9D  SWS, B38T48  CUSS LIST +5  16            Z,R5
 0727              TS, BIT 17   ONES          CUSS LIST +5  SYM CUSS 4          MEMORY TYPE ERROR.

 0729   HELTHS BE  SWS, B38T48  CUSS LIST +6  32            Z,R5
 0730              TS, BIT 1    ONES          CUSS LIST +6  SYM CUSS 4          CONFLICT OF LOCATION CONTENTS.

 0732   HEALTH F   SWS, B38T48  CUSS LIST +8  32            Z,R5
 0733              TS, BIT 1    ONES          CUSS LIST +8  SYM CUSS 4 -1       MULTIPLE ERRORS.

 0735   HEALTH G   SS           CUSS LIST +8  B38T48        Z,R5
 0736              TS, BIT 33   ONES          CUSS LIST +8  SYM CUSS 4 -1       MISCELLANEOUS TROUBLE.

# Page 283
#      @YUL SYSTEM ASSEMBLER -- PASS 2                                           USER'S OWN PAGE NO.  19        PAGE  19

P0738              SUBROUTINE IN PASS 2 TO TRANSMIT UNSORTED WORDS TO PASS 3 VIA TAPE 4.  WITH WORD AND LOCATION SET, GO
R0740   TO SEND WORD VIA COSEQUENCE CALL.  THE SUBROUTINE FORMS SPAN WORDS, OR FWA-LWA WORDS, IN THE FOLLOWING FORMAT...
R0742              CAC          (PAGENO)      LWA           FWA            WHERE FWA IS THE ADDRESS OF THE FIRST AND LWA
R0744   THE ADDRESS OF THE LAST IN A CONTIGUOUS BLOCK OF WORDS GENERATED BY PASS 2.  THIS IS FOLLOWED BY THE WORDS THEM-
R0746   SELVES, WITH CONSTANT OR INTERPRETIVE FLAGS AS NEEDED, OR REPLACED BY ..BAD WORD.. IF APPROPRIATE.  ALL THE
R0748   ACTION OF THIS SUBROUTINE IS OMITTED IF THE LOCATION IS INVALID.  A TABLE IS KEPT OF SUBSTRANDS USED.  THE
R0750   BUFFER IS WRITTEN AS SOON AS IT IS FULL, AND RE-USED ON THE NEXT CALL.



 0751   SEND WORD  LA           ONES          LOCATION      N,SC,1         C    IMMEDIATE EXIT FOR BAD LOCATION.

 0753              SPS, B26T30  LOCATION      10,L          C,+1           C    CHOOSE FROM 256 SUBSTRAND USE BITS.
 0755              SWE, ONES    BIT 1         0             COMMON         C
 0756              SWE, D12     LOCATION      13            COMMON +1      C
 0757              WA           COMMON +1     L SUSTAB      Z,S3           C
 0758              SM           N,S3          COMMON        N,S3           C    MARK SUBSTRAND BIT ACCORD TO THIS LOCN.
 0760              NA           WORD          W BAD WORD    OD PARITY      C
 0761              TS           -             -             NEW BUF Q -1   C    BYPASS PARITY COMPUTATION FOR BAD WORD.

 0763   OD PARITY  TX           WORD          -             COMMON         C    PARITY COMPUTATION FOR GOOD WORD ONLY.
 0765              WA           WORD          WORD          WORD           C
 0766              SWE, ONES    COMMON        1             COMMON +1      C
 0767              HA           COMMON        COMMON +1     COMMON         C
 0768              HA           COMMON        WORD          COMMON         C
 0769              SWE, ONES    COMMON        3             COMMON +1      C
 0770              HA           COMMON        COMMON +1     COMMON         C
 0771              SWE, ONES    COMMON        6             COMMON +1      C
 0772              HA           COMMON        COMMON +1     COMMON         C
 0773              SWE, ONES    COMMON        12            COMMON +1      C
 0774              HA           COMMON        COMMON +1     COMMON         C
 0775              SWE, ONES    COMMON        24            COMMON +1      C
 0776              HA           COMMON        COMMON +1     COMMON         C
 0777              HA, ONE      COMMON        ONE           WORD           C    PUT PARITY BIT IN WORD.
 07781             TX           L OLD LINE    -             Z,X4           C
 0779              SS           ZERO          CHAR 6        4,6            C
 0780              SWS, BIT 35  WORD          12,L          4,6            C    SET PARITY BIT IN PRINT.
 07811             LA           BIT 1         WORD          C,+2           C
 0782              TS           ZERO          COMMON        FLAG CON -1    C    SET UP ZERO IF NO INTERNAL FLAG.
 0784              LA           B1B2          WORD          FLAG CON       C    BRANCH IF WORD IS A CONSTANT.
 0786              NA, BIT 3    WORD          ONES          C,+2           C
 07862             TS           PRET FLAG     COMMON        FLAG CON +1    C    SET UP EXTERNAL INTERPRETIVE FLAG.
 07864             TX           MISC FLAG     -             COMMON         C    SET UP EXTERNAL MISCELLANEOUS FLAG.
 07871             NA, CHAR1    CARD +2       BIT 1         C,+2           C    PUT CONSTANT FLAG ON NEGATIVE INSTRUCTN.
 0788   FLAG CON   TX           CONS FLAG     -             COMMON         C    SET UP EXTERNAL CONSTANT FLAG.
 0789              SS           COMMON        FLAG MASK     WORD           C    APPLY CHOSEN EXTERNAL FLAG TO WORD.

 07908             WA           SENT LOC      ONE           SENT LOC       C    ADVANCE CONTIGUITY CRITERION.
 0791   NEW BUF Q  TS           L WD BUFF     Z,R7          START BUF      C    SPECIAL NEW-BUFFER STATUS INITIALLY.

 07922             NA           PAGE NO       OLD PAGE      CHANG FWA      C    BRANCH IF PAGE NUMBER HAS CHANGED.

 0793   STORE WD   TS           WORD          N,R7,1        WB FULL Q      C

# Page 284
#      @YUL SYSTEM ASSEMBLER -- PASS 2                                           USER'S OWN PAGE NO.  20        PAGE  20

P0805   PROCEDURE TO BEGIN RE-USE OF BUFFER.

 0808   NEW BUFF   TS           L WD BUFF     Z,R7          PHI TAPE
 0809              WF,4         -             -             DISASTER            WAIT FOR RECORD TO FINISH WRITING.
 0811              TS           Z,S1          Z,SC          C,+1           C    SWITCH BACK TO COSEQUENCE MODE.

 0813   START BUF  TN           CAC2          1             N,R7,1         C    SET BANNER WORD, R7, AU2.
 08133             MT           ONES          44            N,AU2,1        C    FILL BUFFER WITH ONES INITIALLY.
 08135             LA           Z,AU2         WBUF FULL     C,-1           C

 08137             TS           UNSET NEW     NEW BUFF Q    CHANG FWA +3   C

 0814   CHANG FWA  WD           SENT LOC      ONE           COMMON         C
 08142             TX           L OLD FWA     -             Z,AU1          C
 08144             SWS, CAC2    COMMON        16,L          N,AU1          C    FINISH OLD FWA-LWA WORD WITH LWA.

 0815              TX           Z,R7          -             L OLD FWA      C    NOTE PLACE IN BUFFER.
 08152             SWE, ONE     SWITCH        45            OLD PAGE       C
 08153             DA           PAGE NO       OLD PAGE      OLD PAGE       C    PAGE NUMBER COMPENSATED FOR OWED HEADS.
 081532            TX           OLD PAGE      -             WORD PAGE      C
 081534            LA           WORD PAGE     DEC 999       C,+3           C
 081536            LA, C7T8     DEC 600       WORD PAGE     C,+2           C
 081538            WD           WORD PAGE     DEC 600       WORD PAGE      C    CONVERT HUNDREDS DIGIT TO HEXADECIMAL.
 08154             SWE, ONES    OLD PAGE      32,L          N,R7           C    PUT PAGE NUMBER IN FWA-LWA WORD.
 08156             SM           N,R7          LOCATION      N,R7,1         C    SET UP FWA AND LOCATION.
 0816              TS           LOCATION      SENT LOC      STORE WD       C    SET UP COMPARISON LOCATION.

 0817   WB FULL Q  EBA          COUNT PTR     ZERO          Z,X4           C
 08172             DA, D2T12    4,0           BIT 32        4,0            C    INCREMENT WORD COUNT FOR CURRENT RTNE.
 08174             SWS, D1T3    WORD PAGE     D,9,L         N,X4           C    KEEP PAGE OF LAST WORD IN REACH OF RTNE.
 0818              LA           Z,R7          WBUF FULL     N,SC,1         C    EXIT IF NOT AT OR NEAR END OF BUFFER.

 0822   SEND WBUF  WA           WBUF FULL     THREE         Z,R7           C    MAKE ALL RECORDS OF UNIFORM SIZE.
 0825              TX           L OLD FWA     -             Z,AU1          C
 0826              SWS, CAC2    SENT LOC      16,L          N,AU1          C    FINISH LAST FWA-LWA WD IN RECORD.
 0828              TX           L WD BUFF     -             Z,X4           C
 0829              CC           N,X4          -             N,R7           C
 0830              TS           Z,SC          Z,S1          C,+1                SWITCH TO SEQUENCE MODE.
 0832              TS           SET NEW       NEW BUF Q     PHI TAPE
 0833              WF,4         4,0           -             DISASTER
 0834              TS           Z,R0,1        -             N,S1                STEP COUNT OF WORD RECORDS AND EXIT.

 0836   SET NEW    TS           Z,SC          Z,S1          NEW BUFF       S
 0837   UNSET NEW  NA           SENT LOC      LOCATION      CHANG FWA      C

# Page 285
#      @YUL SYSTEM ASSEMBLER -- PASS 2                                           USER'S OWN PAGE NO.  21        PAGE  21

P0838              PROCEDURE IN PASS 2 FOR SETLOC.  DOES NOT ACCEPT ANY CHANGES IN THE STATUS OF AN ADDRESS SYMBOL.

 0840   SETLOC     TS           ZERO          EQUALOC       EQUALS         C    MAYBE CUSS  D  ERROR.
 0842              SWS, BIT 17  HEALTH        9             CUSS LIST +14       MAYBE CUSS NONBLANK LOC FIELD.
 0844              SWS, BIT 33  HEALTH        23            CUSS LIST +1        MAYBE CUSS WRONG MEMORY TYPE.
 0846              SWS, BIT 33  HEALTH        20            CUSS LIST +2        MAYBE CUSS MEANINGLESS ADDRESS FIELD.
 0848              SWS, BIT 17  HEALTH        3             CUSS LIST +3        MAYBE CUSS ADDRESS SIZE ERROR.
 0850              NA, BIT 16   HEALTH        ONES          ASYM FITZ           BRANCH IF ADR SYM FITTED IN SYM TAB.

 0852              TS           Z,SC          Z,X4          ADR FIELD
 0853              NA, CHAR8    ADR WD        BLANKS        C,+2
 0854              SS           HEAD          CHAR8         ADR WD              GET ADDRESS SYMBOL (HEADED).
 0856              SWS, B38T48  CUSS LIST +5  32            Z,R5
 0857              TS           ADR WD        COMMON        SYM CUSS 2     C
 0858              TS, BIT 1    ONES          CUSS LIST +5  FORM LOCN -1        CUSS FULLNESS OF SYMBOL TABLE.

 0860   ASYM FITZ  TS           Z,SC,1        Z,SH          FITS FITZ      C    RECOVER ADDRESS SYMBOL INFORMATION.
 0861              TS           ZERO          Z,X2          FORM LOCN           BRANCH IF NO ADDRESS SYMBOL.

 0865              NA, BIT11    HEALTH        ONES          C,+3
 0866              SS           CUSS LIST +14 B38T48        Z,R5                UNDEFINED SETLOC SYMBOL IS FATAL.
 0867              TS, BIT 33   ONES          CUSS LIST +14 SYM CUSS 2     C    CUSS NO DEFINE BY PASS 1.

 0869              NA, BIT 12   HEALTH        ONES          C,+3
 0870              SWS, B38T48  CUSS LIST +15 32            Z,R5
 0871              TS, BIT 1    ONES          CUSS LIST +15 SYM CUSS 2     C    CUSS NEAR DEFINE BY PASS 1.

 0873              SWE, D8T12   N,X2          16            COMMON +2           GET SYMBOL TABLE INFO ENTRY.
 0877              TX           RESTORQ       -             SYMB MOD Q
 0884              TS           Z,SC          Z,X6          SYMB FITS           MODIFY AND VISIT ADDRESS SYMBOL CUSSER.

 0885   RESTORQ    TS           SYMB MOD A    SYMB MOD Q    C,+1                EXECUTED EITHER HERE OR THERE.
 0887              NA, B11T12   HEALTH        ZERO          FORM LOCN -1        BRANCH IF NO DEFINTIION FROM PASS 1.
 08882             SWE, THREE   HEALTH        34            LOCATION
 08884             LA           LOCATION      ZERO          FORM LOCN           BRANCH IF NO ADDRESS FIELD PROBLEMS.
 0889              TS           ONES          LOCATION      C,+2                SIGNAL BAD LOCATION.

 0891   FORM LOCN  EX           HEALTH        CAC3          LOCATION            USE DETERMINED LOCATION.
 0893              TX           M PLOC IS     -             Z,CSC          C    PRINT LOC VALUE IF ANY.
 0895              TS           Z,SC          Z,X4          PRINT LIN

 08953  PAG LOXIM  SWE, ONE     SWITCH        45            EQUALOC +1          COMPENSATES IF PAGE HEADS ARE OWED.
 08956             DA           EQUALOC +1    PAGE NO       EQUALOC +1          PREPARE PAGE NUMBER OF DEFINE OR REFER.
 08957             LA           EQUALOC +1    DEC 999       C,+3                BRANCH IF NUMBER IS STORABLE AS IS.
 08958             LA, C7T8     DEC 600       EQUALOC +1    C,+2                BRANCH TO MODULATE A NUMBER OVER 1599.
 08959             WD           EQUALOC +1    DEC 600       EQUALOC +1          CONVERT HUNDREDS DIGIT TO HEXADECIMAL.
 0896              LA           EQUALOC       ZERO          C,+2                BRANCH IF NO LOC SYMBOL IN SYM TABLE.
 08963             SWS, D1T3    EQUALOC +1    D,9,L         2,1                 RECORD PAGE ON WHICH SYMBOL WAS DEFINED.
 08966             LA           L REF SYM     ZERO          SEND CUSS           BRANCH IF NO ADDRESS SYMBOL IN SYM TAB.
 0897              EBA          L REF SYM     ONE           Z,X2                POINT TO THIRD WORD OF SYM TAB ENTRY.
 08973             TS           ZERO          L REF SYM     REFRENCE            CLEAR REF ANALYSIS FLAG, GO TO PAGE 22.

# Page 286
#      @YUL SYSTEM ASSEMBLER -- PASS 2                                           USER'S OWN PAGE NO.  22        PAGE  22

P0898              PROCEDURE IN PASS 2 FOR IS,=,EQUALS CARDS.  PRINTS VALUE, CUSSES FOR FORMAT, VALUE, AND BOTH SYMBOLS.



 0903   EQUALS     SWS, BIT 17  HEALTH        8             CUSS LIST           MAYBE CUSS  D  ERROR.
 0905              SWS, BIT 17  HEALTH        9             CUSS LIST +15       MAYBE CUSS UNSYMBOLIC LOC FIELD.
 0907              HA           CUSS LIST +15 BIT 17        CUSS LIST +15       (THAT BIT INVERTED IN ERR/WARN CODE).
 0909              SWS, BIT 17  HEALTH        7             CUSS LIST +4        MAYBE CUSS PREDEFINITION FAILURE.
 0910              SWS, BIT 33  HEALTH        18            CUSS LIST +4        MAYBE CUSS LOC SYM NO FIT IN TABLE.
 0911              SWS, BIT 33  HEALTH        20            CUSS LIST +2        MAYBE CUSS MEANINGLESS ADDRESS FIELD.
 0913              SWS, BIT 17  HEALTH        3             CUSS LIST +3        MAYBE CUSS ADDRESS SIZE ERROR.
 0915              NA, BIT 17   CUSS LIST +15 ONES          C,+2                BRANCH IF LOCATION IS SYMBOLIC.
 0917              TS           ZERO          EQUALOC       C,+2                PROCLAIM ABSENCE OF LOCATION SYMBOL.

 0919              TS           Z,SC          Z,X6          LOC SYM 1           ANALYZE AND PRE-PROCESS LOCATION SYMBOL.
 0936              NA, BIT 16   HEALTH        ONES          ASYM FITS           BRANCH IF ADDRESS SYMBOL IS IN TABLE.

 0938              TS           Z,SC          Z,X4          ADR FIELD
 0939              NA, CHAR8    ADR WD        BLANKS        C,+2
 0940              SS           HEAD          CHAR 8        ADR WD              FORM HEADED SYMBOL.
 0942              SWS, B38T48  CUSS LIST +5  32            Z,R5
 0943              TS           ADR WD        COMMON        SYM CUSS 2     C    CUSS FULLNESS.
 0945              TS, BIT 1    ONES          CUSS LIST +3  FORM LOCN -1        GO TO JOIN END OF SETLOC PROCEDURE.

 0947   FITS FITZ  SWE, CAC3    HEALTH        16            ETS            C
 09475             LA           ETS           ZERO          N,SH           C    EXIT TO N+1 IF NO ADDRESS SYMBOL.
 0948              EBA          ETS           B26T48        Z,X2           C    POINT TO SYMBOL IN TABLE WITH PLUS SPEC.
 0949              TS           N,X2,1        COMMON        FIND OR NO +1  C    FETCH INFORMATION WORD FOR SYMBOL.

 0950   ASYM FITS  TS           Z,SC,1        Z,SH          FITS FITZ      C    RECOVER ADDRESS SYMBOL INFORMATION.
 0952              TS           ZERO          Z,X2          FORM EQLC           BRANCH IF THERE IS NO ADDRESS SYMBOL.
 0954              TS           C,+1          SYMB MOD Q    RESTORQ -1     C    CALL FOR ADDRESS SYMBOL CUSSING.
 0956              TS           SYMB MOD A    SYMB MOD Q    C,+1                EXECUTED EITHER HERE OR THERE.

 0958   FORM EQLC  LA           EQUALOC       ZERO          FORM LOCN -1        EXIT WHEN NO LOCATION SYMBOL.
 0962              LA           BIT 1         EQUALOC +1    C,+2                BRANCH IF SYMBOL IS DEFINED.
 0964              TS           ONES          LOCATION      C,+2                SHOW LACK OF LOCATION VALUE.
 0966              EX           EQUALOC +2    CAC3          LOCATION
 0968              TX           M PLOC IS     -             Z,CSC          C    PRINT LOCATION VALUE.
 0970              TN           EQUALOC       3             COMMON              MOVE LOCATION SYMBOL QUANTITIES FOR
 0972              LA           5 D8          EQUALOC +2    HEALTH CQ           CUSSING BY PROC WORD, DONE FOR 5 THRU G.

 0974              SSL, B44T47  COMMON +2     15            C,-1                SELECT LOCAL CUSSING PROCEDURE ON 1 - 4.

# Page 287
#      @YUL SYSTEM ASSEMBLER -- PASS 2                                           USER'S OWN PAGE NO.  23        PAGE  23

P09751  DISPOSITION OF EQUALS CARD LOCATION SYMBOL HEALTH STATES.

 0976   HEALTH 1   SWS, B38T48  CUSS LIST +9  16            Z,R5
 0978              TS, BIT17    ONES          CUSS LIST +9  SYM CUSS 4          NEARLY DEFINED BY EQUALS.

 0980   HEALTH 2   SWS, B38T48  CUSS LIST +10 16            Z,R5
 0982              TS, BIT17    ONES          CUSS LIST +10 SYM CUSS 4          MULTIPLY DEFINED INCLUDING NEARLY BY =.

 0984   HEALTH 3   TS           Z,SC          Z,X4          PRINT LIN
 0985              S, ETS       EQUALOC +1    ZX +2         PAG LOXIM           DEFINED BY EQUALS (NO CUSS).

 0987   HEALTH 4   SS           CUSS LIST +10 B38T48        Z,R5
 0988              TS, BIT33    ONES          CUSS LIST +10 SYM CUSS 4          MULTIPLY DEFINED INCLUDING BY EQUALS.



R0990   CONTINUATION OF PAG LOXIM.  COUNT NUMBER OF REFERENCES TO EACH SYMBOL AND KEEP A RECORD OF 1ST AND LAST PAGES.
R0991   IN 2ND AND 3RD WORDS OF PRINTLINE, GIVE SERIAL NO. OF REFERENCE AND PAGE OF LAST REFERENCE AS REF NNN LAST PPP.

 09915  REFRENCE   TX           L OLD LINE    -             Z,X3
 0992              NA, C7T8     2,0           ZERO          C,+3                BRANCH IF THIS IS NOT THE FIRST REF.
 0994              SWS,DECALFM1 EQUALOC +1    D,6,L         N,X2                RECORD PAGE NUMBER OF FIRST REFERENCE.
 0996              TS           -             -             REF SERNO -1

 0997   REF SUPP Q NA, BIT44    SWITCH        ONES          REF SERNO           BRANCH IF DOING A SUPPRESSED SUBROUTINE.
 0998              SWE,DECALFM1 N,X2          D,3,L         ARG 1
 1000              DA           ZERO          ARG 1         ARG 1               CONVERT HEX HUNDREDS DIGIT TO DECIMAL.
 1002              TS           W LAST        3,3           P2 D2A LZS     C
 1004              SWS, C5T8    ARG 1         A,2           3,3                 SET IN PRINT PAGE OF LAST REF IN ALPHA.
 1006              SWS, B ADRES EQUALOC +1    D,3,L         N,X2                RECORD PAGE NUMBER OF LATEST REFERENCE.

 1008   REF SERNO  TX           REF 1XXX      -             3,2                 TENTATIVELY, SET UP "REF >1K".
 1010              LA, C7T8     DEC 999       2,0           SEND CUSS           IF OVER 999 REFERENCES, LEAVE IT THERE.
 1012              DA, C7T8     2,0           ONE           2,0                 COUNT UP REFERENCES TO EACH SYMBOL.
 1014              SWE,DECALFM1 N,X2          D,6,L         ARG 1
 1016              TS, C5T8     W BAD WORD    ARG 1         P2 D2A LZS     C    MAKE BITS 25-28 = 1101 TO BECOME BLANK.
 1020              SWS, C5T8    ARG 1         A,1           3,2                 SET IN PRINT SERIAL NO. OF REF IN ALPHA.

 1024   SEND CUSS  TS           L CUSSER      Z,SC          SEND SYPT      C    RELEASE CARD FOR TAPE AND GO TO CUSS.

# Page 288
#      @YUL SYSTEM ASSEMBLER -- PASS 2                                           USER'S OWN PAGE NO.  24        PAGE  24

P1026              PROCEDURE IN PASS 2 FOR COUNT.  PRINTS ANALYZER FOR PRECEDING REACH OF SAME ROUTINE.



 10265  COUNT      TS           ZERO          EQUALOC       SETLOC +1      C    MAYBE CUSS NON-BLANK LOCATION FIELD.
 10275             SWS, BIT 33  HEALTH        24            CUSS LIST +2        MAYBE CUSS MEANINGLESS ADDRESS FIELD.
 10285             SWS, BIT 1   HEALTH        9,L           CUSS LIST +5        MAYBE CUSS NO ROOM FOR ROUTINE NAME.
 10295             TS           Z,SC          Z,X4          PRINT LIN
 1030              NA, BIT9     HEALTH        ZERO          COUNT XIT           BUG OUT IF NO GOOD ROUTINE NAME.
 1031              LA           CUSS LIST +5  BIT 1         DISPLAY

 10315             TS           Z,SC          Z,X4          ADR FIELD
 1032              TS           ADR WD        COMMON        SYM CUSS 2     C    PREPARE NO-ROOM CUSS FOR PRINTING.
 1033              TS           ZERO          L REF SYM     COUNT XIT           PRECEDING REACH CONTINUES THRU ABORTS.

 1034   DISPLAY    EBA          HEALTH        ZERO          Z,X2
 10345             EBA          Z,X2          BIT 25        COUNT PTR           CHANGE WORD-COUNTING ADDRESS.
 10355             TS           L OLD LINE    Z,X3          REF SUPP Q     C    CUT ANALYZER SHORT IN SUPPRESSED SUBRO.
 10365             TS           C,+1          PAG LOXIM +5  PAG LOXIM
 1037              TS           C,+1          PAG LOXIM +5  C,+2                LET MODIFIED PAG LOXIM DO "REF-LAST".
 1038              LA           EQUALOC       ZERO          PAG LOXIM +7
 10385             NA, C7T8     2,0           ZERO          C,+2                BRANCH IF NOT FIRST COUNT CARD OF RTNE.
 10395             LA           N,X2          ZERO          1ST COUNT           BRANCH IF NOT DEALING WITH UNCOUNTEDS.

 10405             SWE, D4T8    N,X2          0             ARG 1               COUNT OF WORDS IN LAST REACH OF ROUTINE.
 10415             SWS, B ADRES 2,1           D,6           N,X2                MOVE PAGE OF LAST COUNT CARD TO SAFETY.
 10425             DA, D2T12    2,1           ARG 1         2,1                 ADD LAST REACH TO TOTAL FOR ROUTINE.
 10435             TS, B2B6     ZERO          3,5           P2 D2A LZS     C    CHANGE BLANK TO COLON.
 10445             SWS, C2T8    ARG 1         A,1,L         3,5                 SET IN PRINT COUNT FOR LAST REACH.
 10455             SWE, D4T8    2,1           0             ARG 1
 1046              TS           W TO          3,4           P2 D2A LZS     C
 10465             SWE, ONES    ARG 1         A,3,L         3,6                 SET IN PRINT CURRENT WORD COUNT FOR RTN.
 10475             SWE,DECALFM1 N,X2          D,3           ARG 1
 1048              DA           ZERO          ARG 1         ARG 1               CONVERT 100'S DIG OF PAGE OF LAST WORD.
 1049              TS, CHAR6    ASTRISKS      3,6           P2 D2A LZS -1  C
 10495             SWS, C5T8    ARG 1         0             3,4                 SET IN PRINT PAGE NUMBER OF LAST WORD.
 10505             TS           C,+2          SEND CUSS     REF SUPP Q +1       SET IN PRINT REF-NNN-LAST-COUNT INFO.

 1051   1ST COUNT  TS           C,+1          SEND CUSS     REF SERNO -1        SET IN PRINT "REF   1".
 10515             TS           COUNT XIT     SEND CUSS     C,+1
 1052              SWS,D1T3     N,X2          D,6,L         2,1
 10525             EX           N,X2          C7T8          N,X2                CLEAN OUT WORD COUNT AND PAGE OF WORD.
 10535  COUNT XIT  TS           L CUSSER      Z,SC          SEND SYPT      C

# Page 289
#      @YUL SYSTEM ASSEMBLER -- PASS 2                                           USER'S OWN PAGE NO.  25        PAGE  25

P1054              PROCEDURE IN PASS 2 FOR ERASE.



 1055   ERASE      SWS, BIT 17  HEALTH        8             CUSS LIST           MAYBE CUSS  D  ERROR.
 1057              SWS, BIT 17  HEALTH        7             CUSS LIST +4        MAYBE CUSS PREDEFINITION FAILURE.
 1059              SWS, BIT 33  HEALTH        22            CUSS LIST +2        MAYBE CUSS MEANINGLESS ADDRESS FIELD.
 1061              SWS, BIT 17  HEALTH        5             CUSS LIST +3        MAYBE CUSS ADDRESS SIZE ERROR.
 1063              SWS, BIT 33  HEALTH        20            CUSS LIST +1        MAYBE CUSS TYPE ERROR.
 1065              NA, BIT8     HEALTH        ZERO          C,+2                BRANCH IF LOCATION IS SYMBOLIC.
 1067              TS           ZERO          EQUALOC       C,+3                PROCLAIM ABSENCE OF LOCATION SYMBOL.

 10681             SWS, BIT 33  HEALTH        17            CUSS LIST +4        MAYBE CUSS LOC SYM NO FIT IN TABLE.
 1069              TS           Z,SC          Z,X6          LOC SYM 1           ANALYZE AND PRE-PROCESS LOCATION SYMBOL.
 1079              NA, BIT 15   HEALTH        ZERO          ERA LEFTO           BRANCH IF ERASE IS LEFTOVER.
 1081              SWS, BIT 17  HEALTH        3             CUSS LIST +1        MAYBE CUSS LOCATION CONFLICT.
 1083              NA, BIT8     HEALTH        ZERO          C,+3
 1084              SWS, BIT 17  HEALTH        1             CUSS LIST +17       MAYBE CUSS UNSIGNED NUMERIC LOC.
 1086              NA, BIT17    CUSS LIST +17 ZERO          NO ERALOC
 10862             LA, B11T12   HEALTH        ZERO          PRIN ERAS           BRANCH IF LOCATION VALUE IS OK.
 10864             TS           ONES          LOCATION      PRIN ERAS +1

 1087   ERA LEFTO  NA, BIT8     HEALTH        ZERO          C,+2                BRANCH IF THERE IS A LOCATION SYMBOL.
 1089              TS, BIT17    ONES          CUSS LIST +15 C,+2                CUSS NON-SYMBOLIC LOCATION.

 1091              LA           BIT 1         EQUALOC +1    C,+2                BRANCH IF LEFTOVER IS NOW DEFINED.
 1093   NO ERALOC  TS           ONES          LOCATION      PRIN ERAS +1        SHOW THAT THERE IS NO LOCATION VALUE.

 1095              SWS, CAC2    COMMON +2     16,L          HEALTH              USE LOCATION VALUE FOUND BY PASS 1.5 TO
 1097              WA, CAC3     HEALTH        COMMON +2     HEALTH              FORM UPPER AND LOWER ERASE ADDRESSES.

 1103   PRIN ERAS  SWE, CAC3    HEALTH        16            LOCATION
 1104              SWE, CAC3    M PLOC EB     16            Z,CSC          C    PRINT OR BLOT FIRST LOCATION.
 11052             LA           ONES          LOCATION      C,+2                BRANCH IF THERE IS NO LOCATION VALUE.
 1106              EX           HEALTH        CAC3          LOCATION
 1107              TX           M PLOC IS     -             Z,CSC          C    PRINT OR BLOT SECOND LOCATION.
 1109              LA           EQUALOC       ZERO          NO LOC SYM          QUICK EXIT IF NO SYMBOL.

 1111              TS           -             -             HEALTH CQ           CALL FOR LOCATION SYMBOL CUSSING.

# Page 290
#      @YUL SYSTEM ASSEMBLER -- PASS 2                                           USER'S OWN PAGE NO.  26        PAGE  26

P11122             PROCEDURE IN PASS 2 FOR EVEN CARDS.

 11123  EVEN       TS           ZERO          EQUALOC       SETLOC +1      C    MAYBE CUSS NON-BLANK LOCATION FIELD.
 11124             SWS, BIT1    HEALTH        13,L          CUSS LIST +2   C    CUSS OVERSIZE LOC, WRONG MEMORY TYPE.
 11126             SWS, BIT1    HEALTH        12,L          CUSS LIST +21       MAYBE CUSS NON-BLANK ADDRESS FIELD.
 111272            NA, BIT 33   CUSS LIST +1  ZERO          C,+2                MAYBE CUSS LOCATION IN WRONG MEM TYPE.
 11128             NA, BIT14    HEALTH        ONES          FORM LOCN           BRANCH IF LOCATION SIZE IS OK.
 11129             TS           ONES          LOCATION      FORM LOCN -1        SHOW LACK OF LOCATION VALUE.



R1113              PROCEDURE IN PASS 2 FOR BLOCK CARDS.

 1114   BLOCK      TS           ONES          LOCATION      SETLOC         C    MAYBE CUSS "D" ERROR.
 1116              SWS, BIT33   HEALTH        19            CUSS LIST +9        MAYBE CUSS ADDR RELATIVE TO BAD LOC.
 1118              SWS, BIT 33  HEALTH        21            CUSS LIST +2        MAYBE CUSS MEANINGLESS ADDRESS FIELD.
 1122              SWS, BIT 1   HEALTH        9,L           CUSS LIST +18       MAYBE CUSS FULLNESS OF BLOCK.
 1124              SWS, BIT 33  HEALTH        22            CUSS LIST +17       MAYBE CUSS NO SUCH BLOCK.
 11252             SWS, BIT 33  HEALTH        20            CUSS LIST +1        MAYBE CUSS MEMORY TYPE ERROR.
 11254             SWS, BIT 17  HEALTH        9             CUSS LIST +14       MAYBE CUSS NONBLANK LOCATION.
 1126              NA, B11T12   HEALTH        ZERO          FORM LOCN +1        BRANCH IF NO LOCATION VALUE.
 11262             NA, BIT 33   CUSS LIST +1  ZERO          FORM LOCN +1        MAYBE CUSS LOCATION IN WRONG MEM TYPE.
 11264             NA, BIT33    CUSS LIST +9  ZERO          FORM LOCN +1
 1127              SSL, ONE     HEALTH        38            FORM LOCN           TEST FULLNESS OF BLOCK.



R1128              PROCEDURE IN PASS 2 FOR MEMORY CARDS.

 1130   MEMORY     TS           ONES          LOCATION      SETLOC         C    MAYBE CUSS  D  ERROR.
 1132              SWS, BIT 17  HEALTH        9             CUSS LIST +18       MAYBE CUSS ILLEGAL LOCATION FORMAT.
 1134              SWS, BIT 33  HEALTH        22            CUSS LIST +2        MAYBE CUSS MEANINGLESS ADDRESS FIELD.
 1136              SWS, BIT 17  HEALTH        5             CUSS LIST +3        MAYBE CUSS ADDRESS SIZE ERROR.
 1138              SWS, BIT 1   HEALTH        12,L          CUSS LIST +19       MAYBE CUSS OVERSIZE MEMORY TYPE TABLE.
 11392             NA, BIT8     HEALTH        ZERO          BAD MEMRY           BRANCH IF ILLEGAL LOC FIELD FORMAT.
 11394             NA, B11T12   HEALTH        ZERO          BAD MEMRY           BRANCH IF ADDRESS FIELD UNUSABLE.
 11396             SSL, ONE     HEALTH        35            C,+1                "BRANCH" IF MEMORY TABLE OVERFLOWED.
 1140              SWE, CAC3    HEALTH        16            LOCATION
 1141   BAD MEMRY  SWE, CAC3    M PLOC EB     16            Z,CSC          C    SET FIRST LOCATION IN PRINT.
 1143              SSL, ONE     LOCATION      16            FORM LOCN           TEST FOR A SECOND LOCATION TO PRINT.



R11441             PROCEDURE IN PASS 2 FOR SEGNUM CARDS.

 11442  SEGNUM     SWE, D4T8    HEALTH        D,4,L         ARG 1
 11444             TS           W REV         LINE +5       P2 D2A LZS     C    SET "REVNNN" IN PRINT.
 11446             TS, CAC3     ARG 1         LINE +5       MEMORY +1      C    MAYBE CUSS BAD LOCATION FIELD CONTENTS.
 11448             TS           ZERO          EQUALOC       NO LOC SYM

# Page 291
#      @YUL SYSTEM ASSEMBLER -- PASS 2                                           USER'S OWN PAGE NO.  27        PAGE  27

P1145              PROCEDURE IN PASS 2 FOR SUBRO CARDS.

 1146   SUBRO      TS           L DIRECTY     Z,X6          MAYBE CUS      C    MAYBE CUSS OVERSIZE/ILL-DEFINED LOC.
 1147              SWS, BIT 17  HEALTH        8             CUSS LIST      C    MAY CUSS "D" ERROR, LOC IN WRONG MEMTYP.
 1148              SWS, BIT 33  HEALTH        14            CUSS LIST +31  C    MAY CUSS HEAD DEF OR LOC USE CONFLICTS.
 1149              SWS, BIT 1   HEALTH        10,L          CUSS LIST +31  C    MAY CUSS NO SUCH SUB, LOC PREDEF FAIL.
 1150              SWS, BIT 33  HEALTH        21            CUSS LIST +2        MAYBE CUSS MEANINGLESS ADDRESS FIELD.
 11505             SWS, BIT33   HEALTH        16            CUSS LIST +4        MAYBE CUSS LOC SYM NO FIT IN TABLE.
 1151              SWS, B38T48  HEALTH        16            Z,X6                POINT TO SUBRO'S PLACE IN TAPE DIRECTRY.
 1152              TS           N,X6          COMMON        FORM LOCN      C    FETCH & SET IN PRINT THE LOCATION VALUE.
 11522             SSL, ONE     HEALTH        34            C,+1                "BRANCH" IF BAD LOCATION VALUE.
 11524             LA, B11T12   HEALTH        ZERO          C,+2                BRANCH UNLESS NO SUCH SUB OR BAD ADRFLD.
 11526             TX           ONES          -             LOCATION
 1153              SWS, BIT 17  HEALTH        4             CUSS LIST +31  C    MAYBE CUSS MULTIPLE CALLS IN A PROG/SUB.
 1154              TS           Z,X6          COMMON +3     FORM LOCN +2   C    PRINT LINE WITH LOCATION VALUE.
 11546             NA, CHAR1    CARD          REF 1XXX      C,+2                BRANCH UNLESS SUBS FROZEN THIS ASSEMBLY.
 11548             TS, BIT1     ZERO          CUSS LIST +20 END SUBRO           OTHERWISE UNDO QUEER-COL-1 CUSS, EXIT.
 1155              LA           Z,X6          L DIRECTY     END SUBRO -2        BRANCH IF PASS 1 FAILED TO FIND A SUBRO.

 1156              SSL, ONE     HEALTH        30            END SUBRO +1   C    DID THE SUBRO NAME FIT IN SYMBOL TABLE?
 1157              S, ETS       6,0           ZX +6         C,+2                POINT TO FIRST SUBRO IN AD HOC DIRECTRY.

 1158              S, ETS       6,1           ZX +6         C,+1
 1159              NA, CAC3     6,0           COMMON +3     C,-1                FIND SUBRO ENTRY IN AD HOC DIR.

 1161              LA           BIT 16        N,X6          END SUBRO -2        BRANCH IF SUBRO CALL PAGE ALREADY DONE.
 1162   PAG SUBRO  SWE, ONES    SWITCH        45            NO LOC SYM          MAY COMPENSATE FOR OWED PAGE HEADS.
 11622             DA           NO LOC SYM    PAGE NO       NO LOC SYM
 11623             SWE, ONES    CAC3          16            AV MSK
 11624             SWS, AV MSK  NO LOC SYM    D,8,L         N,X6                RECORD PAGE NUMBER OF FIRST CALL TO SUB.
 116252            NA, BIT8     HEALTH        ONES          END SUBRO           BRANCH IF THERE IS NO LOCATION SYMBOL.
 11626             TS           Z,SC          Z,X6          LOC SYM 1           ANALYZE AND PRE-PROCESS LOCATION SYMBOL.
 1163   END SUBRO  TS           NO WORD -1    NO LOC SYM    NO WORD             PROCESS LOCATION SYMBOL AND EXIT.

 1164              SWE, CAC3    L PASS 2      16            Z,X6           S    POINT TO AD HOC DIR. IF SUB IS THERE.
 1165              TS           Z,CSC         Z,X6          SYMB FITS -2        CUSS FULLNESS OF SYMTAB (NO SUBNAME).
 1166   TS VDA VDB TS           -             -             PAG SUBRO

# Page 292
#      @YUL SYSTEM ASSEMBLER -- PASS 2                                           USER'S OWN PAGE NO.  28        PAGE  28

P1169              PROCEDURE IN PASS 2 FOR REMARKS CARDS.  POSTPONES CUSSING TO CHECK FOR A RIGHT PRINT CARD.

 11692  REMARKS    TN           LINE +7       9             LINE +2             MOVE REMARK 5 WORDS LEFT.
 11694             MT           BLANKS        5             N,AU2,1             FILL OUT LINE WITH BLANKS.
 11696             TS, LAST REM ONES          SWITCH        NO LOC SYM     C    SIGNAL THAT LAST WAS REMARKS, PRINT.
 11698             TS           L PASS 2      Z,SC          SEND SYPT      C



R11701             SEQUENCE-MODE SUBROUTINES IN PASS 2 TO CUSS QUEER INFORMATION IN COLUMNS 1, 17, AND 24.

 11703  QUEER C1   SM           CUSS LIST +20 BIT 1         CUSS LIST +20
 11704             TX           Z,SH          -             Z,SC

 11705  QUEER C17  SM           CUSS LIST +20 BIT 17        CUSS LIST +20
 11706             TX           Z,SH          -             Z,SC

 11707  QUEER C24  SM           CUSS LIST +20 BIT 33        CUSS LIST +20
 11708             TX           Z,SH          -             Z,SC



R1171              PROCEDURES IN PASS 2 FOR ALL THEM FUSSY LITTLE JOBS.

 1172   ILLEGOP    TS, BIT33    ONES          CUSS LIST     DECIMAL        C    CUSS ILLEGAL OR MIS-SPELLED OP CODE.
 11732             TS           W BAD WORD    NUMBER        L FINI 1P +1

 11734  HEAD TAIL  TS, CHAR8    HEALTH        HEAD          ZEQUALOC            SET UP HEAD AND JOIN PROC WORD.

 1174   ACCEPT     NA, C2T8     HEALTH        ZERO          CARD NO +2          BRANCH ON SINFUL ACCEPTOR CARD.
 1175              TS, CHAR8    COMERC AT     MARKER        PASS 2              NORMALLY CHANGE MARKER, GET NEXT CARD.

 1176   DELETE     SWS, BIT33   HEALTH        21            CUSS LIST +19       MAYBE CUSS TOO-SMALL SECOND CARD NUMBER.
 1177              SWS, BIT1    HEALTH        10,L          CUSS LIST +23       MAYBE CUSS NO MATCH ON 2ND CARD NUMBER.

 1178   CARD NO    SWS, BIT 17  HEALTH        9             CUSS LIST +18       MAYBE CUSS BAD LOCATION FIELD FORMAT.
 1179              SWS, BIT33   HEALTH        24            CUSS LIST +2        MAYBE CUSS MEANINGLESS ADDRESS FIELD.
 1180              SWS, BIT17   HEALTH        7             CUSS LIST +19       MAYBE CUSS NO MATCH ON CARD NUMBER.

 1181   MODIFY     TN           LINE +7       9             LINE +2             PRINT MERGE CONTROL LINES AT LEFT.
 1182              MT           BLANKS        5             N,AU2,1
 1183              TS           CUSSER        Z,X4          PRINT LIN           PRINT BUT DO NOT KEEP SUCH CARDS.

 1185   TOO LATE   TS, BIT 33   ONES          CUSS LIST +18 ZEQUALOC            CUSS TOO-LATE MEMORY CODE.

# Page 293
#      @YUL SYSTEM ASSEMBLER -- PASS 2                                           USER'S OWN PAGE NO.  29        PAGE  29

P119101            PROCEDURE IN PASS 2 FOR "END OF" CARDS.

 119106 END OF     NA, CHAR1    CARD +1       BLANKS        END OF REV          BRANCH IF NOT FOR NEW AND MAIN PROGRAM.
 119108            TN           CARD +1       6             LINE +2             MOVE ALL INFORMATION BUT DATE.
 11911             SS           W REVN 0      C1T7          CARD +1             CHANGE "NEW" TO "REVISION 0 OF".
 11912             SS           W END NEW +1  C1T2          LINE +2
 11913             MT           BLANKS        8             N,AU2,1             LINE HAD BEEN SET UP IN INSTR. FORMAT.
 11914             TS           W END NEW     LINE +1       SP3 BEFOR           FINISH INCLUDING "END OF".

 11915  END OF REV TN           W END REV     2             LINE +1             INCLUDE "END OF" FOR REVISIONS.
 11916             TN           CARD +1       6             LINE +3             MOVE ALL INFORMATION BUT DATE.
 11917             MT           BLANKS        7             N,AU2,1
 11918  SP3 BEFOR  TX           L OLD LINE    -             Z,AU1
 11919             WA           BIT 12        USER LOG      N,AU1               FORCE SPACE 3 AFTER PRECEDING LINE.

R1192   ON FIRST "END OF" CARD, SEND SYPT, CLOSE OUT LAST SYPT BUFFER, ALLOW RD3 TO DELIVER SYLT RECORDS, PRINT "END OF"
R1193   LINE (WITH DATE IF REPRINT).  SUBSEQUENTLY, JUST PRINT LINE WITH DATE.
R1194   WATCH OUT FOR TRICKY BISEQUENCE AND INCREMENTING ACTION.

 1195              TS           C,+3          C,+0          SEND SYPT      C    SEND SYPT OF MAIN "END OF" CARD ONLY.
 1196              LA           Z,X4          END SYBUF     CLOS SYPT           CLOSE OUT LAST SYPT BUFFER.
 1197              SM           TS VDA VDB    SPEC MAG      SEND SYPT           DESTROY SEND SYPT.
 1198              TS           Z,SC,3        CONTINUE      MON WAKE       C    WATCH THAT INCREMENT.....
 1199              TN           W LAST ASS    2             LINE +11
 1200              TN           CARD +7       2             LINE +13
 1201              TS, CHAR1    W REVN 0      LINE +13      C,+2                INCLUDE DATE LAST ASSEMBLED.
 1203              LA           BIT 1         SWITCH        C,-3                BRANCH IF MAIN "END OF" IN REPRINT.
 1204              TS, ONE      ZERO          SWITCH        NO LOC SYM     C    CLEAR ANY WHAM CALL.
 1205              NA, BIT 3    SWITCH        ONES          C,+3                BRANCH UNLESS PAGE HEADS ARE OWED.
 12052             TS           C,+1          PRINT OLD     PAGE UNIT -1        PRINT PAGE HEADS ONLY AND RESTORE
 12054             TS           PRINT HED     PRINT OLD     C,+1                PRINTING ROUTINE.
 1206              EBA          L NEXT SUB    BIT 25        Z,X4                POINT TO AD HOC ENTRY OF NEXT SUBRO.
 12062             LA           ONES          N,X4          SUB SUPP Q          BRANCH IF THERE ARE NO MORE SUBROUTINES.
 12064             DA           PAGE NO       ONE           COMMON
 12065             SWE, ONES    CAC3          16            AV MSK
 12066             SWS, AV MSK  COMMON        D,8,L         4,1                 PLANT STARTING PAGE NUMBER FOR SUBRO.
 12068             NA, CHAR1    PAGE HEAD +14 BLOT C1       C,+2                BRANCH UNLESS REJECT OR OBSOLETE REPRIN.
 1207              TS           C,+0          C,-1          SUB SUPP Q -2
 12072             TX           N,X4          -             Z,AU1
 12074             SWS, CHAR8   N,AU1         A,1,L         PAGE HEAD +13
 12078             SWS, C1T7    N,AU1,1       A,1,L         PAGE HEAD +14       PUT SUBRO NAME IN PAGE HEAD IF POSSIBLE.
 120792            SWE,DECALFM1 N,AU1         0             ARG 1
 120794            TS           W REV         USERLOG +14   P2 D2A LZS -1  C
 120796            SWS, CAC3    ARG 1         0             USERLOG +14         PRINT SUBROUTINE REV NO. IN SUBHEAD.
 1208              SWE, CHAR8   N,X4          A,3           HEAD                ESTABLISH HEAD THAT WAS GIVEN IN ADRFLD.
 12082             EX           4,1           CAC 3         L NEXT SUB
 12084  SUB SUPP Q NA, BIT 14   SWITCH        ONES          UNLOG               BRANCH UNLESS INACTIVE SUBS SUPPRESSED.

 12086             SWS, BIT 44  N,X4          13            SWITCH
 12092             NA, BIT44    SWITCH        ZERO          UNLOG               BRANCH IF COMING SUBROUTINE IS ACTIVE.
 12093             TS, BIT3     ONES          SWITCH        PRINT LIN      C    OWE HEADS AND POINT TO OLD LINE WITH X3.
 12094             NA           N COPIES      ZERO          COPY PRIN           BRANCH IF MORE COPIES MUST BE MADE.
 12095             S, PHI PRINT 3,0                                             PRINT "END OF" LINE NOW IF NEXT IS SUPP.
 12096  UNLOG      TX           ZERO          -             USER PAGE           LEAVE LOG-CARD MODE.
 12098             TS, C5T8     BLANKS        USERLOG +15   PASS 2              CLEAR SOME SPECIAL FLAGS IN LOG LINE.

# Page 294
#      @YUL SYSTEM ASSEMBLER -- PASS 2                                           USER'S OWN PAGE NO.  30        PAGE  30

P1210              SUBROUTINE IN PASS 2 TO TRANSMIT SYPT OR SYLT RECORDS TO WR1 FOR WRITING ON TAPE 1.  WITH 10 WORDS
R1212   STARTING IN ..CARD.., ENTER BY COSEQUENCE CALL.  GRABS A BUFFER NO SOONER THAN IT NEEDS IT, AND PUTS IT INTO
R1214   SYPT STATUS AS SOON AS IT IS FULL.  IN A PROGRAM ASSEMBLY, MERJ WAIT IS INITIALLY SET TO ZERO (PROCEED), BUT IN
R1216   A SUBROUTINE ASSEMBLY IT IS SET TO ZERO AS SOON AS THE FIRST SYLT RECORD MAY BE TRANSMITTED.



 1218   SEND SYPT  TS           N,CSC,1       SEND SYPT     GRAB FREE      C    INITIAL, OR BUFFER-SEEKING, MODE.

 1222              TS           SYB PLACE     Z,X4          MOVE SYPT +2   C

 1223              TX           Z,AU1,3       -             SYPT BUFF      C
 1224              MT           Z,AU1,31      9             END SYBUF      C    COMPUTE BOTH ENDS OF SYPT BUFFER.
 1233              TX           SYPT BUFF     -             Z,X4           C
 1234              TX           COMPUTER      -             N,X4,1         C    PUT COMPUTER NAME IN BANNER WORD.
 1236              TX           PROG NAME     -             N,X4,1         C
 12362             SWE, C1T4    Z,R6,1        15            N,X4           C    SEQUENCE NUMBER OF RECD IN PROGRAM.
 1237   MOVE SYPT  WD           L END CARD    TEN           Z,AU1          C    SET AU1 TO BEGINNING OF CARD.
 12372             TS           Z,X4,1        Z,SH          SQUEEZER       C    SAVE ADDRESS OF CODE WORD.

 123725            TS           ZERO          N,X4          MOVE SYPT      C

 12373             TS           N,AU1,1       N,X4,1        SQUEEZER +2    C    MOVE NON-BLANK WORD TO CONDENSED IMAGES.
 12374  SQUEEZER   NA           N,AU1         BLANKS        C,-1           C
 12375             SWS, BIT38   Z,AU1,1       5             N,SH           C    STORE INDICATOR BIT AND ADVANCE AU1.
 12376             SWS, C5T8    N,SH          1             N,SH           C
 12377             NA           Z,AU1         L END CARD    SQUEEZER       C
 1238              LA           Z,X4          END SYBUF     SYPT EXIT      C    BRANCH IF THERE IS ROOM FOR MORE IN BUF.

 1240              TS           SYPT BUFF     Z,AU2         MERJ WAIT      C
 1241              TS           Z,SC          Z,AU1         CSC SLEEP      S
 1242   MERJ WAIT  NA           MAY MERGE     ZERO          C,-1           C    GO TO SLEEP IF MUSTNT SEND 1ST SYLT YET.
 1244              CC           N,AU2         -             N,X4           C    TENTATIVE ORTHO UNTIL BANNER INSERTION.
 1246              TX           SYPT BUFF     -             Z,AU2          C
 1247              TS           C,+1          SEND SYPT     LIST SYPT      C    SET UP BUFFER-SEEKING MODE OF SUBROUTINE
 12472             TS           N,CSC,1       SEND SYPT     GRAB FREE      C

 12474  SYPT EXIT  TX           Z,X4          -             SYB PLACE      S    MARK PLACE IN BUFFER AND EXIT.

 124752 CLOS SYPT  TS           Z,SH          Z,SC          MERJ WAIT -2   C



R12476  GENERAL MULTIPROGRAMMABLE SUBROUTINE IN PASS 2 TO PUT INTO SYPT STATUS THE BUFFER WHOSE NAME IS SUPPLIED IN AU2.

 1248              LA           N,R4          ZERO          LIST SYPT +1   C    BRANCH IF THERE IS ROOM IN SYPT LIST.
 1249              TS           Z,SC          Z,AU1         CSC SLEEP      S    OTHERWISE SLEEP UNTIL THERE IS.
 1250   LIST SYPT  TS           SYPT NTRY     Z,R4          C,-2           C    * * * ENTER SUBROUTINE HERE. * * *
 1251              TS           Z,AU2         N,R4,1        -              C    PUT BUFFER INTO SYPT STATUS.
 1252              SM           Z,R4          BIT 46        SYPT NTRY      C    MODULATE SYPT LIST ENTRY POINTER.
 1254              TS           Z,SC          Z,CSC         MON WAKE       C    WAKE ANY SLEEPERS AND EXIT.

# Page 295
#      @YUL SYSTEM ASSEMBLER -- PASS 2                                           USER'S OWN PAGE NO.  31        PAGE  31

P1260              SUBROUTINE IN PASS 2 TO PROCESS THE ADDRESS FIELD OF INSTRUCTIONS OR CLERICAL CODES WITH SIMILAR
R1262   ADDRESS FORMAT.  ENTER WITH RETURN ADDRESS IN X6.  THE ADDRESS VALUE IS DELIVERED AS AN UNSIGNED INTEGER IN
R1264   ADDRESS, OR A WORD OF ONES IS DELIVERED THERE IF THE ADDRESS VALUE CANNOT BE DETERMINED.  SOME ADDRESS CUSSING
R1266   IS DONE, ADDRESS SYMBOL TRANSFORMATIONS ARE DONE, AND ALL ADDRESS SYMBOL CUSSING IS DONE.



 1268   PROC ADR   TS           Z,SC          Z,X4          ADR FIELD           FORM SUBFIELDS FROM ADDRESS FIELD.
 1270              NA           FIELD COD     ONES          C,+2
 1271              TS, BIT33    ONES          CUSS LIST +2  NO ADRESS           CUSS AND EXIT ON MEANINGLESS FIELD.

 1273              NA           FIELD COD     ZERO          C,+2
 1274              TS           ZERO          ADR WD +1     REL ADRES           FAKE ZERO MODIFIER WHEN FIELD IS BLANK.

 1276              NA, B2B6     FIELD COD     BIT 2         NON REL AD          BR IF MAIN PART IS NOT SIGNED NUMERIC.
 12771             LA, BIT 2    ONES          SWITCH        REL ADRES +3        BRANCH IF RELATIVE TO LEFTOVER LOCATION.
 1278              LA           FIELD COD +1  ZERO          C,+2
 1279              BA           ADR WD        ADR WD +1     ADR WD              ADD TWO SIGNED NUMERIC PARTS.
 1281              TX           ADR WD        -             ADR WD +1           MODIFIER RELATIVE TO CURRENT LOCATION.

 1283   REL ADRES  SM           LOCATION      BIT 1         ADR WD
 1286              NA           ADR WD        ONES          MINAD CHK -1
 1287              TS, BIT 33   ONES          CUSS LIST +9  NO ADRESS           CUSS AND EXIT WHEN LOCATION IS BAD.

 1289   NON REL AD LA           BIT 1         FIELD COD     SYMBOL AD           BRANCH IF MAIN PART IS SYMBOLIC.
 1291              LA           FIELD COD +1  ZERO          C,+2
 1292              BA           ADR WD        ADR WD +1     ADR WD              ADD MODIFIER TO MAIN PART.

 1294   MINAD CHK  LN           MIN ADRES     ADR WD        C,+2                BRANCH IF VALUE NOT TOO NEGATIVE.
 1296              TS, BIT 17   ONES          CUSS LIST +3  NO ADRESS           CUSS AND EXIT WHEN ADDRESS VALUE FAULTY.

 1298              LA, C2T8     BIT 32        ADR WD        C,-1                BRANCH IF VALUE IS MORE THAN CAC3.
 1300              EX           ADR WD        CAC3          ADDRESS
 1301              TX           Z,X6          -             Z,SC                NORMAL EXIT.

 1303   SYMBOL AD  TS           ADR WD        COMMON        ANAL SYMB      C    ANALYZE HISTORY OF SYMBOL.
 1305              NA           COMMON +2     ONES          SYMB FITS
 1306              SWS, B38T48  CUSS LIST +5  32            Z,R5
 1307              TS, BIT1     ONES          CUSS LIST +5  SYM CUSS 1          CUSS AND EXIT WHEN NEW SYMBOL DONT FIT.

 13082  SYMB FITS  EBA          Z,X2          ZERO          L REF SYM           SAVE ADDRESS OF SYMBOL REFERRED TO.
 1309              LA           CD8           COMMON +2     C,+2                BRANCH IF HEALTH OF SYMBOL IS C OR MORE.
 1311              SSL, B44T47  COMMON +2     15            STATE 0             CHOOSE CUSS FOR SYMBOL HEALTHS 0 TO 8.

 1313              SS           CUSS LIST +7  B38T48        Z,R5
 1314              TS, BIT33    ONES          CUSS LIST +7  SYM CUSS 2     C    MULTIPLE DEFINITION CUSS.
 1316              SSL, B44T47  COMMON +2     15            STATES 8C -22       CHOOSE CUSS FOR SYMBOL HEALTHS C TO G.

# Page 296
#      @YUL SYSTEM ASSEMBLER -- PASS 2                                           USER'S OWN PAGE NO.  32        PAGE  32

P1318   DISPOSITIONS OF VARIOUS STATES OF ADDRESS SYMBOL.

 1319   STATE 0    SWS, B38T48  CUSS LIST +3  32            Z,R5
 1320              TS, BIT1     ONES          CUSS LIST +3  SYM CUSS 1          UNDEFINED.

 1322   STATE 1    SS           CUSS LIST +15 B38T48        Z,R5
 1323              TS, BIT33    ONES          CUSS LIST +15 SYM CUSS 1          NEARLY DEFINED BY EQUALS.

 1325   STATE 2    SWS, B38T48  CUSS LIST +16 32            Z,R5
 1326              TS, BIT1     ONES          CUSS LIST +16 SYM CUSS 1          MULTIPLY DEFINED INCLUDING NEARLY BY =.

 1328   STATE 3    TS           -             -             SYMB MOD Q          DEFINED BY EQUALS (NO CUSS).
 1330   L REF SYM  OCT          0

 1331   STATE 4    SS           CUSS LIST +16 B38T48        Z,R5
 1332              TS, BIT33    ONES          CUSS LIST +16 SYM CUSS 3          MULTIPLY DEFINED INCLUDING BY EQUALS.

 1334   STATE 5    SWS, B38T48  CUSS LIST +16 16            Z,R5
 1335              TS, BIT 17   ONES          CUSS LIST +16 SYM CUSS 1          FAILED LEFTOVER.

 1337   SYMB MOD Q TX           BIT 1         -             ADR WD              SET UP VALUE OF ADDRESS SYMBOL AS A
 1339              TS, CAC3     COMMON +2     ADR WD        NON REL AD +1       FULL-WORD SIGNED INTEGER, CHEK MODIFIER.

 1374   STATE 7    SS           CUSS LIST +7  B38T48        Z,R5
 1375              TS, BIT33    ONES          CUSS LIST +7  SYM CUSS 3          MULTIPLY DEFINED.

 1377   STATES 8C  SWS, B38T48  CUSS LIST +7  32            Z,R5
 1378              TS, BIT 1    ONES          CUSS LIST +7  SYM CUSS 1          OVERSIZE DEFINITION.

 1380   STATES 9D  SS           CUSS LIST +5  B38T48        Z,R5
 1381              TS, BIT33    ONES          CUSS LIST +5  SYM CUSS 3          WRONG MEMORY TYPE.

 1383   STATES BE  SWS, B38T48  CUSS LIST +6  16            Z,R5
 1384              TS, BIT17    ONES          CUSS LIST +6  SYM CUSS 3          CONFLICT.

 1386   STATE F    SWS, B38T48  CUSS LIST +8  16            Z,R5
 1387              TS, BIT 17   ONES          CUSS LIST +8  STATE G +2          MULTIPLE ERRORS.

 1389   STATE G    SWS, B38T48  CUSS LIST +9  32            Z,R5
 13891             SS           ONES          BIT 1         CUSS LIST +9        MISCELLANEOUS TROUBLE.
 1391              SS           ZERO          BIT 33        CUSS LIST +7        NO MULTIPLE DEFINITION CUSS FOR F AND G.

 1392   SYM CUSS 1 SWS, C2T8    COMMON        6             N,R5,1              PUT SYMBOL IN QUOTES.
 1394              SWS, CHAR1   COMMON        6             N,R5
 1395   NO ADRESS  TS           ONES          ADDRESS       N,X6                COMMON FAILURE EXIT.

 1397   SYM CUSS 3 SWS, C2T8    COMMON        6             N,R5,1              FINAL CUSS FOR DEFINED ADDRESS.
 1399              SWS, CHAR1   COMMON        6             N,R5
 1400              TS           -             -             SYMB MOD Q

 1401   SYMB MOD A TX           BIT 1         -             ADR WD              CONSTANT TO BE RESTORED IN SYMB MOD Q.

 1403   SYM CUSS 2 SWS, C2T8    COMMON        6             N,R5,1         C    CLOSED PROFANITY SUBROUTINE.
 1405              SWS, CHAR1   COMMON        6             N,R5           S

# Page 297
#      @YUL SYSTEM ASSEMBLER -- PASS 2                                           USER'S OWN PAGE NO.  33        PAGE  33

P1407              SUBROUTINE TO BREAK AN ADDRESS FIELD DOWN INTO SUBFIELDS.  PUT RETURN ADDRESS INTO X4 ON ENTERING.
R1409   RESULTS ARE DELIVERED IN FIELDCOD AND FIELDCOD+1, AND IN ADRWD AND ADRWD+1, AS FOLLOWS....

R1411   FIELDCOD ALL ZERO                     BLANK ADDRESS FIELD
R1412   FIELDCOD ALL ONES                     ILLEGAL FORMAT
R1413   FIELDCOD+1 ALL ZERO                   NO MODIFIER
R1414   FIELDCOD+1 INDICATES SIGNED NUM       MODIFIER GIVEN IN ADRWD+1
R1415   FIELDCOD INDICATES SYMBOLIC           ADDRESS SYMBOL IN ADRWD
R1416   FIELDCOD INDICATES S OR US NUM        VALUE GIVEN IN ADRWD.

R1417   USES ANALSUBF, S3, X3, AND X5.



 1418   ADR FIELD  NA           ADDRESS 1     BLANKS        TEST WD2
 1419              NA           ADDRESS 2     BLANKS        MOV ADRES
 1420              TS           ZERO          FIELD COD     N,X4                INDICATE BLANK ADDRESS FIELD AND EXIT.

 1422   TEST WD2   NA           ADDRESS 2     BLANKS        MOV ADRES           BRANCH IF BOTH WORDS NON-BLANK.
 1424              TX           ADDRESS 1     -             AFIELD +1
 1425              TS           BLANKS        AFIELD        MOV ADRES +1        SHORT CUT WHEN WORD 2 IS BLANK.

 1427   MOV ADRES  TN           ADDRESS 1     2             AFIELD

 1428              SWE, ONES    C,+3          16            Z,X3                INITIAL PROCEDURE FOR NON-NUM ADDRESS.
 1430              TX           ZERO          -             FIELD COD +1        INITIALLY ASSUME NO MODIFIER.
 1432              TS           C,+1          Z,X5          LD A2 S3

 1433              CAC                        NO MODIF      FOUND RNB           SET UP TO LOOK FOR SIGNS INITIALLY.

 1435   LD A2 S3   TX           EIGHT         -             Z,S3                MAXIMUM NUMBER OF NBCS IN A SUBFIELD.
 1437              TS           BLANKS        AFIELD +2     FIND NBCS



R1438   MINOR SUBROUTINES TO SHIFT TWO OR THREE WORDS RIGHT BY ONE CHARACTER.

 1439   3SRT 1C    SWS, ONES    AFIELD +2     A,1           AFIELD +2      C
 1440              SWS, CHAR1   AFIELD +1     A,1           AFIELD +2      C

 1441   2SRT 1C    SWS, ONES    AFIELD +1     A,1           AFIELD +1      C
 1442              SWS, ONES    AFIELD        A,1           AFIELD         C
 1443              SS           AFIELD        CHAR1         AFIELD +1      C
 1444              SS           BLANKS        CHAR1         AFIELD

# Page 298
#      @YUL SYSTEM ASSEMBLER -- PASS 2                                           USER'S OWN PAGE NO.  34        PAGE  34

P14441

 1445   FIND NBCS  NA, CHAR8    AFIELD +1     BLANKS

 1447              TS           C,+1          Z,SC          2SRT 1C        C    SHIFT AFIELD AND AFIELD+1 RIGHT 1 CHAR.
 1449              SPEC                                     FIND NBCS

 1450   FOUND RNB  TS           Z,S3,1        -             3SRT 1C        C    PROCEDURE WHEN SEEKING SIGN.
 1452              NA, B3T6     AFIELD +2     ZERO          NOT SIGN
 1453              LA, CHAR1    AFIELD +2     ZERO          NOT SIGN

 1454              NA, CHAR8    AFIELD +1     BLANKS        NO MODIF            BRANCH IF SIGN NOT PRECEDED BY A BLANK.

 1456              TS           AFIELD +2     COMMON        ANAL SUBF +2   C    ANALYZE POSSIBLE MODIFIER.
 1458              NA, B2B6     FIELD COD     BIT2          NO MODIF            BRANCH IF TWASNT A SIGNED NUMERIC SUBF.

 1460              NA           AFIELD +1     BLANKS        ALSO MAIN
 1461              NA           AFIELD        BLANKS        ALSO MAIN           BRANCH IF COMPOUND ADDRESS.

 1463              TS           COMMON +1     ADR WD        N,X4                EXIT FOR SIGNED NUMERIC FIELD.

 1465   FOUND MNB  TS           Z,S3,1        -             3SRT 1C        C    PROCEDURE WHEN NOT SEEKING SIGN.

 1467   NOT SIGN   NA           AFIELD +1     BLANKS        8 NBC Q
 1468              NA           AFIELD        BLANKS        8 NBC Q             BRANCH IF MORE NBCS TO EXAMINE.

 1470              TS           AFIELD +2     COMMON        ANAL SUBF +2   C    ANALYZE POSSIBLE MAIN ADDRESS.
 1472              NA, BIT2     FIELD COD     ONES          3,0                 BRANCH IF NOT NUMERIC.

 1474              TS           COMMON +1     ADR WD        N,X4                EXIT WHEN MAIN ADDRESS IS S OR US NUM.

 1476   NO MODIF   TN           ADDRESS 1     2             AFIELD              SET UP PUTATIVE SYMBOLIC SUBFIELD.
 1478              TS           BLANKS        AFIELD +2     SEEK HEAD +1

 14783             TN           ALSO MAIN -2  2             AFIELD              RECOVER NON-MODIFIER PART OF ADR FIELD.
 14785             TS           BLANKS        AFIELD +2     SEEK HEAD +1

 1479   SEEK HEAD  NA, CHAR1    AFIELD +2     BLANKS        C,+3                BRANCH WHEN POSSIBLE HEAD FOUND.

 1481              TS           C,+1          Z,SC          3SRT 1C        C    TRIPLE SHIFT RIGHT TO FIND HEAD.
 1483              SPEC                                     SEEK HEAD

# Page 299
#      @YUL SYSTEM ASSEMBLER -- PASS 2                                           USER'S OWN PAGE NO.  35        PAGE  35

P14831

 1484              NA, CHAR8    AFIELD +1     BLANKS        NO HEAD             CHAR, PRECEDED BY NON-BLANK ISNT HEAD.

 1486              NA           AFIELD        BLANKS        SRT SYM             MOVE SYMBOL RIGHT TO INSERT HEAD.

 1488              NA           AFIELD +1     BLANKS        C,+2

 1489              TS           AFIELD +2     ADR WD        N,X4                EXIT WHEN MAIN ADDRESS IS 1-CHAR. SYM.

 1491              NA, CHAR1    AFIELD +1     BLANKS        PLACE HED           MOVE SYMBOL LEFT TO INSERT HEAD.
 1493              SWS, ONES    AFIELD +1     A,1,L         AFIELD +1
 1494              TS           -             -             C,-2

 1495   SRT SYM    TS           -             -             2SRT 1C        C
 1496              NA, CHAR8    AFIELD +1     BLANKS        BAD ADRES           ERROR IF NO ROOM FOR HEAD.
 1498              NA           AFIELD        BLANKS        C,-2                SHIFT UNTIL NORMALIZED IN AFIELD +1.

 1500   PLACE HED  SWS, CHAR8   AFIELD +2     A,1,L         AFIELD +1           INSERT HEAD CHARACTER.

 15011             TX           BIT 1         -             FIELD COD           ANNOUNCE SYMBOLIC ADDRESS PART.
 1502              TS           AFIELD +1     ADR WD        N,X4                EXIT WHEN MAIN ADDRESS IS SYMBOLIC.

 1504   NO HEAD    SWS, ONES    AFIELD +1     A,1,L         AFIELD +1           BACKTRACK AFTER NO-HEAD FINDING.
 1506              NA, CHAR8    AFIELD +1     BLANKS        BAD ADRES           ERROR IF SYMBOL IS TOO LONG.
 1508              NA           AFIELD        BLANKS        BAD ADRES           ERROR IF SYMBOL IS TOO LONG.

 1510              SWS, CHAR8   AFIELD +2     A,1,L         AFIELD +1           FINISH BACKTRACKING.
 1512              NA, CHAR1    AFIELD +1     BLANKS        PLACE HED +1        BRANCH WHEN SYMBOL IS NORMALIZED.
 1514              SWS, ONES    AFIELD +1     A,1,L         AFIELD +1
 1515              TS           -             -             C,-2

 1516   8 NBC Q    NA           Z,S3          ZERO          FIND NBCS           SEEK ANOTHER NON-BLANK CHARACTER.

 1518   BAD ADRES  TS           ONES          FIELD COD     N,X4                ERROR EXIT.

 15191             RESERVE      2
 1520   ALSO MAIN  TX           FIELD COD     -             FIELD COD +1        INDICATE PRESENCE OF MODIFIER.
 15211             TN           AFIELD        2             ALSO MAIN -2        SAVE ORIGINAL FORM OF REST OF FIELD.
 1522              SM           Z,X3,2        Z,X5,9        -                   SET UP TO OMIT SIGN SEARCH.
 1524              TS           COMMON +1     ADR WD +1     LD A2 S3            DELIVER VALUE OF MODIFIER.

# Page 300
#      @YUL SYSTEM ASSEMBLER -- PASS 2                                           USER'S OWN PAGE NO.  36        PAGE  36

P1526             SUBROUTINE TO ANALYZE A SUBFIELD OF EIGHT CHARACTERS.  ENTER WITH THE SUBFIELD IN COMMON.  C(COMMON)
R1528   IS NORMALIZED ON RETURN.  IF THE SUBFIELD IS NUMERIC, THE RESULTING BINARY INTEGER IS DELIVERED IN COMMON+1 WITH
R1530   THE SPECIFIED SIGN IF ANY OR A PLUS SIGN IF NO SIGN IS GIVEN.  C(FIELDCOD) GIVES THE RESULTS OF ANALYSIS....

R1532   BIT 1      ZERO -- NON-SYMBOLIC SUBFIELD            ONE -- SYMBOLIC SUBFIELD
R1534   BIT 2      ZERO -- NON-NUMERIC SUBFIELD             ONE -- NUMERIC SUBFIELD
R1536   BIT 5      ZERO -- MINUS SIGNED SUBFIELD            ONE -- UNSIGNED OR PLUS SIGNED SUBFIELD
R1538   BIT 6      ZERO -- SIGNED NUMERIC SUBFIELD          ONE -- UNSIGNED NUMERIC SUBFIELD

R1540   BIT 9 OF HEALTH IS SET TO 1 IF A DECIMAL SUBFIELD IS WRITTEN WITHOUT A D



 1541   ANAL SUBF  NA           COMMON        BLANKS        C,+2           C
 1542              TX           ZERO          -             FIELD COD           INDICATE BLANK SUBFIELD AND EXIT.

 1544              TS           UNSIG NUM     FIELD COD     NORMALED -1    C    TEMPORARILY ASSUME UNSIGNED NUMERIC.
 1546              NA, CHAR1    COMMON        BLANKS        NORMALED       C
 1547              SWS, ONES    COMMON        A,1,L         COMMON         C    NORMALIZE.
 1549              TS           COMMON        COMMON +1     C,-2           C

 1550   NORMALED   LA, CHAR1    COMMON +1     ZERO          SET DIG        C    BR IF 1ST CHAR OF SUBFIELD IS ZERO.

 1552              TX           ONES          -             DIG FILE       C    INDICATE NO DIGITS YET.
 1554              NA, B3T6     COMMON +1     ZERO          NO SIGN        C    BR IF 1ST CHAR OF SUBFIELD ISNT A SIGN.
 1556              SWS, B5T6    COMMON +1     3             FIELD COD      C    INDICATE SIGN AND WHICH SIGN.
 1558              NA, C2T8     COMMON +1     BLANKS        BLANK FIL +2   C

 1559   SYMBOLIC   TX           BIT 1         -             FIELD COD           INDICATE SYMBOLIC AND EXIT.

R1561   NO SIGN IS THE BEGINNING OF THE LOOP TO EXAMINE EACH CHARACTER.

 1562   NO SIGN    LA, CHAR1    COMMON +1     ALF 9 C1      DIGITS         C    BRANCH IF CHARACTER IS A NUMERAL.

 1564              NA, CHAR1    COMMON +1     D C1          SYMBOLIC       C    BRANCH IF NEITHER NUMERAL NOR D.

 1566              NA, C2T8     COMMON +1     BLANKS        SYMBOLIC       C    BRANCH IF D WITH MORE TO COME.

 1568              LA           ONES          DIG FILE      SYMBOLIC       C    BRANCH IF D WITH NO PRECEDING NUMERALS.

 1570   DECIMAL)   TS           C,+1          CONV LOOP     CONV LOOP -1   C    SET UP CONVERSION, DECIMAL TO BINARY.
 1572              BT           COMMON +1     10            COMMON +1      C

# Page 301
#      @YUL SYSTEM ASSEMBLER -- PASS 2                                           USER'S OWN PAGE NO.  37        PAGE  37

P15721

 1573   DIGITS     SM, BIT3     FIELD COD     COMMON +1     FIELD COD      C    TELLTALE BIT FOR 8S AND 9S.
 1575              NA           DIG FILE      ONES          FILE DIG       C    BRANCH IF 2ND OR SUBSEQUENT DIGIT.

 1577   SET DIG    TX           L DIG FILE    -             Z,S0           C    PROCEDURE FOR FIRST DIGIT.
 1579              TX           ZERO          -             DIG FILE       C    FAKE A ZERO PRECEDING FIRST DIGIT.
 1581              TX           L DIG FILE    -             Z,S1           C

 1582   FILE DIG   NA, CHAR1    COMMON +1     ZERO          NZ DIGIT       C
 1583              LA           DIG FILE      ZERO          NZ DIGIT +1    C    SUPPRESS INSIGNIFICANT ZEROS.

 1585   NZ DIGIT   SWE, D12     COMMON +1     A,7           N,S0,1         C    FILE SIGNIFICANT DIGIT.
 1587              NA, C2T8     COMMON +1     BLANKS        BLANK FIL =2   C    CONTINUE IF MORE TO COME.

 1589              NA, BIT3     FIELD COD     ONES          OCTAL)         C    BRANCH IF NO D AND NO 8S OR 9S.

 1591              TS, BIT9     ONES          HEALTH        DECIMAL)       C    SET COMPLAINT WHEN 8S OR 9S AND NO D.

 1593   BLANK FIL  SWS, ONES    COMMON +1     A,1,L         COMMON +1      C
 1594              NA, CHAR1    COMMON +1     BLANKS        NO SIGN        C
 1595              TS, CHAR1    BLANKS        COMMON +1     BLANK FIL      C    INSERT BLANK FOR USED DIGIT, NORMALIZE.

 1597   OCTAL)     TS           C,+1          CONV LOOP     CONV LOOP -1   C    SET UP CONVERSION, OCTAL TO BINARY.
 1599              SWE, OCTMASK COMMON +1     3,L           COMMON +1      C

 1600              TS           ZERO          COMMON +1     CONV LOOP +2   C
 1601   CONV LOOP  TS           -             -             DISASTER            (SHOULD ALWAYS GET REPLACED)
 1603              WA           COMMON +1     N,S1,1        COMMON +1      C
 1604              NA           Z,S0          Z,S1          CONV LOOP      C    LOOP UNTIL ALL SIGNIFICANT DIGITS USED.

 1606              SWS, BIT1    FIELD COD     4,L           COMMON +1           INSERT CORRECT SIGN AND EXIT.

# Page 302
#      @YUL SYSTEM ASSEMBLER -- PASS 2                                           USER'S OWN PAGE NO.  38        PAGE  38

P1608              SUBROUTINE IN PASS 2 TO ANALYZE THE HISTORY OF A SYMBOL.  ENTER WITH THE NORMALIZED SYMBOL IN COMMON.
R1610   PREVAILING HEAD IS APPENDED TO SYMBOL IN COMMON IF THERE IS ROOM.  THE PRESENT HEALTH AND DEFINITION (IF ANY)
R1612   ARE DELIVERED IN COMMON+2 IN BITS 29-48, BUT ALL ONES IS DELIVERED IN COMMON+2 IF THE SYMBOL IS NEW AND THERE
R1614   IS NO ROOM IN THE TABLE.  Z,X2 IS SET TO THE ADDRESS OF THE SECOND WORD OF THE TABLE ENTRY, OR TO COPY BUFF -1
R1616   IF THE TABLE IS FULL.  Z,X3 IS SET TO THE ADDRESS OF A WORD WHOSE RIGHT CAC FIELD POINTS TO THE SYMBOL, EXCEPT
R1618   IF THE TABLE IS FULL.  NEW SYMBOLS ARE INSERTED IN THE TABLE WITH ALPHABETICAL ORDERING BY A COMBINATION OF
R1620   ASSOCIATIVE REFERENCING ON THE FRONT 7 BITS AND THREADING FROM SYMBOL TO SYMBOL.  SEARCHING IS AIDED BY DIVIDING
R1622   THE SET OF SYMBOLS UP INTO STRINGS WHOSE MAXIMUM SIZE IS 11 SYMBOLS, THE DIVIDERS BEING UP TO 1024 PAIRS OF SPEC
R1624   FIELDS.  THE FIRST AND SECOND SPECS IN EACH PAIR POINT TO THE END AND BEGINNING OF ITS STRING.



 1626   ANAL SYMB  TX           L SYM THR     -             Z,X5           C    ADDRESS OF LIST OF 126 SPECPAIR THREADS.
 1628              NA, CHAR8    COMMON        BLANKS        C,+2           C
 1629              TX, CHAR8    HEAD          -             COMMON         C    APPEND HEAD IF THERE IS ROOM.
 1631              SWS, B19T25  COMMON        18            SYM SHIFT      C    CHOOSE THREAD BY 7 FRONT BITS OF SYMBOL.
 1633   SYM SHIFT  SWE, CAC3    5,0           0             Z,X3           C    THREAD FOR 1 OF 126 OF 1024 SPEC PAIRS.
 1635              LA           ONES          COMMON        FULLNESS       C    "¢¢¢¢¢¢¢¢" IS SOCIALLY UNFIT FOR TABLE.

 1637   SEEK STRG  S, ETS       3,0           ZX +2         C,+1                POINT TO LAST SYMBOL IN STRING.
 1639              LA           COMMON        N,X2,1        IN STRING      C    BRANCH IF SYMBOL MUST BE IN THIS STRING.
 1641              TS           N,X2          Z,X3          SEEK STRG      C    POINT TO SPEC PAIR FOR NEXT STRING.
 1643   IN STRING  TS           Z,X3,1        -             SEEK SYMB +3   C

 1647   SEEK SYMB  LA           COMMON        N,X2          FIND OR NO     C
 1648              S, ETS       2,1           ZX +3         C,+1                ARGUMENT IS GREATER.  TRY NEXT SYMBOL.
 1650              LA           COMMON        N,X3,1        C,+2           C
 1651              S, ETS       3,0           ZX +2         SEEK SYMB           ARGUMENT IS GREATER.  TRY NEXT SYMBOL.

 1653              EBA          Z,X2          ONE           Z,X3           C    POINT TO SECOND WORD OF PRECEDING SYMB.
 1655              S, ETS       3,0           ZX +2         C,+1                POINT TO EQUAL OR GREATER SYMBOL.

 1657   FIND OR NO NA           N,X2,1        COMMON        C,+3           C    BRANCH IF SYMBOL IS NOT IN TABLE.
 1659              LA           2,1           CAC12         FOUND SYM      C    BRANCH IF SYMBOL, NOT MULT. DEF. FLAG.
 1661              S, ETS       2,1           ZX +2         C,-2                POINT TO CURRENT MEMBER OF MULT DEF SET.
 1663              NA           SYM PLACE     END SY TAB    NEW SYMB       C    BRANCH IF SYMBOL TABLE IS NOT FULL.

 1665   FULLNESS   DS           SYM TAB XS    ONE           SYM TAB XS     C    COUNT HOW MANY TOO MANY.
 1667              WD           L COP BUFS    ONE           Z,X2           C    PREVENT POSSIBLE TROUBLE WITH 2,N REFS.
 1669              TX           ONES          -             COMMON +2      S    SET FULLNESS SIGNAL AND EXIT.

 1671   NEW SYMB   TX           N,X3          -             Z,SH           C    SAVE ADDRESS OF NEXT SYM OR SPEC PAIR.
 16722             NA           SYM PLACE     SPEC MAG      C,+2           C
 16724             WA           SYM PLACE     THREE         SYM PLACE      C    SKIP OVER 32K STOPPER.
 1673              SS           SYM PLACE     CAC3          N,X3           C    THREAD TO THIS FROM LAST SYM OR SPEC PR.
 1675              EBA          SYM PLACE     BIT 25        Z,X2           C
 1676              TX           COMMON        -             N,X2,1         C    PUT NEW SYMBOL IN SYMBOL TABLE.
 1678              TX           Z,SH          -             N,X2           C    THREAD TO NEXT SYMBOL OR SPEC PAIR.
 1680              TX           ZERO          -             2,1            C    INITIALIZE ANALYZER WORD.
 1682              WA           SYM PLACE     THREE         SYM PLACE      C

 1684   FOUND SYM  SWE, B8T12   N,X2          16            COMMON +2      S    DELIVER HEALTH AND EQUIVALENT OF SYMBOL.

# Page 303
#      @YUL SYSTEM ASSEMBLER -- PASS 2                                           USER'S OWN PAGE NO.  39        PAGE  39

P1712              SUBROUTINE IN PASS 2 TO TRANSLATE THE ADDRESS FIELD OF A DECIMAL CONSTANT.  EXPECTS TO FIND THE FIELD
R1714   DELIMITED BY AN ATSERISK.  DELIVERS THE RESULT AS AN INTEGER WITH SIGN IN BIT 1 IN NUMBER, OR DELIVERS
R1716   ..BAD WORD.. IN NUMBER IF THE VALUE CANNOT BE DETERMINED.  ENTER WITH RETURN IN X4 AND WITH THE FWA OF THE
R1718   ADDRESS FIELD IN S3, THE MAXIMUM INTEGER IN FLOATING DECIMAL FOR THE CONSTANT TYPE AND MACHINE IN MAX DECML, THE
R1720   SAME QUANTITY +1 IN ISCALE, AND THE MAXIMUM NUMBER AS ABOVE IN BINARY IN MAX NUMBR. APPROPRIATE CUSSING IS DONE.



 1722   DEC CONST  TX           PLUS 75       -             EXPONENT            INITIALLY ASSUME INTEGER.
 1724              TX           BIT 1         -             MANTISSA            INITIALLY ASSUME PLUS.
 1726              BS           ZERO          ONE           FULL DELT           EXPO INCREASES WHEN WD FULL, NO POINT.
 1728              TS           ZERO          NFUL DELT     NORMA CON +2   C    BUT POINT MOVES DOWN WHEN WD NOT FULL.
 1730              NA, D12      CARACTER      ZERO          NEXT CHAR +1        BRANCH IF CANNOT BE A SIGN.
 1732              LA           CARACTER      ZERO          NEXT CHAR +2
 1733              SWS, BIT 1   CARACTER      43,L          MANTISSA            PLACE EXPLICIT SIGN ON MANTISSA.

 1735   NEXT CHAR  TS, CHAR8    CHAR 8        CON WORD      NORMA CON +1   C    CREAM LAST CHARACTER AND GET NEXT.
 1737              LA           TEN           CARACTER      NON DIGIT

 1738              LA, D2T12    BIT 12        MANTISSA      FULL MANT           10 (NORMALIZED) DIGITS IS  FULL MANT.

 1740              SPE, D1T11   MANTISSA      D,1,L         MANTISSA
 1741              SM           MANTISSA      BIT 2         MANTISSA            SIGNAL THERES AT LEAST ONE DIGIT.
 1743              BA           EXPONENT      NFUL DELT     EXPONENT
 1744              TS, D12      CARACTER      MANTISSA      NEXT CHAR           PUT DIGIT INTO MANTISSA.

 1746   FULL MANT  BA           EXPONENT      FULL DELT     EXPONENT
 1747              TS, BIT 1    ONES          CUSS LIST +13 NEXT CHAR           SIGNAL MORE THAN 10 DIGITS.

 1749   NON DIGIT  NA           NFUL DELT     ZERO          NON POINT           BRANCH IF A POINT HAS OCCURRED.
 1751              NA           CARACTER      POINT C8      NON POINT           BRANCH IF NOT A POINT.
 1753              TX           ONE           -             NFUL DELT
 1754              TS           ZERO          FULL DELT     NEXT CHAR           SIGNAL POINT OCCURRENCE AND GET NEXT.

 1756   NON POINT  SSL, ONE     MANTISSA      46            C,+1                TEST NONE/SOME DIGITS INDICATOR.
 1758              TS           FL UNITY      NUMBER        E QUEST             NUMBER = 1.0 IF NO DIGITS BEFORE E OR B.

 1760              SWE, B2T8    EXPONENT      40,L          EXPONENT
 17601             EX           MANTISSA      B1B5T48       NUMBER
 1761              FFN          EXPONENT      NUMBER        NUMBER              FLOAT NUMBER BEFORE E OR B ADJUST.

 1763   E QUEST    NA           CARACTER      EC8           NON(E)              BRANCH IF NOT AN  E  .

 1765              TX           BIT 1         -             E NUMBER            INITIALLY ASSUME PLUS E NUMBER.
 1767              SM           MANTISSA      BIT 2         MANTISSA            SIGNAL NON-VOID FIELD.
 1769              TS           ZERO          DEC DIGS      NORMA CON      C
 1770              NA, D12      CARACTER      ZERO          NEXT ECAR +1
 1771              LA           CARACTER      ZERO          NEXT ECAR +2
 1772              SWS, BIT 1   CARACTER      43,L          E NUMBER            PUT EXPLICIT SIGN ON E NUMBER.

# Page 304
#      @YUL SYSTEM ASSEMBLER -- PASS 2                                           USER'S OWN PAGE NO.  40        PAGE  40

P1774   LOOP TO DEAL WITH DIGITS AFTER E.

 1775   NEXT ECAR  TS, CHAR8    CHAR8         CON WORD      NORMA CON +1   C    CREAM LAST CHARACTER AND GET NEXT.
 1777              LA           TEN           CARACTER      NON E DIG           BRANCH IF NOT A DIGIT.
 1779              BT           E NUMBER      10            E NUMBER
 1780              WA           E NUMBER      CARACTER      E NUMBER
 1781              WA           DEC DIGS      ONE           DEC DIGS
 1782              LA           DEC DIGS      THREE         NEXT ECAR           BRANCH IF E NUMBER NOT TOO LONG.

 1784              TS, BIT 17   ONES          CUSS LIST +13 EX RANGE +1

 1785   NON E DIG  LA           DEC DIGS      ZERO          BAD CONST           NO DIGITS AFTER E IS WRONG.

 1787              TX           BIT 1         -             COMMON
 1788              SWS, B42T48  NUMBER        40            COMMON
 1789              BA           E NUMBER      COMMON        E NUMBER            ADD IMPLICIT AND EXPLICIT EXPONENTS.
 1791              LN           E NUMBER      ONE           EX RANGE            NEGATIVE RESULT IS WRONG.
 1793              LA, C2T8     BIT 41        E NUMBER      EX RANGE            128 OR MORE IS WRONG TOO.
 1795              SWS, B2T8    E NUMBER      40,L          NUMBER              TRUE MAGNITUDE OF NUMBER IS NOW KNOWN.

 1797   NON(E)     NA           CARACTER      BC8           NON(B)              BRANCH IF CHARACTER IS NOT B.

 1799              SM           MANTISSA      BIT 2         MANTISSA            SIGNAL NON-VOID FIELD.
 1801   B FACTOR   TX           BIT 1         -             B NUMBER            INITIALLY ASSUME PLUS.
 1803              TS           ZERO          DEC DIGS      NORMA CON      C
 1804              NA, D12      CARACTER      ZERO          NEXT B CAR +1
 1805              LA           CARACTER      ZERO          NEXT B CAR +2
 1806              SWS, BIT 1   CARACTER      43,L          B NUMBER            PUT IN EXPLICIT SIGN.

 1808   NEXT B CAR TS, CHAR8    CHAR8         CON WORD      NORMACON +1    C
 1809              LA           TEN           CARACTER      NON B DIG           BRANCH IF NOT A DIGIT.
 1811              BT           B NUMBER      10            B NUMBER
 1812              WA           B NUMBER      CARACTER      B NUMBER
 1813              WA           DEC DIGS      ONE           DEC DIGS
 1814              LA           DEC DIGS      THREE         NEXT B CAR          ERROR IF B NUMBER IS TOO LONG.
 1816              TS, BIT 17   ONES          CUSS LIST +13 EX RANGE +1

 1817   NON B DIG  LA           DEC DIGS      ZERO          BAD CONST           NO DIGITS AFTER B IS WRONG.
 1819              NN           B NUMBER      ZERO          C,+2                BRANCH IF B NUMBER NOT TRIVIAL.
 1821              TS           -             -             NON(B)

 1822              LA, CAC3     B210          B NUMBER      EX RANGE            B NUMBER MORE THAN 209 IS WRONG.
 1824              LN           B NUMBER      ZERO          C,+2                BRANCH IF B NUMBER NORZ.
 1826              TS           L POWERS 2    Z,S3          C,+2
 1827              SWE, CAC3    L POWERS 2    16            Z,S3                CHOOSE POS OR NEG POWERS OF 2.
 1829              TS           FL UNITY      COMMON        BUILD B +3

# Page 305
#      @YUL SYSTEM ASSEMBLER -- PASS 2                                           USER'S OWN PAGE NO.  41        PAGE  41

P1830   LOOP TO FORM SCALING FACTOR BY A PRODUCT OF FACTORS OF THE FORM 2**(2**N) WHERE N = 0(1)7.

 1832   BUILD B    SM           Z,S3,1        Z,SC,3        -                   ADVANCE INDEX AND SKIP.
 1834              FDM          N,S3,1        COMMON        COMMON              FORM PROD(2**(+-POWERS OF 2)).
 1836              SWE, CAC3    B NUMBER      1             B NUMBER
 1837              SSL, ONE     B NUMBER      0             BUILD B
 1838              NA           B NUMBER      ZERO          BUILD B +2          BRANCH IF B NUMBER NOT EXHAUSTED.

 1840              EX           NUMBER        B2T8          COMMON +1
 1841              EX           COMMON        B2T8          COMMON +2
 1842              WA           COMMON +1     COMMON +2     COMMON +1           TENTATIVELY COMBINE EXPONENTS.
 1844              LA           COMMON +1     HEX 49L       EX RANGE            BRANCH IF PRODUCT WILL UNDERFLOW.
 1846              LA           B1B2          COMMON +1     EX RANGE            BRANCH IF PRODUCT WILL OVERFLOW.
 1848              FDM          NUMBER        COMMON        NUMBER              SCALE BY B FACTOR.

 1850   NON(B)     NA           CARACTER      STAR C8       BAD CONST           ERROR IF CHARACTER IS NOT ASTERISK.
 1852              SSL, ONE     MANTISSA      46            C,+1                TEST NONE/SOME DIGITS INDICATOR.
 1854              TS, BIT 33   ONES          CUSS LIST +2  BAD CONST +2        VOID FIELD IS ILLEGAL.

 1856              LA, ALLBUTB1 FL UNITY      NUMBER        INTEGER

 1857              FDM          NUMBER        ISCALE        NUMBER              TURN FRACTION INTO INTEGER FOR MACHINE.
 18582             LA, ALLBUTB1 HALF ADJ      NUMBER        C,+3                OK IF NUMBER WILL ASSEMBLE AS NON-ZERO.
 18584             LA, ALLBUTB1 NUMBER        ZERO          C,+2                ZERO IS OK IF IT WAS MEANT TO BE ZERO.
 18586             SM           CUSS LIST +13 BIT 33        CUSS LIST +13       INADVERTENT ZERO IS A SCALING BLUNDER.
 1859              TS           NUMBER        COMMON        DEC TO BIN     C
 1860              LA           NUMBER        MAX NUMBR     SET SIGN            BRANCH IF WE DIDNT ROUND UP TO ONE.
 1862              TS           MAX NUMBR     NUMBER        SET SIGN            USE 1 - EPSILON IN THAT CASE.

 1864   INTEGER    LA, ALLBUTB1 NUMBER        MAX DECML     C,+2
 1865              TS, BIT 17   ONES          CUSS LIST +13 EX RANGE +1         ERROR IF TOO-BIG INTEGER.

 1867              FDAU         NUMBER        FLI ZERO      COMMON              CREATE INTEGER VERSION OF NUMBER.
 1869              FDS          NUMBER        COMMON        NUMBER
 1870              FNN          NUMBER        FL ZERO       C,+2                BRANCH IF THE FRACTIONAL PART ISNT ZERO.
 1872              TS           Z,SC,1        -             DEC TO BIN +2  C
 1873              TS, BIT 33   ONES          CUSS LIST +13 DEC TO BIN +2  C    CUSS FRACTION LOSS AND CONVERT.

 1875   SET SIGN   TX           SAVE W6       -             CARD +5             RESTORE POSSIBLY STARRED WORD IN CARD.
 1877              SS           COMMON        BIT  1        NUMBER              ATTACH SIGN.
 1879              TS           ONES          E NUMBER      N,X4                DECLARE NUMBER TO BE SIGNED, EXIT.

 1881   BAD CONST  TS, BIT 33   ONES          CUSS LIST +2  C,+2                SIGNAL MEANINGLESS ADDRESS FORMAT.

 1883   EX RANGE   SM           CUSS LIST +13 BIT 17        CUSS LIST +13       SIGNAL RANGE ERROR.
 18841             TX           SAVE W6       -             CARD +5
 1885              TS           W BAD WORD    NUMBER        N,X4                EXIT WHEN VALUE IS UNDETERMINED.

# Page 306
#      @YUL SYSTEM ASSEMBLER -- PASS 2                                           USER'S OWN PAGE NO.  42        PAGE  42

P1887   CLOSED SUBROUTINE TO SET NEXT NON-BLANK CHARACTER.

 1888   ROTACON    SWS, ONES    CON WORD      A,1,L         CON WORD       C
 1889              NA, CHAR8    CON WORD      BLANKS        ROTAXIT        C    BRANCH IF CHARACTER NON-BLANK.
 1891   NORMA CON  SM           CON WORD      CHAR8         CON WORD       C    CREAM LAST CHARACTER.
 1893              NA           CON WORD      ONES          ROTACON        C    BRANCH IF WORD NOT EXHAUSTED.
 1895              TS           N,S3,1        CON WORD      ROTACON        C    BEGIN NEXT WORD.
 1897   ROTAXIT    EX           CON WORD      CHAR 8        CARACTER            ISOLATE CHARACTER AND EXIT.



R1899   CLOSED SUBROUTINE TO SINK A FLOATING DECIMAL NUMBER INTO THE BINARY DEEP.

 1901   DEC TO BIN SS           COMMON        BIT 1         HALF ADJ       C    ROUND.
 19021             FDA          COMMON        HALF ADJ      COMMON         C
 1903              FDAU         COMMON        FLI ZERO      COMMON         C    SINK.
 1905              SWS, ONES    COMMON        D,3,L         COMMON         C
 1906              TX           TEN           -             Z,S3           C    INITIALIZE DIGIT COUNT.
 1908              TS           ZERO          NUMBER        DTOB LOOP +3   C

 1909   DTOB LOOP  WA           NUMBER        COMMON +1     NUMBER         C
 1910              BT           NUMBER        10            NUMBER         C
 1911              SWS, ONES    COMMON        D,1,L         COMMON         C
 1912              EX           COMMON        D12           COMMON +1      C
 1913              NA           Z,S3,1        ONE           DTOB LOOP      C
 1914              WA           NUMBER        COMMON +1     NUMBER



 1915   L POWERS 2 CAC                        POW POW 2M    POW POW 2P

 1916   POW POW 2M FLDEC        .5, .25, .0625, .390625 E-2
 1917              FLDEC        .15 2587 8906 E-4, .23 2830 6437 E-9
 1918              FLDEC        .54 2101 0864 E-19, .29 3873 5877 E-38

 1919   POW POW 2P FLDEC        2.0, 4.0, 16.0, 256.0, 65536.0
 1920              FLDEC        .42 9496 7296 E10, .18 4467 4407 E20
 1921              FLDEC        .34 0282 3669 E39

# Page 307
#      @YUL SYSTEM ASSEMBLER -- PASS 2                                           USER'S OWN PAGE NO.  43        PAGE  43

P1922              SUBROUTINE IN PASS 2 TO TRANSLATE THE ADDRESS FIELD OF AN OCTAL CONSTANT.  EXPECTS TO FIND THE FIELD
R1924   DELIMITED BY AN ASTERISK.  DELIVERS THE RESULT AS AN INTEGER WITH SIGN IN BIT 1 IN NUMBER, OR DELIVERS
R1926   ..BAD WORD.. IN NUMBER IF THE VALUE CANNOT BE DETERMINED.  ENTER WITH RETURN IN X4 AND WITH THE FWA OF THE
R1928   ADDRESS FIELD IN S3, AND THE MAXIMUM OCTAL UNSIGNED INTEGER FOR THE MACHINE AND THE CONSTANT TYPE IN MAX NUMBR.
R1930   EXPECTS THE EXPRESSION TO BE AN INTEGER, AND CUSSES IF A FRACTIONAL PART IS LOST BY TRUNCATION.



 1932   OCT CONST  TX           PLUS 42       -             EXPONENT            INITIALLY ASSUME INTEGER.
 1934              TX           ZERO          -             E NUMBER            INITIALLY ASSUME UNSIGNED NUMBER.
 1936              TX           BIT 1         -             MANTISSA            INITIALLY ASSUME PLUS.
 1938              TX           PLUS 3        -             FULL DELT
 1939              TS           ZERO          NFUL DELT     NORMA CON +2   C    GET FIRST CHARACTER.
 1941              NA, D12      CARACTER      ZERO          NEXT 8CAR +1        BRANCH IF CANNOT BE A SIGN.
 1943              LA           CARACTER      ZERO          NEXT 8CAR +2        BRANCH IF ZERO RATHER THAN SIGN.
 1945              SWS, BIT 1   CARACTER      43,L          MANTISSA            SHIFT SIGN BIT INTO PLACE.
 1947              TX           ONES          -             E NUMBER            DECLARE NUMBER TO BE SIGNED.
 1949   SIGND OCT  SWE, D2T12   MAX NUMBR     0             MAX NUMBR           SMALLER NUMBER IS MAX IF SIGNED.
 1951   NEXT 8CAR  TS, CHAR8    CHAR 8        CON WORD      NORMA CON +1   C    CREAM LAST CHARACTER AND GET NEXT.
 1953              LA           EIGHT         CARACTER      NON 8 DIG           BRANCH IF NOT AN OCTAL DIGIT.

 1955              LA, D2T12    BIT 9         MANTISSA      FUL 8 MANT          14 OCTAL DIGITS MAKE A FULL MANTISSA.

 1957              SPE,B1THRU45 MANTISSA      3,L           MANTISSA
 1958              SM           MANTISSA      CARACTER      MANTISSA            PUT DIGIT INTO MANTISSA.
 1960              SM           MANTISSA      BIT 2         MANTISSA            INDICATE SOME DIGITS.
 1962              BS           EXPONENT      NFUL DELT     EXPONENT
 1963              TS           -             -             NEXT 8CAR

 1964   FUL8 MANT  BA           EXPONENT      FULL DELT     EXPONENT
 1965              TS, BIT 1    ONES          CUSS LIST +14 NEXT 8CAR           CUSS TOO MANY OCTAL DIGITS.

 1967   NON 8 DIG  NA           NFUL DELT     ZERO          NO 8 POINT          BRANCH IF A POINT HAS OCCURRED.
 1969              NA           CARACTER      POINT C8      NO 8 POINT          BRANCH IF THIS IS NOT A POINT.
 1971              TX           PLUS 3        -             NFUL DELT
 1972              TS           ZERO          FULL DELT     NEXT 8CAR           SIGNAL POINT OCCURRENCE AND GET NEXT.

 1974   NO 8 POINT SSL, TWO     MANTISSA      45            C,+1                TEST NONE/SOME DIGITS INDICATOR.
 1976              NA           CARACTER      BC8           BAD CONST           ONLY B IS LEGAL HERE IF NO DIGITS.
 1978              TS, ALLBUTB1 ONE           MANTISSA      C,+2                NUMBER = 1 IF NO DIGITS BEFORE B.

 1980              NA           CARACTER      BC8           NON(B)8

 1981              TX           BIT 1         -             B NUMBER            INITIALLY ASSUME PLUS B NUMBER.
 1983              TS           ZERO          DEC DIGS      NORMA CON      C
 1984              NA, D12      CARACTER      ZERO          NEX B8 CAR +1
 1985              LA           CARACTER      ZERO          NEX B8 CAR +2       BRANCH IF NOT A SIGN.
 1987              SWS, BIT 1   CARACTER      43,L          B NUMBER            SHIFT SIGN BIT INTO POSITION.

# Page 308
#      @YUL SYSTEM ASSEMBLER -- PASS 2                                           USER'S OWN PAGE NO.  44        PAGE  44

P1989   LOOP TO DEAL WITH DIGITS AFTER B.

 1990   NEX B8 CAR TS, CHAR8    CHAR 8        CON WORD      NORMA CON +1   C

 1991              LA           TEN           CARACTER      NON B8 DIG          B-FACTOR IS MADE OF DECIMAL DIGITS.

 1993              BT           B NUMBER      10            B NUMBER
 1994              WA           B NUMBER      CARACTER      B NUMBER
 1995              WA           DEC DIGS      ONE           DEC DIGS
 1996              LA           DEC DIGS      TWO           NEX B8 CAR
 1997              TS, BIT 17   ONES          CUSS LIST +13 EX RANGE +1         ABORT WHEN B-FACTOR IS TOO LONG.

 1999   NON B8 DIG LA           DEC DIGS      ZERO          BAD CONST           NO DIGITS AFTER B IS ILLEGAL.
 2001              BA           EXPONENT      B NUMBER      EXPONENT            COMBINE IMPLICIT AND EXPLICIT EXPONENTS.

 2003   NON(B)8    NA           CARACTER      STAR C8       BAD CONST           ONLY ASTERISK IS OK HERE.
 2005              LN           PLUS 42       EXPONENT      ALL BINT            BRANCH IF VALUE IS INTEGER.
 2007              SSL, ONE     MANTISSA      0             C,+1                TEST VALUE OF BIT TO BE DISCARDED.
 2009              TX           Z,SC,1        -             -
 2010              SM           CUSS LIST +13 BIT 33        CUSS LIST +13       CUSS LOST FRACTIONAL BITS.
 2012              SPE,D1D3T12  MANTISSA      1             MANTISSA            DISCARD LOWEST BIT.
 2014              BS           EXPONENT      ONE           EXPONENT
 2015              TS           -             -             NON(B)8 +1          CONTINUE UNTIL WE HAVE AN INTEGER.

 2017   ALL BINT   LA, D2T12    MANTISSA      MAX NUMBR     C,+2                BRANCH IF NUMBER IS OF OK SIZE.
 2019              TS, BIT 17   ONES          CUSS LIST +13 EX RANGE +1

 2020              LN           EXPONENT      PLUS 42       OCT INTGR           BRANCH IF SCALING IS FINISHED.
 2022              SPE, ONES    MANTISSA      1,L           MANTISSA            SHIFT NUMBER UP.
 2024              WD           EXPONENT      ONE           EXPONENT
 2025              TS           -             -             ALL BINT

 2026   OCT INTGR  EX           MANTISSA      B1B5T48       NUMBER              PREPARE FINAL FORMAT OF CONSTANT.
 2028              TS           SAVE W6       CARD +5       N,X4                RESTORE POSSIBLY STARRED WORD, EXIT.

# Page 309
#      @YUL SYSTEM ASSEMBLER -- PASS 2                                           USER'S OWN PAGE NO.  45        PAGE  45

P2030              SUBROUTINE IN PASS 2 TO BUFFER & PRINT A LINE WITH PAGINATION AND VERTICAL FORMAT CONTROL.  ENTRY IS
R2032              TS           Z,SC          Z,X4          PRINT LIN           THE SYMBOL ..LINE.. IS ASSIGNED TO 0,0.
R2034   ERROR AND WARNING LINES FROM PASS 2 COME WITH AN ..E.. IN THE EQUIVALENT OF COLUMN 1, AND CONTINUATION LINES
R2036   COME WITH A ..C.. THERE.  PAGE SKIPS ARE INSERTED BEFORE CARDS WITH ..P.. OR ..L.. IN COLUMN 1.  LOG CARDS ARE
R2038   PRINTED AS SUBSIDIARY PAGE HEADS (SP2) ON SUCCEEDING PAGES, UNTIL SUPPLANTED BY ANOTHER LOG CARD.  STRICTLY
R20382  SPEAKING, THIS SUBROUTINE PRINTS THE LINE LAST DELIVERED TO IT.  WHEN SUPPRESSING INACTIVE SUBROUTINES, PRINTS
R20384  CUSSED LINES WITH THEIR CUSSES.

 20389  PRINT LIN  TX           L OLD LINE    -             Z,X3
 203891            TX           Z,X0          -             L OLD LINE          NEW LINE AGES SUDDENLY.
 203893            NA, CHAR1    LINE +1       L COLUMN 1    NO NEW LOG

 203896            NA           LINE          BIT 12        C,+2
 203898 SP2 THIS   TX           BIT 11        -             LINE           S    CHANGE LOG CARD SP1 TO SP2.
 2039              TX, C5T8     BLANKS        -             USERLOG +15         ERASE ANY SPECIAL FLAG AT END OF LOGLIN.
 203902            SS           ZERO          LAST REM      SWITCH              LOSE ANY RIGHT PRINT ON LOG CARD.
 203904            SS           ZSUP ONE      C5T8          USERLOG +13         ALWAYS START PAGE NUMBER AT 1.
 203906            TN           LINE +1       10            USERLOG +1          KEEP LOG LINE FOR PAGE SUBHEADS.
 203908            MT           N,AU2,1       5             N,AU1,1             SET UP "USER'S OWN PAGE NO."
 20391             TX           ONE           -             USER PAGE
 203911            NA, BIT44    SWITCH        ZERO          PRIN SKIP           BRANCH UNLESS PRINTING IS SUPPRESSED.
 203913            NA, BIT3     SWITCH        ZERO          PRINT OLD +2        EXIT AT ONCE IF PAGE HEAD IS OWED.
 203915            NA           3,1           E COLUMN 1    C,+2
 203916            TS, BIT3     ONES          SWITCH        ENDOFORM -1         PRINT E AND OWE HEADS IF E IS OWED.
 203918            WA           Z,X3          ONE           Z,AU2
 203919            MT           BLANKS        15            N,AU2,1             IF NOTHING IS OWED, WE'RE IN MID-PAGE.
 203921            TS, BIT3     ONES          SWITCH        ENDOFORM -2         SO PRINT BLANK LINE(S) TO GET TO E-O-F.

 203923 NO NEW LOG NA, CHAR7    LINE +1       ZERO          PRIN SUP Q          MAKE CARD NUMBER LOOK HELPFUL BY
 203925            SS           BLANKS        CHAR7         LINE +1             SUPPRESSING AT MOST TWO ZEROS.
 203927            NA, CHAR6    LINE +1       ZERO          PRIN SUP Q          FROM RIGHT TO LEFT (COLUMNS 7 AND 6).
 20393             SS           BLANKS        CHAR6         LINE +1

 20394  PRIN SUP Q NA, BIT44    SWITCH        ZERO          P SKIP Q            BRANCH UNLESS PRINTING IS SUPPRESSED.
 203942            NA           LINE +1       E COLUMN 1    WAS LAST E          BRANCH UNLESS OWE A CUSS OR CUSSED LINE.
 203946            TS           BIT 12        N,X3          SP2 THIS       C    SINGLE-SPACE ANY LINE PRECEDING E-LINE.
 203948            NA, BIT3     SWITCH        ZERO          PAGE UNIT -1        BRANCH IF WE OWE HEADS.
 20395             TS           -             -             PRINT OLD -1

 203952 WAS LAST E NA           3,1           E COLUMN 1    PRINT OLD +2        EXIT AT ONCE IF NOR THIS NOR LAST WAS E.
 203954            WA, ALLBUTB1 LIN COUNT     3,0           LIN COUNT           ADD TO LINE COUNT FROM LAST LINE.
 203956            LA           LIN COUNT     N LINES       PRINT OLD           BRANCH TO NORMAL PRINT.
 203958            TS, BIT3     ONES          SWITCH        ENDOFORM -1

# Page 310
#      @YUL SYSTEM ASSEMBLER -- PASS 2                                           USER'S OWN PAGE NO.  46        PAGE  46

P20396  ARRANGE FOR A PAGE SKIP IF NECESSARY.

 203962            NA, ONE      SWITCH        ONES          SUPP SKIP           BRANCH IF NO CUSSES ON THIS PAGE.
 203966            TS, ONE      ZERO          SWITCH        C,+2

 20397  ENDOFORM   MT           BLANKS        15            N,AU1,1             GO TO END OF FORM BY BLANK LINES W/ SP2.
 203974            TS           BIT 11        N,X3          WAS LAST E +1  C    SET UP SP2 AND RECORD IT IN LINE COUNT.
 203978            NA           N COPIES      ZERO          COPY PRT5
 203982            S, PHI PRINT 3,0
 203984 X3P1AU1    WA           Z,X3          ONE           Z,AU1          S
 203986            LA           LIN COUNT     N LINES       ENDOFORM            BRANCH IF NOT YET AT END OF FORM.

 20399             MT           BLOT WORD     15            N,AU1,1        S    PREPARE A WHAM FOR LAST LINE OF PAGE.
 203994 SUPP SKIP  NA           N COPIES      ZERO          COPY PRT5           BRANCH IF MORE COPIES SHOULD BE DONE.
 203996            S, PHI PRINT DEPAGIN8
 203998            TS           BIT 1         N,X3          PRINT OLD           PRINT LAST LINE, SKIP, AND OWE HEADS.

 2040   P SKIP Q   NA, CHAR1    LINE +1       P COLUMN 1    C,+2                UNLESS IMMEDIATELY FOLLOWING A LOG CARD,
 2041              NA, CHAR1    3,1           L COLUMN 1    PRIN SKIP           SKIP TO HEAD OF FORM BEFORE ..P.. CARD.
 2042              NA, CHAR1    LINE +1       A COLUMN 1    IS THIS E
 2043              NA, CHAR1    3,1           C COLUMN 1    ASK SKIP            BRANCH UNLESS A-LINE AFTER C-LINE.
 2044              TN           3,2           5             LINE +2             MAYBE COPY 2ND LOC AND WORD OF DP CONST.
 2045              NA           BLANKS        LINE +6       PRINT OLD +2        ABSORB IT INTO A-LINE IF IT WAS.
 2046   IS THIS E  NA, CHAR1    LINE +1       E COLUMN 1    C,+2                BRANCH IF NOT PASS 2 ERROR/WARNING LINE.
 2048              TS           -             -             C,+2
 2049              NA, CHAR1    LINE +1       C COLUMN 1    ASK SKIP            BRANCH IF NOT PASS 2 CONTINUATION LINE.

 20501             NA           LIN COUNT     N LINES       C,+2
 20503             WD           LIN COUNT     BIT 12        LIN COUNT           KEEP "E" AND "C" LINES ON SAME PAGE.
 2051              LA           BIT 1         N,X3          ASK SKIP -1         BRANCH IF LAST LINE IS ALREADY SKIP.
 2053              LA           N,X3          BIT 12        C,+3                BRANCH IF LAST LINE IS SP1.
 2055              WD           N,X3          BIT 12        LINE                IF NOT, SPACE THIS LINE 1 LESS.
 2057              TS           BIT 12        N,X3          ASK SKIP +1         MAKE LAST LINE SP1.
 2059              TS           BIT 12        LINE          C,-1                IF LAST LINE IS SP1, SO IS THIS E-LINE.
 2061              TS           BIT 1         LINE          C,-2                MOVE LAST LINES SKIP TO THIS E-LINE.

 2063   ASK SKIP   LA           BIT 1         N,X3          PRIN SKIP           BRANCH IF LAST LINE IS SKIP.
 2065              WA           LIN COUNT     N,X3          LIN COUNT           ADD TO LINE COUNT FROM LAST LINE.
 2067              LA           LIN COUNT     N LINES       PRINT OLD           BRANCH TO NORMAL PRINT.

 2069   PRIN SKIP  SSL, TWO     SWITCH        1,L           C,+1                "BRANCH" IF ANY CUSSES ON THIS PAGE.
 20692             TS           BIT 1         N,X3          DPAGINAT            SKIP AFTER LAST LINE AT END OF PAGE.
 20694             MT           BLANKS        15            N,AU1,1             GO TO END OF FORM BY BLANK LINES W/ SP2.
 20696             TS           BIT 11        N,X3          ASK SKIP +1    C    SET UP SP2 AND RECORD IT IN LINE COUNT.
 20698             NA           N COPIES      ZERO          COPY PRT5           BRANCH IF MORE COPIES SHOULD BE DONE.
 2070              S, PHI PRINT 3,0
 20702             TS, ONE      ZERO          SWITCH        X3P1AU1        C    TURN OFF CUSSES-ON-THIS-PAGE FLAG.
 20704             LA           LIN COUNT     N LINES       PRIN SKIP +2        BRANCH IF NOT YET AT END OF FORM.
 20706             TS           BIT 1         N,X3          SUPP SKIP -1   C    PREPARE A WHAM FOR LAST LINE OF PAGE.
 2071   DPAGINAT   NA           N COPIES      ZERO          COPY PRT5           BRANCH IF MORE COPIES SHOULD BE MADE.
 20711             S, PHI PRINT DEPAGIN8
 20714             NA           N COPIES      ZERO          COPY PRT5           BRANCH IF MORE COPIES SHOULD BE DONE.
 20716             S, PHI PRINT 3,0

# Page 311
#      @YUL SYSTEM ASSEMBLER -- PASS 2                                           USER'S OWN PAGE NO.  47        PAGE  47

P20718  PRINTING OF PAGE HEAD AND SUBHEAD (LOC), AND DETAIL LINES.

 2072              DA           PAGE NO       ONE           PAGE NO
 2073   PAGE UNIT  SWE, CAC2    PAGE NO       D,4,L         ARG 1
 2075              TS           -             -             P2 D2A LZS     C
 2077              SS           ARG 1         C5T8          PAGE HEAD +15       PUT PAGE NUMBER ALPHA IN PAGE HEAD.

 20822  PRINT HED  NA           N COPIES      ZERO          COPY PRT5
 2083              S, PHI PRINT PAGE HEAD
 2084              TX           PAGE HEAD     -             LIN COUNT           RESET LINE COUNT TO 3.
 208402            LA           USER PAGE     ZERO          PRINT OLD -2        FINISH UP AND EXIT IF NO LOG.

 208404            NA           USER PAGE     ONE           PRINT LOG           GO TO PRINT IF NOT NEW LOG.
 20841             NA, BIT3     SWITCH        ZERO          PLOG LINE           PRINT LOG LINE NOW IF HEADS ARE OWED.
 20842             TS           TWO           USER PAGE     PRINT OLD +2        ADVANCE PAGE NO. FOR NEXT USE OF LOG.

 20843  PRINT LOG  SWE, CAC2    USER PAGE     D,4,L         ARG 1
 20844             TS           -             -             P2 D2A LZS     C
 20845             SS           ARG 1         C5T8          USERLOG +13         PUT PAGE NO. IN ALPHA IN PAGE SUBHEAD.

 2085   PLOG LINE  NA           N COPIES      ZERO          COPY PRT5
 20852             S, PHI PRINT USERLOG                                         PRINT LOG LINE AND DOUBLE SPACE.
 2086              DA           USER PAGE     ONE           USER PAGE
 20862             WA           LIN COUNT     USER LOG      LIN COUNT           ACCORDINGLY SET LINE COUNT TO 5.
 20865             NA, BIT3     SWITCH        ONES          PRINT OLD +2        EXIT NOW UNLESS HEADS WERE OWED.
 20867             TS, BIT3     ZERO          SWITCH        WAS LAST E +1  C    NOW HEADS ARE PAID UP, PRINT A CUSSED L.

 2087   PRINT OLD  NA           N COPIES      ZERO          COPY PRT5
 2088              S, PHI PRINT 3,0
 2089              TX           Z,X3,1        -             Z,X0                OLD LINE DISCOVERS FOUNTAIN OF YOUTH.
 2091              MT           BLANKS        15            N,X3,1
 2092              TS           ZERO          N,X0          N,X4                AND IS MOREOVER MADE CLEAN AGAIN.



R20931  MINOR SUBROUTINE TO COPY PRINTING ONTO TAPE 5.

 20932  COPY PRT5  SS           N,SH          A ADRES       C,+2
 20933             WA           L COP BUFS    ONE           Z,X0
 20934             TN                         16            N,X0,15             COLLECT 4 LINES BEFORE WRITING.
 209342            TX           Z,SH          -             CAC N
 209344            NA           0,3           EOR           COPY EXIT           BRANCH IF RECORD NOT FILLED YET.

 209348            TX           0,4           -             Z,X0
 20935             CC           0,1           -             0,65
 20936             TS           N,X0          L COP BUFS    PHI TAPE            SWAP TAPE BUFFERS.
 20937             WF,5         0,1           -             DISASTER

 20938             TX           CAC N         -             Z,SC
 20939  COPY EXIT  TS           Z,X0          L COP BUFS    C,-1                ADVANCE POINTER WITHIN BUFFER.

# Page 312
#      @YUL SYSTEM ASSEMBLER -- PASS 2                                           USER'S OWN PAGE NO.  48        PAGE  48

P2094              CUSSING ROUTINE IN PASS 2.  GOES THROUGH THE ENTIRE CUSS LIST LOOKING FOR CUSS DEMAND BITS IN BITS
R2096   1, 17, AND 33.  THE LIST TERMINATES IN A SENTINEL OF ALL ONES.  EACH THIRD OF A WORD IN THE CUSS LIST CONSISTS
R2098   OF A DEMAND BIT (RESET BY THIS ROUTINE), A POISON BIT TO DETERMINE IF THIS CUSS IS FATAL, THREE BITS GIVING THE
R2100   NUMBER OF WORDS IN THE CUSS, AND AN 11-BIT SUBADDRESS.  THE CUSSES THEMSELVES ARE IN BANK 5.

 21012  CUSSER     TX           ZERO          -             COMMON
 2102              TS           L CUS LIST    Z,X6          C,+2
 2103              TX           Z,X6,1        -             -
 2104              LA, B1B17B33 6,0           ZERO          C,-1                BRANCH IF NO CUSSES IN THAT WORD.

 21053             NA           N,X6          ONES          TRY BIT 1           BRANCH IF REAL CUSS, NOT END OF LIST.

 21056             LA           COMMON        ZERO          PASS 2              EXIT IF NO CUSSES FOR THIS LINE.
 21059             TS           TEN           COMMON        COUNT CUS      C

 2108   TRY BIT 1  NA, BIT 1    6,0           ONES          TRY BIT 17
 2109              SWE, CAC3    N,X6          32            COMMON
 2110              TS, BIT 1    ZERO          6,0           PRIN CUSS      C    RESET DEMAND BIT AND CUSS.

 2112   TRY BIT 17 NA, BIT 17   6,0           ONES          TRY BIT 33
 2113              SWE, CAC3    N,X6          16            COMMON
 2114              TS, BIT 17   ZERO          6,0           PRIN CUSS      C    RESET DEMAND BIT AND CUSS.

 2116   TRY BIT 33 NA, BIT 33   6,0           ONES          C,+3
 2117              TS           N,X6          COMMON        PRIN CUSS      C
 2118              SS           ZERO          BIT 33        N,X6                CUSS AND RESET DEMAND BIT.
 21192             TS, ONE      ONES          SWITCH        CUSSER +1           SHOW THAT THERE ARE CUSSES ON THIS PAGE.

R2120   CLOSED SUBROUTINE TO SET THE CUSSES IN PRINT.

 2121   PRIN CUSS  SS           COMMON        B38T48        Z,R5           C    R5 MAINTAINS BANK INDICATOR 5 IN PASS 2.
 2123              SWS, B28T30  COMMON        7,L           C,+1           C
 2124              TN           N,R5          0             LINE +3        C
 21242             TX           Z,AU2         -             Z,X5           C    IF 1ST CUSS OF PAGE, LEFT END OF BLOTS.
 2125              NA, BIT 34   COMMON        ZERO          C,+2           C    BIT 34 INDICATES FATAL CUSS (BAD ASSY).
 2127   GO NUM CUS TS           Z,SC          Z,X4          NUMB CUSS      S    GET INTO SC MODE FOR DEC-TO-ALF, PRINT.
 2129              SWS, BIT14   SWITCH        4,L           SWITCH         C    EFFECT CONDITIONAL SUPPRESSION.
 2131              TS, BIT34    ONES          SWITCH        GO NUM CUS     C    INDICATE THAT ASSEMBLY IS BAD.

 2133   NUMB CUSS  DA           N ERR LINS    ONE           ARG 1               FORM SERIAL NUMBER FOR THIS CUSSED LINE.
 2135              SWE, ONES    ARG 1         D,4,L         ARG 1
 2136              TS           E COLUMN 1    LINE +1       P2 D2A LZS     C
 2137              SWE, ONES    ARG 1         A,1,L         ARG 1
 2138              LA, CHAR1    BLANKS        ARG 1         C,-1                NORMALIZE ALPHA SERIAL OF CUSSED LINE.
 2140              SWE, ONES    ARG 1         A,2           LINE +2
 2141              TS, CHAR1    SHARP C1      LINE +2       PRINT LIN           PRINT SERIAL "# NN  " AND TEXT OF CUSS.

# Page 313
#      @YUL SYSTEM ASSEMBLER -- PASS 2                                           USER'S OWN PAGE NO.  49        PAGE  49

P2143              SUBROUTINE IN PASS 2 TO COUNT CUSSED LINES AND KEEP TRACK OF FIRST AND LAST PAGE NUMBERS.  ALSO PUTS
R2145   "PRECEDING CUSSED LINE IS ON PAGE NNN" ON THE LAST CUSS OF THE FIRST CUSSED LINE OF A PAGE.

 2149              TS           BLOT WORD     N,X5,1        PREV CUSS -2   C    FILL EMPTY PART OF 1ST CUSS WITH BLOTS.

 2150   NEW PAGE   SWS, C1T4    ERR PAGES     A,4,L         PREV CUSS +4   C    SUPPLY FORMER LAST-PAGE-WITH-CUSSES.
 2152              WA           L OLD LINE    COMMON        Z,X3           C    POINT TO OLD LINE OR OLD LINE +5.
 21532             LA           Z,X5          Z,X3          NEW PAGE -1    C    BRANCH UNTIL BLOT FILLING IS DONE.
 2154              TN           N,CSC,7       5             3,1            C    MSG TO UNUSED PART OF LINE, TAB TO SS.

 2156   PREV CUSS  ALF,5        PRECEDING CUSSED LINE IS ON PAGE     ▪▪▪

 21568  COUNT CUS  DA           N ERR LINS    ONE           N ERR LINS     C    INCREMENT NUMBER OF ERROR LINES.
 2157              SWS, C1T4    PAGE HEAD +15 A,4,L         ERR PAGES      C    ON FIRST ERROR, SAVE PAGE NUMBER.
 2159              TN           N,CSC,1       3             COUNT CUS +1   C    INHIBIT ABOVE FOR ERRORS AFTER FIRST.
 2161              NA, C5T8     ERR PAGES     PAGE HEAD +15 NEW PAGE       C    BRANCH IF CUSSED LINE IS FIRST ON PAGE.
 2163              SS           PAGE HEAD +15 C5T8          ERR PAGES      C    SHOW LATEST PAGE NUMBER WITH ERROR.
 2165              LN           COMMON        ZERO          PASS 2         S    RETURN TO EITHER OF TWO PLACES.



R2167              SUBROUTINE IN PASS 2 TO CONVERT A DECIMAL NUMBER TO ALPHABETIC AND SUPPRESS LEFT ZEROS IN IT.

 21688             SWE, D4T8    ARG 1         D,2           ARG 1          C    SPECIAL ENTRY TO FLUSH DIGITS RIGHT.
 2169   P2 D2A LZS SWS, C5T8    ARG 1         8             ARG 1          C
 2172              SWS,DECALFM1 ARG 1         4             ARG 1          C
 2174              SWS,DECALFM2 ARG 1         2             ARG 1          C
 2176              SWS,DECALFM3 ARG 1         2             ARG 1          C
 2177              TS           C1T7          CACN          C,+3           C    SUPPRESS AT MOST 7 LEFT ZEROS.
 2179   ARG 1      RESERVE      1
 2181              SWS, C1T7    CACN          A,1,L         CACN           C
 2183              NA, CACN     ARG 1         ZERO          C,-1           C
 2184              SS           BLANKS        CACN          ARG 1          S    BLANK OUT LEADING ZEROS, EXIT.

# Page 314
#      @YUL SYSTEM ASSEMBLER -- PASS 2                                           USER'S OWN PAGE NO.  50        PAGE  50

P2398   FINALIZING ACTIONS FOR PASS 2.

 2399   END PASS 2 SSL, ONE     SWITCH        44            RELS OR RW     C    RELEASE OR REWIND TAPE 2, AS REQUIRED.
 23993             RW,2         -             -             -
 23995             LA           L LINE        Z,X0          C,+3
 2400              TN           LINE STOR     16            OLD LINE            ENSURE THAT STORED LINE IS IN INTERPASS.
 2402              TX           Z,X0          -             L OLD LINE

 2406              NA           NEW BUF Q     UNSET NEW     C,+2                BRANCH IF LAST WD RECORD HAS BEEN SENT.
 2408              TS           -             -             SEND WBUF      C    FINISH AND WRITE LAST WORD RECORD.

 2410              TS           Z,R0          N WD RECS     PHI TAPE
 2411              WF,4         -             -             DISASTER
 2412              TS, BIT 33   ZERO          N WD RECS     PHI TAPE            SAVE WORD RECORD COUNT IN UNSIGNED FORM.
 2414   6 CAC 3    RW,4         -             0             6

 2415              TS           Z,SC,1        -             MON WAKE       C    WAKE RD3 AND RD1 JUST IN CASE.
 2419              TS           -             -             MON SLEEP      C    SLEEP UNTIL PARAPROGRAMS DIE.
 2421   PARA WAIT  NA           END PARAS     ZERO          C,-1
 2426              S, PHI LOAD  PASS 3        1             BASE ADDR



R2427   ITEMS TO BE FILLED IN BY PARTICULAR PASS 2.

 2428   PATCHES    RESERVE      10

 24289  SIZ PASS 2 EQUALS       PATCHES - PROG NAME + 10

 2429   M PROC OP  EQUALS       PATCHES +10
 2430   M PROC 1P  EQUALS       M PROC OP
 2431   M PLOC IS  EQUALS       M PROC OP
 2432   D1 PARAMS  EQUALS       PATCHES +11
 2433   K1 MAXNUM  EQUALS       PATCHES +14
 2434   D2 PARAMS  EQUALS       PATCHES +15
 2435   M PROC 2P  EQUALS       PATCHES +18
 2436   M PLOC EB  EQUALS       M PROC 2P
 2438   K2 MAXNUM  EQUALS       PATCHES +19
 2439   MAXLOC     EQUALS       PATCHES +20
 24391  CON MASK   EQUALS       PATCHES +21
 2440   PRET FLAG  EQUALS       PATCHES +23
 2441   FLAG MASK  EQUALS       PATCHES +24
 2442   CONS FLAG  EQUALS       PATCHES +25
 24421  M MXR      EQUALS       PATCHES +26
 24422  MISC FLAG  EQUALS       PATCHES +27

# Page 315
#      @YUL SYSTEM ASSEMBLER -- PASS 2                                           USER'S OWN PAGE NO.  51        PAGE  51

P2450              ON THESE PAGES IS A PRELUDE TO PASS 2 INITIALIZATION, WHICH, AS IT REALLY PROCESSES THE CONSEQUENCES
R2452   OF PASS 1, IS CALLED PASS 1.5.  IT BEGINS BY DEFINING ALL THE LEFTOVER SYMBOLS SPECIFIED IN PASS 1, IN THE ORDER
R2453   OF THEIR INTRODUCTION.  IT THEN EXAMINES ALL THE NEARLY DEFINED SYMBOLS AND FOLLOWS THREADS TO DEFINERS AND DE-
R24532  FINEES TO DEFINE THEM.  IT PERFORMS NO OTHER ACTION FOR REPRINT.  FOR A REJECTED (I.E. BAD-MERGE) ASSEMBLY, IT
R2454   SETS "▪REJECT " NEXT TO THE PAGE NUMBER IN THE PAGE HEAD AND SUBTRACTS ONE FROM THE REVISION NUMBER (REVISION)
R2456   OR DEMANDS A SILENT DELETION OF AN ABORTED VERSION.  FOR A NON-REJECTED ASSEMBLY, IT CLEARS OUT THE LIST OF PRO-
R2458   GRAMS AND SUBROUTINES TO BE DELETED AND MAKES OR REMAKES A LIST OF THREADS TO SUBROUTINES DIRECTLY CALLED BY THE
R2460   PROGRAM OR SUBROUTINE BEING ASSEMBLED.



 2463              SETLOC,7C    SIZ PASS 2    B1                                PASS 1.5 IS OVERLAID BY PARTICULAR PAS2.



 2465              MASKGRP,7    S,7           F,7



R2466   FIELD MASKS FOR PASS 1.5.

 24668  B,BIT7H    OCT          004
 2467   B,BIT9H    OCT          001
 2468   B,BIT11H   OCT          0002
 2469   B,BIT12H   OCT          0001

 2470   B,BIT13H   OCT          00004
 2471   B,BIT25H   OCT          -4000 0000
 2472   B,BIT32H   OCT          -20 0000
 2473   B,BIT36H   OCT          -1 0000

 2474   B,BIT37H   OCT          -4000
 2475   B,B10B12H  OCT          0005
 24755  B,B12B13H  OCT          00014
 2476   B,B122436H OCT          0001 0001 0001

 2477   B,B13B36H  OCT          0000 4000 0001
 24779  B,D4H      DEC          000 G
 2478   B,D4T6H    DEC          000 GGG
 2479   B,CHAR5H   OCT          -7700 0000

 2480   B,CAC3H    OCT          -17 7777
 24801  B,LSTYPEH  OCT          -7000 0000
 24802  B,AVMSKH   OCT          0
 248022 B,C7T8H    OCT          -7777

 24803  B,FIXMAGH  DEC          0GG GGG GGG GGG
 24804  B,CAC1H    DEC          GGGG

# Page 316
#      @YUL SYSTEM ASSEMBLER -- PASS 2                                           USER'S OWN PAGE NO.  52        PAGE  52

P2481   FURTHER SHIFT MASKS FOR PASS 1.5.

 2482   S,BIT012H  OCT          7777
 2483   S,SPECMAGH OCT          -77777
 24831  S,B26T30H  OCT          -3700 0000
 248311 S,B27T30H  OCT          -1700 0000
 24832  S,B38T48H  OCT          -3777

 24834  S,B1SPCMAG OCT          4000 0000 0007 7777
 24835  S,CHAR8H   OCT          -77
 24836  S,LEFTMASK OCT          0
 2485   S,CAC2H    OCT          0000 0377 7760 0000

 24854  S,ACH2     OCT          0017
 24855  S,ACH3     OCT          000017
 2486   S,THRED10H OCT          -3776
 2487   S,OTHRD11H OCT          3777
 2488   S,ATHRD11H OCT          0000 3777
 24889  S,BTHRD10H OCT          -3776 0000
 2489   S,BTHRD11H OCT          -3777 0000
 2490   S,THRED11H OCT          -3777

 2491   S,ONEH     OCT          -1
 2492   S,TWOH     OCT          -2
 2493   S,FOURH    OCT          -4
 2494   S,ONESH    OCT          7777 7777 7777 7777



R2495   CONSTANTS NEEDED ONLY DURING PASS 1.5 OR INITIALIZATION OF PASS 2.

 24958  P2 SIDE GP ALF          YULSIDE2
 2496   W REJECT   ALF          ▪REJECT
 2497  *DELE CARD  ALF,4                 DELETE REVISION 000 OF
 2498   W PROGRAM  ALF,2             PROGRAM
 2499   W SUBROTI  ALF,2             SUBROUTINE
 2500   W BY       ALF             BY

 25006  BIT 6H     OCT          01
 2501   BIT 10H    OCT          0004
 2502   BIT 24H    OCT          0000 0001
 25021  BIT 43H    OCT          -40
 2503   B13B25     OCT          0000 4000 4
 2504   B132537    OCT          -4000 4000 4000
 2505   B24 B36    OCT          -1 0001 0000
 2506   12(12)48   OCT          0001 0001 0001 0001

# Page 317
#      @YUL SYSTEM ASSEMBLER -- PASS 2                                           USER'S OWN PAGE NO.  53        PAGE  53

P250605 PASS 1.5 CONSTANTS CONCLUDED.



 25061  3D4H       DEC          0003
 25062  4D4H       DEC          0004
 250622 5D4H       DEC          0005
 25063  8D4H       DEC          0008
 25064  CD4H       DEC          000C
 25069  ACH4       OCT          0000 0017
 2507   SIXH       OCT          -6
 2508   SEVEN H    OCT          -7
 25081  C259       FXBIN        -259
 25082  C1T3       OCT          777777
 2509   CAC12H     OCT          7777 7777 7760
 2510   CAC3M1     OCT          -17 7776
 25102  CHECKED    DEC          -1GG GGGG GGGG

 25107  L STOPPER  SPEC,B3                                  DAMN ZERO
 25109  L UNAVS    CAC                        END CAT Q     END WD Q
 2511   P1▪5 MXR   MASKBASE     S,7           F,7
 25111  L SYMTH 14 SPEC,B5                                  848
 2513   DIRWORD8   SPEC,B7                                  8
 25132  L B2 START SPEC,B7                                  707
 2514   MON WAA    SPEC,B7                                  600



R2515   SYMBOL SELECTION LOGIC FOR LEFTOVER SYMBOL RESOLUTION ON NEXT PAGE.

 25155  PASS 1▪5   TX           L CUS LIST    -             Z,X1                LOAD ADDRESS OF CUSS LIST AND MASKS.
 2516              TX           L AV TABLE    -             Z,X6
 2517              S, ETS       6,1           ZX +6         C,+1                SEE WHETHER NEXT SYMBOL IS LEFTOVER.
 2519              LA           ONES          N,X6          RESOLVEM -1         BRANCH IF NO MORE SYMBOLS IN TABLE.
 2521              LA           6,2           CAC12         FIX LEFTO           BRANCH IF SYMBOL, NOT MULT. DEF. FLAG.

 2523              EBA          Z,X6,2        ZERO          COMMON +7
 2524              S, ETS       6,0           ZX +5         NX6 TO C6
 25252             SM           CAC12         5,1           N,X6                LET MULT DEF. FLAG POINT TO FIRST DEF.
 2526              WA           NEXT LSYM     EIGHT         NEXT LSYM           MODIFY PROCEDURE FOR MULTIPE DEFS.
 2528              S, ETS       COMMON +6     ZX +6         FIX LEFTO           DO LAST DEFINITION FIRST.

 2530              NA, CAC3H    6,1           COMMON +6     PASS 1▪5 +2         LOOP UNTIL POINTING TO LAST DEF. AGAIN.
 2532              WD           NEXT LSYM     EIGHT         NEXT LSYM
 2533              S, ETS       COMMON +7     ZX +6         NEXT LSYM

 25334  NX6 TO C6  TS           N,X6          COMMON +6     PASS 1▪5 +7         POINT TO LAST DEFINITION OF SYMBOL.

# Page 318
#      @YUL SYSTEM ASSEMBLER -- PASS 2                                           USER'S OWN PAGE NO.  54        PAGE  54

P2534              ASSIGNMENT OF LEFTOVER SYMBOLS TO FIXED OR ERASABLE MEMORY.  MAKES USE OF THE FOLLOWING PATTERN IN
R2536   THE SECOND SYMBOL TABLE ENTRY WORD, PLACED THERE BY PASS 1:  BIT 1, 0 FOR FIXED OR 1 FOR ERASABLE; BITS 2-6, 16
R2538   MINUS MODULARITY; BITS 7-12, THE NUMBER OF ADDITIONAL BLOCKS ALLOWED; BITS 13-16, 0101; BITS 17-32, MINIMUM
R2540   BASE ADDRESS (AN INTEGER TIMES 2**MODULARITY) PLUS RESERVATION SIZE - 1.  THE IDEA IS THAT LEFTOVERS MUST FIT
R2542   IN SPECIFIED REGIONS OF MEMORY AND MAY NOT CROSS CERTAIN BOUNDARIES (SUCH AS THE SWITCHED BANKS OF AGC4).  THIS
R2544   PROCESS MUST BE DONE FOR ALL LEFTOVER SYMBOLS BEFORE ANY NEARLY-DEFINED EQUALS DEFINITIONS ARE RESOLVED.

 2546   FIX LEFTO  NA, D4H      6,1           5 D4 H        NEXT LSYM           BRANCH IF THIS SYMBOL IS NOT LEFTOVER.

 2548              SWS, B26T30H 6,1           A,4           C,+1                USE (16-MODULARITY) AS SHIFT COUNT.
 2550              SWE, CAC3H   CAC3                        LEFT MASK           FORM 2**MODULARITY - 1.
 2552              SWE,LEFTMASK 6,1           16            COMMON +1           FETCH BLOCK LENGTH - 1.
 2554              SWE,SPECMAGH 6,1           16            COMMON
 2555              HA           COMMON        COMMON +1     Z,R1                FORM MINIMUM BASE ADDRESS FOR BLOCK.
 2557              SWE, CHAR8H  6,1           A,6           COMMON +2           FETCH NUMBER OF ADDITIONAL BLOCKS.
 2559              LA           BIT 1         6,1           C,+2
 2560              TS, LSTYPEH  TYPE F        SWITCH        C,+2                LEFTOVER INSTRUCTION OR CONSTANT.
 2562              SS           TYPE E        L STYPE H     SWITCH              LEFTOVER ERASED REGION.
 2564              SS           ZERO          C1T2          6,1                 MAKE ROOM FOR PAGE NUMBERS IN PASS 2.

 2566   FORM LIML  SM           Z,R1          LEFT MASK     COMMON +3           FORM MAXIMUM ADDRESS FOR LAST WORD.
 2568              TX           Z,R1          -             COMMON
 2569              TX           L TYP TAB     -             Z,X4
 2570              LA, CAC3H    COMMON        4,0           C,+2                FIND NEAREST MEMORY TYPE CATEGORY LIMIT.
 2572              TS           Z,X4,1        -             C,-1
 2573              TX           N,X4          -             Z,R2
 2574              LA           Z,R2          COMMON +3     C,+2                CHOOSE MIN (CATEGORY END, BLOCK END).
 2576              TX           COMMON +3     -             Z,R2
 2577              NA, LSTYPEH  4,0           SWITCH        NEXT CAT            BRANCH IF WRONG MEMORY TYPE.

 2579   CAT OK TYP SWE, B38T48H Z,R1          5             Z,X2
 2580              WA           Z,X2          L AV TABLE    Z,X2                FORM ADDRESS OF AVAILABILITY WORD.
 2582              SM           Z,R1          C31           Z,R3                FORM LAST ADDRESS FOR THIS AVAIL WORD.

 2584   COMP ENDS  LA           Z,R2          Z,R3          LEFT SRCH           BRANCH IF END CATEGORY IN THIS AVAIL WD.
 2586              TS           L UNAVS       Z,X3          LEFT SRCH +1        SET UP TO CHECK END OF AVAIL WD FIRST.

 2588   END CAT Q  NA           Z,R1          Z,R2          NEXT ABIT -1        BRANCH IF NOT END OF CATEGORY.

 2590   NEXT CAT   WA           Z,R2          ONE           Z,R1                FIRST ADDRESS OF NEXT CATEGORY.
 2592              LA           Z,R1          COMMON +3     FORM LIML +1        BRANCH IF NEXT CATEGORY IS IN SAME BLOK.
 2594              BS           COMMON +2     ONE           COMMON +2           DECREASE COUNT OF ADDITIONAL BLOCKS.
 2596              LN           COMMON +2     ZERO          FORM LIML           BRANCH IF WE MAY TRY ANOTHER BLOCK.

 2598   NEXT LSYM  LA, CAC3H    6,1           L AV TABLE    PASS 1▪5 +2         GO LOOK FOR ANOTHER LEFTOVER SYMBOL.
 25992             TS           6,1           Z,X6          C,-1                SKIP OVER SPEC PAIR.

 2600   LEFT SRCH  SWE, CAC3H   L UNAVS       16            Z,X3                SET UP TO CHECK END CATEGORY FIRST.
 2602              LA           N,X2          CAC3          3,1                 BRANCH IF ALL OF AVAIL WD IS RESERVED.

# Page 319
#      @YUL SYSTEM ASSEMBLER -- PASS 2                                           USER'S OWN PAGE NO.  55        PAGE  55

P2604   FIND A SINGLE FREE LOCATION FIRST, AND THEN SEE IF THERE'S ROOM FOR THE ENTIRE RESERVATION.

 2606              SWS, B26T30H Z,R1          18,L          C,+1
 2607              SWE, ONESH   BIT 1                       AV MSK H            FORM MASK TO EXAMINE AVAIL WORD.
 2609              TS           -             -             NEXT ABIT +1

 2610              WA           Z,R1          ONE           Z,R1
 2611   NEXT ABIT  SWE, ONESH   AV MSK H      1             AV MSK H            ADVANCE MASK TO EXAMINE NEXT BIT.
 2613              NA, AVMSKH   2,0           ONES          3,0                 BRANCH IF LOCATION IS RESERVED.

 2615              HA           N,X2          AV MSK H      N,X2                OTHERWISE RESERVE IT NOW (TENTATIVELY).
 2617              TX           Z,R1          -             COMMON              RECORD INITIAL ADDRESS.
 2619              SM           AV MSK H      Z,X2          COMMON +5           SAVE MASK AND ADDRESS IN CASE OF FAIL.
 2621              LA           COMMON +1     ZERO          DEF LEFTO           BRANCH IF BLOCK SIZE = 1 AND IT WAS OK.

 2623              WA           Z,R1          COMMON +1     COMMON +4           IF NOT DONE YET, FORM END OF BLOCK ADDR.
 2625              LA           COMMON +4     Z,R2          END WD Q 2          BRANCH IF BLOCK FITS IN THIS CATEGORY.
 2627              TS, AVMSKH   ONES          2,0           NEXT CAT            UNRESERVE FIRST WORD IF IT DOESN'T.

 2629   END WD Q   NA           Z,R1          Z,R3          NEXT ABIT -1        CHECK NEXT BIT IN SAME AVAIL WORD.
 2631              WA           Z,R3          ONE           Z,R1
 2632              TS           Z,X2,1        -             COMP ENDS -1        START ON NEW AVAILABILITY WORD.

 2634   END WD Q 2 NA           Z,R1          Z,R3          NEND WD 2           BRANCH IF NOT END OF AVAIL WORD.
 2636              WA           Z,R3          BIT 43H       Z,R3
 2637              SWE, ONEH    Z,X2,1        15            AV MSK H

 2638   NEND WD 2  WA           Z,R1          ONE           Z,R1
 2639              SWE, ONESH   AV MSK H      1             AV MSK H            ADVANCE MASK.
 2641              NA, AVMSKH   2,0           ONES          FAILURE             BRANCH IF PART OF TENT. BLOCK IS IN USE.
 2643              HA           N,X2          AV MSK H      N,X2                RESERVE LOCATION TENTATIVELY.
 2645              NA           Z,R1          COMMON +4     END WD Q 2          BRANCH UNLESS BLOCK ALL TESTED AND RSVD.

 2647   DEF LEFTO  SWS, CAC2H   COMMON        16,L          6,1                 PUT DEFINITION INTO SYMBOL TABLE...
 2649              TS, D4H      6 D4          6,1           NEXT LSYM           CALL IT NORMALLY DEFINED, SEEK ANOTHER.

 2651   FAILURE    TX           COMMON +5     -             Z,X2
 2652              HA           COMMON +5     Z,X2          AV MSK H            RESTORE AVAILABILITY WORD ADDRESS & BIT.
 2654   UNRESERV   SM           N,X2          AV MSK H      N,X2                PUT AVAILABILITY BITS BACK.
 2656              WA           COMMON        ONE           COMMON
 2657              LA           Z,R1          COMMON        END LFAIL           BRANCH IF UNRESERVING IS DONE.
 2659              NA           AV MSK H      BIT 32        C,+2                BRANCH IF NOT END OF AVAIL WORD.
 2661              SWE, CAC3H   Z,X2,1        15            AV MSK H            ADVANCE COUNTER, SET MASK = 1.
 2663              SWE, ONESH   AV MSK H      1             AV MSK H            ADVANCE MASK.
 2665              TS, AVMSKH   ONES          2,0           UNRESERV +1         PUT AVAILABILITY BITS BACK.

 2667   END LFAIL  LA           Z,R2          Z,R1          NEXT CAT            BRANCH IF AT END OF CATEGORY.
 2669              WA           Z,R1          ONE           Z,R1
 2670              TS           -             -             CAT OK TYP

# Page 320
#      @YUL SYSTEM ASSEMBLER -- PASS 2                                           USER'S OWN PAGE NO.  56        PAGE  56

P2671              RESOLUTION OF RANDOMLY ORDERED EQUALS DEFINITIONS, USING THREADS ATTACHED TO NEARLY DEFINED SYMBOLS
R2673   IN THE SYMBOL TABLE AND TO THEIR DEFINERS.  THE THREADS FORM A CAC IN THE THIRD WORD OF THE TABLE ENTRY, THUS:
R2675   LEFT CAC, THREAD TO DEFINER; MIDDLE CAC, THREAD TO NEXT CO-DEFINEE; RIGHT CAC, THREAD TO FIRST DEFINEE.  ALL
R2677   THREADS ARE TO THE SECOND WORD OF A SYMBOL TABLE ENTRY.  THE METHOD IS ROUGHLY AS FOLLOWS:  (1) SCAN THE TABLE
R2679   FOR NEARLY DEFINED SYMBOLS.  (2) WHEN ONE IS FOUND, USE DEFINER THREADS, MARKING EACH ONE FOUND, UNTIL A SYMBOL
R2681   IS FOUND THAT IS NOT NEARLY DEFINED.  (3) IF IT IS DEFINED, THE SYMBOLS DEPENDENT ON IT MAY BE DEFINED.  IF NOT,
R2683   ALL ITS DEPENDENTS ARE UNDEFINABLE.  FOLLOW ITS FIRST-DEFINEE THREAD TO DEFINE ITS FIRST DEPENDENT, THEN FOLLOW
R2685   CO-DEFINEE THREADS TO DEFINE ALL DIRECT DEPENDENTS.  (OR, MARK THEM UNDEFINABLE.)  (4) USING THE SYMBOL IN THAT
R2687   SET WHICH HAS A MARKED THREAD (I.E. WAS USED IN THE DEFINER SEARCH), REPEAT STEP (3) UNTIL ALL LEVELS OF DEFINEE
R2689   THREADS ARE EXHAUSTED.  THIS PROCESS IS GUARANTEED TO INCLUDE THE SYMBOL FOUND BY THE ORIGINAL SCAN.



 2691              WA           L AV TABLE    ONE           Z,X6
 2692   RESOLVEM   S, ETS       6,0           ZX +6         C,+1
 2694              LA           ONES          N,X6,1        OPTI THRS           BRANCH IF NO MORE SYMBOLS IN TABLE.
 2696              LA           6,1           CAC12         NEARLY Q            BRANCH IF SYMBOL, NOT MULT. DEF. FLAG.

 2698              EBA          Z,X6,1        ZERO          COMMON +7
 2699              TX           N,X6          -             COMMON +6           POINT TO FIRST DEFINITION OF SYMBOL.
 2703              WA           NEX EQ SYM +1 SEVEN H       NEX EQ SYM +1       MODIFY PROCEDURE FOR MULTIPLE DEFS.
 2705              S, ETS       COMMON +6     ZX +6         NEARLY Q -1         DO FIRST DEFINITION FIRST.

 2707              NA, CAC3H    6,0           COMMON +6     RESOLVEM            LOOP UNTIL POINTING TO FIRST DEF. AGAIN.
 2709              WD           NEX EQ SYM +1 SEVEN H       NEX EQ SYM +1
 2710              S, ETS       COMMON +7     ZX +6         NEX EQ SYM +1

# Page 321
#      @YUL SYSTEM ASSEMBLER -- PASS 2                                           USER'S OWN PAGE NO.  57        PAGE  57

P27102  IF A THREAD IS SEEN TO BE POINTING TO A MULTIPLE DEFINITION FLAG, IT WANTS TO POINT TO THE FIRST DEFINITION.

 2711              TX           Z,X6,1        -             -
 2712   NEARLY Q   LA, D4H      3D4H          6,0           NEX EQ SYM
 2713              LA, D4H      6,0           ZERO          NEX EQ SYM          IF NOT NEARLY DEFINED, SEEK ANOTHER.
 2715              SWE, CAC3H   6,1           32            COMMON +5           FETCH DEFINER THREAD.
 2717              LA           COMMON +5     ZERO          NEX EQ SYM          BRANCH IF DEFINER DIDN'T FIT IN TABLE.
 27182             EBA          COMMON +5     BIT 25        Z,X4
 2719              SS           BIT 16        CAC1H         6,1                 MARK DEFINER THREAD TO FIND WAY BACK.

 2721   M DEF TEST LA           4,1           CAC12         DEF TEST            BRANCH IF SYMBOL, NOT MULT. DEF. FLAG.
 2723              S, ETS       4,1           ZX +4         C,+1                POINT TO FIRST DEFINITION.
 27242             TX           Z,X4,1        -             -
 2725   DEF TEST   SWS, B27T30H N,X4          14            C,+1                FETCH SYMBOL HEALTH CODE.
 2727              SSL, ONEH    DEF XFORM     16            C,+1                "BRANCH" IF SYMBOL HAS NO VALID DEFIN.
 2729              S, ETS       4,1           ZX +2         DEFINEM -1          FETCH FIRST-DEFINEE THREAD, GO DEFINE.
 2731              LA, D4H      4,0           ZERO          VOIDEM
 2732              LA, D4H      3D4H          4,0           VOIDEM              BRANCH IF SYMBOL IS UNDEFINABLE.
 2734              SWE, CAC3H   4,1           32            COMMON +5           FETCH DEFINER THREAD.
 2736              LA           COMMON +5     ONE           VOIDEM              VICIOUS CIRCLE IF MARKED, VOIDED IF 0.
 2738              SS           BIT 16        CAC1H         4,1
 2740              S, ETS       COMMON +5     ZX +4         M DEF TEST          CONTINUE DEFINER SEARCH.

 27412  VOID INAN  TX           ZERO          -             4,1                 INITIALIZE SYMBOL ANALYZER WORD.
 27413             LA, CAC3H    COMMON +5     ZERO          NEX EQ SYM          BRANCH IF DEFINER LACKS DEFINEE THREAD.
 27414             S, ETS       COMMON +5     ZX +4         VOID MRK Q +1
 2742   VOIDEM     TS           4,1           COMMON +5     VOID INAN           FETCH FIRST-DEFINEE THREAD.
 27432             EBA          Z,X4          ZERO          Z,X2                X2 POINTS TO FIRST OR MARKED DEFINEE.
 2744              SS           ZERO          CAC1 H        4,1                 VOID A DEFINER THREAD.
 2746              SWE, CAC3H   4,1           16            COMMON +5           FETCH CO-DEFINEE THREAD.
 2748              LA           COMMON +5     ZERO          VOID LOOP +1        BRANCH IF THERE ARE NO MORE CO-DEFINEES.
 27492             EBA          COMMON +5     BIT 25        Z,X4
 2750              LA           4,1           CAC12         VOID MRK Q
 2751              WA           4,1           ONE           COMMON +5
 27512             S, ETS       COMMON +5     ZX +4         C,+1
 2752   VOID MRK Q NA, CAC1H    4,1           BIT 16        VOIDEM +2           BRANCH IF THIS DEFINER THREAD UNMARKED.
 2754              LA           4,1           CAC12         VOIDEM +1
 2755              WA           4,1           ONE           COMMON +5
 2756   VOID LOOP  S, ETS       COMMON +5     ZX +4         VOIDEM +1

 2758              LA, CAC3H    2,1           ZERO          NEX EQ SYM          BRANCH IF PRIME DEFINEE DEFINES NOBODY.
 2760              EBA          Z,X2          ZERO          Z,X4                START ON NEXT LEVEL OF DEFINEES.
 27612             TS           4,1           COMMON +5     VOID INAN

 27619             TX           ZERO          -             4,1                 INITIALIZE SYMBOL ANALYZER WORD.

# Page 322
#      @YUL SYSTEM ASSEMBLER -- PASS 2                                           USER'S OWN PAGE NO.  58        PAGE  58

P2762   APPLY A DEFINED DEFINER TO A TREE OF NEARLY DEFINED SYMBOLS.

 2763   DEFINER    SWE, CAC3H   N,X4          16            COMMON              FETCH VALUE OF DEFINED SYMBOL.
 27642             EBA          Z,X2          ZERO          Z,X4
 2765              LA           2,1           CAC12         GET AUGMT
 2766              WA           2,1           ONE           COMMON +5
 2767              S, ETS       COMMON +5     ZX +2         DEFINEM +1          COPY DEFINEE THREAD.

 2769              LA           4,1           CAC12         GET AUGMT
 2770              WA           4,1           ONE           COMMON +5
 27702             S, ETS       COMMON +5     ZX +4         C,-2                SEE CALL AT MARK TEST +4.
 2771   GET AUGMT  SWE,B1SPCMAG N,X4          17            COMMON +1           RECONSTITUTE SIGNED MODIFIER.
 2773              BS           COMMON        COMMON +1     COMMON +1           ALL SIGNS ARE BASS-ACKWARDS HERE.
 2774              LN           COMMON +1     ZERO          EQU 2 BIG Q         BRANCH IF DEFINITION VALUE IS POSITIVE.

 2776              SSL, ONEH    N,X4          32            C,+1
 2777              TS, D4H      CD4H          4,0           MARK TEST           MULT NEAR DEF BECOMES MULT OVERSIZE DEF.
 2779              TS, D4H      8D4H          4,0           MARK TEST           NEARLY DEF BECOMES OVERSIZE DEFINED.
 2781   EQU 2BIG Q LA, FIXMAGH  N WD RECS     COMMON +1     C,-3                BRANCH IF DEFINITION TOO BIG FOR MACH.

 2783              SWS, CAC2H   COMMON +1     16,L          N,X4                STORE GOOD DEFINITION.
 2785              SSL, ONEH    N,X4          32            C,+1
 2786              TS, D4H      4D4H          4,0           MARK TEST           MULT NEARLY DEF BECOMES MULT DEF BY =.
 2788              SS           3D4H          D4H           N,X4                NEARLY DEFINED BECOMES DEFINED BY =.

 2790   MARK TEST  LA           BIT 15        4,1           C,+3                BRANCH IF DEFINER THREAD UNMARKED.
 2792              EBA          Z,X4          ZERO          Z,X2
 27922             SS           ONES          CAC1H         4,1                 UNMARK IT AND SAVE ITS ADDRESS.
 2794              SWE, CAC3H   4,1           16            COMMON +5           FETCH CO-DEFINEE THREAD.
 2796              NA           COMMON +5     ZERO          GET AUGMT -1        BRANCH IF THERE IS A CO-DEFINEE.

 2798              LA, CAC3H    2,1           ZERO          NEX EQ SYM          BRANCH IF PRIME DEFINEE DEFINES NOBODY.
 27992             EBA          Z,X2          ZERO          Z,X4
 2800              TS           -             -             DEF TEST            GO TEST PRIME DEFINEE FOR GOOD DEFINE.

 2802   NEX EQ SYM SS           ZERO          CAC12H        6,1                 SHOW ABSENCE OF DEFINITION PAGE NUMBER.
 2804              LA, CAC3H    6,0           L AV TABLE    RESOLVEM            GO LOOK FOR ANOTHER NEARLY DEFINED SYM.
 28052             TX           N,X6          -             Z,X6
 28054             TS           Z,X6,1        -             C,-2                SKIP OVER SPEC PAIR.

# Page 323
#      @YUL SYSTEM ASSEMBLER -- PASS 2                                           USER'S OWN PAGE NO.  59        PAGE  59

P2806   OPTIMIZATION OF SYMBOL TABLE CAC-THREADS, EACH OF WHICH IS TO POINT TO THE SPEC PAIR WHOSE STRING CONTAINS THE
R2808   FIRST SYMBOL WHOSE LEFT 7 BITS CORRESPOND TO THAT CAC-THREAD.

 2809   OPTI THRS  TX           L SYM THR     -             Z,X4
 2810              TX           N,X4          -             Z,X2                POINT TO FIRST SPEC PAIR.
 2812              S, ETS       2,0           ZX +3         CH THREAD           POINT TO THE LAST SYMBOL IN A STRING.

 2814              SS           Z,X2          CAC3          N,X4                PUT OPTIMUM VALUE ON EVEN CAC-THREAD.
 2816   CH THREAD  LA           N,X3          CHECKED       NEXTRING            BR IF NO NEW CATEGORY IN THIS STRING.
 2818              WA           CHECKED       BIT 7         CHECKED
 2819              NA, BIT7H    CHECKED       ONES          CH THREAD -1        BRANCH IF DOING EVEN CAC-THREAD.
 2821              SWS, CAC14   Z,X2          32,L          N,X4                PUT OPTIMUM VALUE ON ODD CAC-THREAD.
 2823              NA           Z,X4,1        L SYMTH 14    CH THREAD           BRANCH IF NEXT IS NOT 13TH CAC-WORD.
 2825              WA           CHECKED       BIT 6H        CHECKED             LEAP OVER SUBRO DIRECTORY ORIGIN.
 2827              TS           Z,X4,1        -             CH THREAD

 2828   NEXTRING   LA           ONES          CHECKED       ASSY TYP Q          BRANCH WHEN ALL CAC-THREADS DONE.
 2830              TS           3,1           Z,X2          CH THREAD -1        POINT TO NEXT SPEC PAIR.

# Page 324
#      @YUL SYSTEM ASSEMBLER -- PASS 2                                           USER'S OWN PAGE NO.  60        PAGE  60

P2832   TEST FOR TYPE OF ASSEMBLY; DISPOSITION OF REPRINT AND BAD MERGE.



 2833   ASSY TYP Q NA, BIT11H   SWITCH        ONES          REAL ASSY           BRANCH IF NOT REPRINT OR BAD MERGE.
 2835              LA           BIT 1         SWITCH        INISH P2            BRANCH IF REPRINT, NOT BAD MERGE.

 2837              TX           W REJECT      -             PAGE HEAD +14       SAY "REJECT" ON EVERY PAGE.
 28382             TX           L PROG FIL    -             Z,X4
 2839              LA, B12B13H  SWITCH        ZERO          DECREVNO            BRANCH UNLESS VERSION OR TRANSFERRED.

R2841   A VERSION OF TRANSFERRED ASSEMBLY IS REJECTED.  DELETE THE NEW PROG/SUB NAME WITHOUT TYPING ANYTHING.

 2843   WAA TO X5  TX           MON WAA       -             Z,X5                IN REJECTING A VERSION OR TRANSFER ASSY,
 2845  *           TX           ONES          -             N,X5,1              SET A SPECIAL FLAG IN THE SENTENCE AREA,
 2847  *           TN           DELE CARD     4             N,X5,3              AND SUPPLY AN INVISIBLE DIRECTOR CARD.
 28482             SWS, ACH2    4,1           4,L           N,X5
 28484             SWS, ACH3    4,1           2,L           N,X5                ALLOW FOR A TRANSFERRED ASSEMBLY WITH AN
 28486             SS           4,1           ACH 4         N,X5,1              UPGRADED REVISION NUMBER.
 2849              MT           BLANKS        6             N,AU2,1
 2850              TS           L COMP NAM    Z,SC          C,+3
 2851              TN           W PROGRAM     2             N,X5           S
 2852              TN           W SUBROTI     2             N,X5           S
 2853              SSL, ONEH    SWITCH        39            C,-2           C
 2854              SS           N,SH          C1T4          N,X5,2
 2855              TX           PROG NAME     -             N,X5,1
 2856              TX           W BY          -             N,X5,1
 28562             SM           SWITCH        BIT 12H       SWITCH              MAKE TRANSFERRED LOOK LIKE VERSION.
 2857              TX           L AUTH NAM    -             Z,AU1
 2858              TX           N,AU1,1       -             N,X5,1
 2859              SS           N,AU1         B38T48        Z,AU1
 2860              TS           N,AU1         N,X5          BIT 13 OFF

R2861   A REVISION IS REJECTED.  SUBTRACT ONE FROM THE REVISION NUMBER.

 2863   DECREVNO   SSL, TWOH    4,1           22            C,+1                SEE WHETHER PROG/SUB HAS SUBROUTINES.
 2865              DS, D4T6H    4,1           BIT 24H       4,1                 PROGRAM OR SUBROUTINE WITHOUT SUBROS.
 2867   BIT 13 OFF TS, BIT13H   ZERO          SWITCH        INISH P2

 2868              SWS,THRED11H 4,1           24            Z,X4
 2869              SWS, ONESH   N,X4          12            N,X4
 2870              DS, D4T6H    4,0           BIT 24H       4,0                 PROGRAM OR SUBROUTINE WITH SUBROTUINES.
 2872              SWS, ONESH   N,X4          36            N,X4
 2873              TS           -             -             INISH P2

# Page 325
#      @YUL SYSTEM ASSEMBLER -- PASS 2                                           USER'S OWN PAGE NO.  61        PAGE  61

P2874   ASSEMBLY OF A NEW PROGRAM OR SUBROUTINE, OR A WELL-MERGED REVISION OR VERSION.  CLEAN OUT THE DELETE LIST AND
R2876   REFURBISH THE LISTS OF THREADS TO SUBSIDIARY SUBROUTINES.

 2877   REAL ASSY  TX           L DIRECTY     -             Z,X6
 2878              TX           6,9           -             Z,X4                GET INITIAL DELETE THREAD.
 2880              TS, CAC3H    L END THR     6,9           END DELE Q          MAKE INITIAL DELETE THREAD VACUOUS.

 2882   MT DELETS  SS           6,8           CAC 12H       4,1                 THREAD FROM HERE TO NEXT OF SINGLETON
 2884              SWS, CAC1H   Z,X4          32,L          6,8                 AND PAIR THREADS, AND POINT INITIAL
 2886              SWS, CAC2H   Z,X4          16,L          6,8                 THREADS OF THOSE TO HERE.
 2888              WA           6,8           BIT 16        N,X4                MAKE SINGLETON CONNECTION WITHIN PAIR.
 2890              SS           4,1           THREAD 10     Z,X4                FOLLOW THE DELETE THREAD.
 2892   END DELE Q NA           Z,X4          L END THR     MT DELETS           BRANCH IF MORE PROGRAMS TO DELETE.

 28938             SS           ZERO          BIT 13H       SWITCH
 2894              TS           L PROG FIL    Z,X1          WAA TO X5      C    POINT TO PROGRAM NAME AND TO DATE AREA.
 2896              NA, B10B12H  SWITCH        BIT 10H       MAKE THDS           BRANCH IF ANYTHING BUT REVISION.
 2898              NA, BIT25H   1,1           ONES H        PUT DATE            BRANCH IF NO SUBSIDIARY SUBROUTINES.

 2900              NA, BIT9H    SWITCH        ONES H        C,+3                BRANCH IF PROGRAM ASSEMBLY.
 2902              TN           Z,X1          3             Z,X2                DISTRIBUTE BANK INDICATOR 7.
 2904              TS           N,SC,1        NO MO SUBS +1 SUB THRDS      C
 2905              TS, BIT25H   ZERO          1,1           GIVE LOOP

 2906              WD           Z,CSC         ONE H         Z,AU1               IN SUBROUTINE ASSEMBLY, THE OBSOLETING
 2908              SS           N,AU1         CHAR 5H       C,+1                BITS THAT ARE RELAYED BY THE SUBROUTINE
 2910              SWS, ONEH    N,X3                        4,1                 ARE SAVED IN THE CALL BITS OF THE SUBRO
 2912              WD           Z,SC          FOURH         Z,SC           C    NAME ENTRY, AND RESTORED AT MAKE THDS.

R2914   DESTROY THE EXISTING SUBRO THREAD WORD TREE AND REBUILD IT AT MAKE THDS.

 2915   GIVE LOOP  SWS,THRED11H 1,1           24            Z,X4                GET ADDRESS OF FIRST SUBRO THREAD WORD.
 29162             SWS, D4T6H   N,X4          12            1,1                 SAVE REVISION NUMBER.
 2917              SS           6,8           CAC1H         N,X4
 2918              SWS, CAC1H   Z,X4          32,L          6,8                 PUT LOCATION AT HEAD OF SINGLETON LIST.
 2920              TX           Z,X4          -             Z,X2
 2921              HA           Z,X4          ONE H         Z,X3                FORM ADDRESS OF OTHER HALF OF PAIR.
 2923              SWE, CAC3H   N,X4          32            Z,X4                FOLLOW THE SINGLETON THREAD.
 2925              LA           Z,X4          L END THR     END GIVE Q          BRANCH IF OTHER MEMBER OF PAIR OCCUPIED.

 2927              NA           Z,X4          Z,X3          C,-2
 2928              SS           ZERO          ONE H         Z,X4                OTHER MEMBER OF PAIR IS VACANT, SO THE
 2930              SM           Z,X3          ONE H         Z,X3                PAIR MUST BE DECLARED VACANT AS A PAIR.
 2932              SS           6,8           CAC2 H        N,X3
 2933              SWS, CAC2H   Z,X4          16,L          6,8                 PUT PAIR AT HEAD OF PAIR LIST.

 2935   END GIVE Q SS           N,X2          THRED11H      Z,X4                FOLLOW THREAD TO NEXT SUBRO THREAD WORD.
 2937              NA, BIT37H   2,0           ONES H        GIVE LOOP +2        BRANCH IF ANY SUBRO THREAD WORDS LEFT.

 2939   PUT DATE   SS           5,100         B1TO12H       1,1                 PUT PACKED REVISION DATE IN NAME ENTRY.

# Page 326
#      @YUL SYSTEM ASSEMBLER -- PASS 2                                           USER'S OWN PAGE NO.  62        PAGE  62

P2941   WHEN AN OBSOLETE PROGRAM IS REVISED, IT NATURALLY CEASES TO BE OBSOLETE.  OBSOLETING BITS MUST BE REMOVED FROM
R2943   THE SUBRO THREADS OF THOSE SUBROUTINES THAT USED TO RELAY OBSOLESCENCE UP FROM A SUBSIDIARY. SEE DELETE, PASS 0.

 2945              TX           L COMP NAM    -             Z,X0                POINT TO COMPUTER NAME ENTRY.
 2947              TN           Z,X1          3             Z,X2                DISTRIBUTE BANK INDICATOR 7.
 2949              SWS, BIT36H  1,1           23            SWITCH              TRANSFER OBSOLESCENCE BIT.
 2951              SWS, BIT13H  SWITCH        4             1,1                 PROG/SUB TO OBSOLESCENCE/OBSOLETING BIT.
 2953              NA, BIT13H   1,1           ZERO          RSUB TEST +1        BRANCH IF SUBROUTINE, NOT PROGRAM.

 2955              NA, BIT36H   SWITCH        ONES H        MAKE THDS           IF THIS PROG WASN'T OBSOLETE, SKIP IT.

 2957   END1 REVP  SWS,THRED10H N,X0          12            Z,X2                POINT TO 1ST PROG OR SUB FOR MACHINE.
 2959              NA, BIT36H   SWITCH        ONES H        LUP2 REVP +1        BRANCH WHEN ALL OBSOLETING SUBS MARKED.
 2961              TS, BIT36H   ZERO          SWITCH        LUP2 REVP +1        RESET SWITCH AND START ANOTHER PASS.

 2963   LUP1 REVP  SWS,THRED10H 2,1           0             Z,X2                FOLLOW THE THREAD TO NEXT PROG OR SUBRO.
 2965              LA           Z,X2          L END THR     END1 REVP           BRANCH AT END OF PASS.

 2967              SSL, FOURH   2,1           33            LUP1 REVP           SELECT ON OBSOLESCENCE/OBSOLETING BIT.
 2969              TS           Z,X4          Z,X2          LUP1 REVP +1        SUB THRDS EXIT WHEN NO MORE THREADS.
 2971              TS           C,-1          NO MO SUBS +1 SUB THRDS      C    REQUEST PRESENTATION OF SUBRO THREADS.

 2973              WD           Z,CSC         ONE H         Z,AU1
 2974              SS           N,AU1         CHAR 5H       C,+1
 2975              SSL, ONEH    N,X3                        C,+3                SELECT ON OBSOLETING BIT.

 2977              SM           4,1           BIT 13H       4,1                 PLANT OBSOLETING BIT ON SUBRO NAME.
 2979              SM           SWITCH        BIT 36 H      SWITCH              DEMAND THAT THERE BE ANOTHER PASS.
 2981              WD           Z,SC          SIXH          Z,SC           C    ASK FOR ANOTHER SUBRO THREAD.
 2983              SSL, TWOH    4,1           34            C,-3                SELECT ON OBSOLETING BIT.

 2985   OBSLING Q  SWS,THRED11H 2,1           24            Z,X3                MAYBE GET ADDRESS OF 1ST SUB THREAD WD.
 2987              NA, BIT25H   2,1           ZERO          C,+2                BRANCH IF IT REALLY WAS.
 2989              SS           Z,SC,7        BIT 13H       2,1                 CLEAR OBS BIT AND JUMP TO LUP2 REVP.

 2991              SS           ZERO          B24B36        N,X3                THIS SUBROUTINE NO LONGER OBSOLETES ANY
 2993              SSL, ONEH    N,X3          11            C,+1                PROGRAM, SO REMOVE ALL OBSOLETING BITS
 2995              TS           Z,SC,2        -             OP THREAD      C    FROM ITS SUBRO CALL THREADS.
 2997              SWS, ONEH    Z,SC,3        16            N,X3                END HERE IF ONLY ONE SUB THREAD WORD.

 2999              TS, B122436H ZERO          3,0           OP THREAD      C    CLEAR OBS BOTS, GET NEXT THREAD WORD.
 3001              SSL, TWOH    N,X3          10            C,-1                SELECT ON LAST-THREAD-WORD BIT.
 3003              SS           ZERO          12(12)48      N,X3                CLEAR OBS BITS OF LAST THREAD WORD.

 3005   LUP2 REVP  SWS,THRED10H 2,1           0             Z,X2                FOLLOW THREAD TO NEXT PROG OR SUBRO.
 3007              LA           Z,X2          L END THR     MAKE THDS           BRANCH WHEN ALL SUBROS HAVE BEEN TESTED.
 3009              NA, BIT36H   2,1           ONES H        LUP2 REVP           IF PROGRAM, LOOK AGAIN.
 3011              SSL, TWOH    2,1           34            OBSLING Q           SELECT ON OBSOLETING BIT.

# Page 327
#      @YUL SYSTEM ASSEMBLER -- PASS 2                                           USER'S OWN PAGE NO.  63        PAGE  63

P3013   SUBROUTINE IN PASS 1.5 TO PRESENT IN X4 THE SUBROUTINE CALL THREADS OF THE PROGRAM OR SUBROUTINE WHOSE NAME IS
R3015   INITIALLY POINTED TO BY X2.

 3016   SUB THRDS  SWS,THRED11H 2,1           24            Z,X3           C    MAYBE GET ADDRESS OF 1ST SUB THREAD WD.
 3018              NA, BIT25H   2,1           ZERO          A THREAD       C    BRANCH IF IT REALLY WAS.
 3020              TS           -             -             NO MO SUBS     C

 3021   OP THREAD  SWS,THRED11H N,X3          0             Z,X3           C    FOLLOW THREAD TO NEXT SUBRO THREAD WORD.
 3023              SWS,THRED10H N,X3          36            Z,X4           S    PRESENT OP CODE THREAD.

 3025   A THREAD   SWS,THRED10H N,X3          24            Z,X4           S    PRESENT A ADDRESS THREAD.

 3027              NA, BIT13H   3,0           ZERO          NO MO SUBS     C
 3028              SWS,THRED10H N,X3          12            Z,X4           S    PRESENT B ADDRESS THREAD.

 3030              NA, BIT25H   3,0           ZERO          NO MO SUBS     C
 3031              NA, BIT37H   3,0           ONES H        OP THREAD      C    BRANCH IF THERE IS ANOTHER THREAD WD.
 3033              SWS,THRED10H N,X3          0             Z,X4           S    PRESENT C ADDRESS THREAD.

 3035   NO MO SUBS SWS,THRED10H 2,1           0             Z,X4           C    TENTATIVELY FOLLOW THREAD TO NEXT PR/SU.
 3037              PR                                                           (TO BE FILLED IN ON INITIAL CALL).



R3039   LOOP TO MARK THOSE PROGRAMS AND SUBROUTINES THAT CALL THE SUBROUTINE BEING REVISED, DIRECTLY OR INDIRECTLY.

 3041              SWS,THRED10H N,X0          12            Z,X2                THREAD TO FIRST PROG OR SUB OF MACHINE.

 3043   RSUB LOOP  TS           N,SC,2        NO MO SUBS +1 SUB THRDS      C    ASK FOR PRESENTATION OF SUBRO THREADS.
 3045              TS           Z,X4          Z,X2          RSUB TEST           (DISPOSITION WHEN THREADS RUN OUT).

 30462             TX           Z,X2          -             Z,X4           C    ASK FOR ANOTHER THREAD.
 3047              NA           Z,X4          COMMON        C,-1                BRANCH IF CALL IS NOT FOR THIS SUBRO.
 3049              WD           Z,CSC         ONE H         Z,X4
 3050              WD, CHAR5H   B25T26        4,0           C,+1                REVERSE DIRECTION OF SHIFT.
 3052              SWE, ONESH   ONE H                       COMMON +1
 3053              SM           N,X3          COMMON +1     N,X3                PLANT OBS BIT IN SUBRO THREAD WORD.
 3055              SM           2,1           BIT 13H       2,1                 PLANT OBSOLESCENCE/OBSOLETING BIT.
 3057              NA, BIT36H   2,1           ZERO          RSUB LOOP +2        BRANCH IF PROCESSING A SUBROUTINE.
 3059              SM           2,1           ONE H         2,1                 SAVE OBS-RELAYING BIT FOR MAKE THDS.
 3061              TS, BIT13H   ONES H        SWITCH        RSUB LOOP +2        SHOW THAT SOMETHING WAS OBSOLETED.

 3065   RSUB TEST  NA           Z,X2          L END THR     RSUB LOOP           BRANCH IF THERE ARE MORE PROGS OR SUBS.
 3067              SWS,THRED10H N,X0          12            Z,X2                THREAD TO FIRST PROG OR SUB.
 3069              NA, B13B36H  2,1           ONES H        C,+3                BRANCH IF NOT AN OBSOLETING SUBROUTINE.
 3071              HA           2,1           BIT 13H       2,1                 REMOVE OBSOLETING BIT FROM SUBRO NAME.
 3073              TS           Z,X2          COMMON        RSUB LOOP -1        SAVE SUBRO NAME ADR, LOOK FOR CALLERS.

 3075              SWS,THRED10H 2,1           0             Z,X2                FOLLOW THREAD TO NEXT PROG OR SUBRO.
 3077              NA           Z,X2          L END THR     RSUB TEST +2        BRANCH IF THERE ARE MORE.

 3079              TS, BIT36H   ONES H        SWITCH        END1 REVP           SUBS NOT TREED TO PROGS OBSOLETE NOBODY.

# Page 328
#      @YUL SYSTEM ASSEMBLER -- PASS 2                                           USER'S OWN PAGE NO.  64        PAGE  64

P3081   EVERY ASSEMBLY EXCEPT REPRINT OR BAD MERGE COMES HERE TO GET A TREE OF SUBROUTINE THREAD WORDS MADE UP.

 3083   MAKE THDS  TS           L SYM THR     Z,X5          FIND SLOT -2   C    SET X5 AND CSC.

 3085   SET O THRD SWE,OTHRD11H N,X2          12            N,X3           C    MOVE C THREAD OF LAST WD TO OP THREAD.
 3087              SS           Z,X3          THRED 11H     N,X2           C    THREAD LAST WORD TO THIS ONE.
 3089              SM           N,X3          B132537       N,X3           C    TENTATIVELY PLANT LAST-THREAD BITS.
 3091              SWS,ATHRD11H N,X5          24,L          N,X3           S    PLANT A ADDRESS THREAD, EXIT.

 3093              HA           N,X3          BIT 13H       N,X3           C    REMOVE LAST-THREAD BIT FROM A FIELD.
 3095              SWS,BTHRD11H N,X5          12,L          N,X3           S    PLANT B-ADDRESS THREAD, EXIT.

 3097              HA           N,X3          BIT 25H       N,X3           C    REMOVE LAST-THREAD BIT FROM B FIELD.
 3099              SWS,THRED11H N,X5          0             N,X3           S    PLANT C-ADDRESS THREAD, EXIT.

 3101              TS           Z,X3          Z,X2          FIND SLOT      C    THIS WORD WILL BECOME LAST WORD.
 31022             EBA          5,13          BIT 25        Z,X5           C
 3103              TS           -             -             ANY SUBS Q     S    GET ADDRESS OF HEAD OF SUBRO DIRECTORY.

 3105   FIND SLOT  SWE, CAC3H   6,8           32            Z,X3           C    POINT TO HEAD OF SINGLETON LIST.
 3107              NA           Z,X3          L END THR     NOT ADD 1      C    BRANCH IF THERE'S AN INTERNAL SLOT.

 3109              TX           6,8           -             Z,X3           C    MAKE A VACANT PAIR AT END OF DIRECTORY.
 3111              EX           6,8           CAC1H         3,1            C    2ND WORD OF THAT GOES TO HEAD OF SLOTS.
 3113              WA           6,8           ONEH          6,8            C
 3114              SWS,CAC1H    6,8           32,L          6,8            C    MODIFY POINTER OF SINGLETON LIST.
 3116              WA           6,8           ONE H         6,8            C    FINISH EXPANDING DIRECTORY.
 3118              TS           -             -             NEW STWD       C

 3119   NOT ADD 1  SS           N,X3          CAC1H         6,8            C    DETACH SLOT FROM SINGLETON LIST.
 3121              EX           Z,X3          CAC3M1        Z,AU1          C    FORM ADDRESS OF PAIR THAT INCLUDES SLOT.
 3123              TS           DIRWORD8      Z,AU2         NEW STWD -1    C    WE MUST SEE IF SLOT IS IN VACANT PAIR.

 3125   PAIR SRCH  SWE, CAC3H   N,AU2         16            Z,AU2          C    FOLLOW THREAD TO NEXT VACANT PAIR.
 3127              LA           Z,AU2         L END THR     NEW STWD       C    BRANCH IF SLOT WAS NOT PART OF A PAIR.
 3129              NA           Z,AU2,1       Z,AU1         C,+3           C    BRANCH IF SLOT NOT PART OF THIS PAIR.
 3131              SS           N,AU2         CAC2 H        N,CSH          C    DETACH PAIR FROM PAIR LIST.
 3133              TS           -             -             NEW STWD       C
 3134              TS           Z,AU2         Z,CSC         PAIR SRCH      C    SAVE ADDRESS OF PAIR AND TRY NEXT ONE.

 3136   NEW STWD   SWE, B1TO12H 1,1           12,L          N,X3           C    MOVE REVISION NO. TO 1ST SUB THREAD WD.
 3138              SS           BIT 25H       B13 B25       1,1            C    CLEAR OBS BIT, SET SUBROS BIT.
 3140              SWS,ATHRD11H Z,X3          24,L          1,1            C    PLANT THREAD TO 1ST SUBRO THREAD WORD.
 3142              TS           C,+1          NEW STWD      SET O THRD +2  C    CHANGE NEW-WORD RESPONSE.
 3144              TS, BIT37H   ZERO          2,0           SET O THRD     C    REMOVE LAST-THREAD BIT FROM C FIELD.

 3148   DIR CALL Q NA, BIT32H   5,0           ONES H        C,+3                BRANCH IF CALL IS NOT DIRECT.
 3150              TX           N,X5          -             Z,X4
 3151              SS           4,1           ONE H         N,X5           C    SET OBS RELAY BIT FOR SUBRO, PLANT THRD.
 31522             SS           ZERO          ONE H         N,X5,1
 3153              EX           N,X5          CAC3H         ETS                 FOLLOW THREAD IN SUBROUTINE DIRECTORY.
 31542             EBA          ETS           BIT 25        Z,X5
 31544  ANY SUBS Q NA           N,X5          ONES H        DIR CALL Q          BRANCH IF NOT ALL OF DIRECTORY DONE.

# Page 329
#      @YUL SYSTEM ASSEMBLER -- PASS 2                                           USER'S OWN PAGE NO.  65        PAGE  65

P3155              IN PROGRAM ASSEMBLY, MAKE PROGRAM FIRST IN COMPUTER'S LIST.  IN SUBROUTINE ASSEMBLY, RETHREAD THE
R31552  SUBROUTINE TO PRECEDE THE SUBROUTINE WHOSE NAME IS IN NEXT NAME, OR TO COME LAST IF (NEXT NAME) = "END SYLT".
R31554  THESE THINGS ARE DONE HERE TO BE SURE OF NO BAD MERGE.



 3156   BEFORE CH  TX           L COMP NAM    -             Z,X0
 3157              TX           L PROG FIL    -             Z,X1
 3158              TN           Z,X1          2             Z,X2                DISTRIBUTE BANK INDICATOR 7.
 3160              SWS,THRED10H N,X0          12            Z,X2                POINT TO FIRST PROGRAM OF COMPUTER.
 3162              NA           Z,X2          L PROG FIL    UNDO MAIN           BRANCH IF NOT PROG OR SUB IN ASSEMBLY.
 3164              NA, BIT9H    SWITCH        ONES H        INISH P2            EXIT IF PROGRAM IS ALREADY FIRST.

 3166              SWS,BTHRD10H 2,1           12,L          N,X0                DETACH SUBROUTINE FROM HEAD OF LIST.
 3168              TS           -             -             GET NEXTN

 3169              TX           Z,X3          -             Z,X2                ADVANCE POINTER PAIR THRU SUBRO LIST.
 3171   UNDO MAIN  SS           2,1           THRED 10 H    Z,X3           S    POINT TO NEXT PROG OR SUB.
 3173              NA           Z,X3          L PROG FIL    C,-2                BRANCH IF NOT PROG OR SUB IN ASSEMBLY.
 3175              SS           3,1           THRED 10 H    2,1                 DETACH IT AND SEW UP THE THREAD.
 3177              NA, BIT9H    SWITCH        ONES H        HEAD LIST           GO TO PUT PROGRAM AT HEAD OF LIST.

 3179   GET NEXTN  SWS,THRED10H N,X0          12            Z,X3                POINT TO FIRST OTHER PROG OR SUB OF COM.
 3181              LA           Z,X3          L END THR     HEAD LIST           BRANCH IF LIST IS NOW EMPTY.
 3183              NA           N,X3          NEXT NAME     NEXTN LUP           BRANCH UNLESS FIRST PROG/SUB IS NEX SUB.

 3185   HEAD LIST  SWS,THRED10H N,X0          12            1,1
 3186              SWS,BTHRD10H L PROG FIL    12,L          N,X0                RETHREAD PROG/SUB AT HEAD OF LIST.
 3188              TS           -             -             INISH P2

 3189   NEXTN LUP  TS           Z,X3          Z,X2          UNDO MAIN      C    ADVANCE SEARCH FOR SUCCESSOR SUBROUTINE.
 3191              LA           Z,X3          L END THR     C,+2                MUST HAVE BEEN END IF DIDN'T FIND IT.
 3193              NA           N,X3          NEXT NAME     NEXTN LUP           BRANCH IF DIDN'T FIND SUCCESSOR SUBRO.

 3195              SS           2,1           THRED 10 H    1,1                 RETHREAD SUBROUTINE TO PRECEDE ITS
 3197              SS           L PROG FIL    THRED 10 H    2,1                 IMPLICIT OR DESIGNATED SUCCESSOR.

# Page 330
#      @YUL SYSTEM ASSEMBLER -- PASS 2                                           USER'S OWN PAGE NO.  66        PAGE  66

P3200              INITIALIZING PROCEDURE FOR PASS 2.  STARTS RD3 AND WR1, GRABS BUFFERS FOR POPOS AND WORDS, AND
R3202   LOADS THE SPECIAL PROCESSING AND CUSSING PARTS, CALLING ON THE LATTER TO UNSCRAMBLE THE CUSS LIST.

 32032             MASKGRP      S,0           F,0

 3204   INISH P2   TS           L STOPPER     Z,X2          PHI TAPE
 3205              RF,2         2,0           -             DISASTER            BYPASS LABEL ON POPO TAPE.
 32062             SS           PASS 3        C1T3          P2 SIDE GP          SELECT VERSION OF YUL SYSTEM.
 32064             S, PHI LOAD  P2 SIDE GP    1             C,+1
 3207              TS           L CUS LIST    Z,X1          RESET MXR      C
 3208              TS           L B2 START    Z,X6          GRAB FREE      C    GRAB A BUFFER FOR POPOS.
 3211              TS           Z,AU1         Z,X5          GRAB FREE      C    GRAB A BUFFER FOR WORD RECORDS.
 3213              TS           Z,AU1         L WD BUFF     PHI TAPE       S
 3215              RF,2         -             -             DISASTER
 3216              WA           L WD BUFF     C259          WBUF FULL
 3217              TS, BIT44    ONES          SWITCH        PHI TAPE            TURN ON PRINT SWITCH FOR MAIN PART.
 32182             RF,3         2,0           -             DISASTER            BYPASS LABEL ON SAVE TAPE.
 3219              MT           N,SC,1        2             N,X6,3              SET UP PARAPROGRAM STARTS.

 3230              SPEC,B7                                  1159
 3231              SPEC,B7                                  1155

 3237   GET PARP   TS           L COMP NAM    Z,X6          MON WAKE       C    POINT TO COMPUTER NAME, START PARAPROGS.
 3239              SWS,THREAD10 6,1           24            Z,X6                ADDRESS OF PREFIX FOR PARTIC. PASS NAME.
 3241              TX           CHAR 1        -             AV MSK              MOVE LEADING NON-BLANK CHARACTERS OF
 3243              SS           N,X6          AV MSK        PARP NAME           REFERENCED COMPUTER NAME TO FORM
 3245              SWE, C1T4    AV MSK        A,1           AV MSK              COMPLETE NAME OF PARTICULAR PASS 2.
 3247              NA, AV MSK   6,0           BLANKS        C,-2

 3248              TS           BIT33         Z,R0          UN LAS REM     C    INITIALIZE COUNT OF WORD RECORDS.
 3250              NA, BIT 9    SWITCH        ZERO          SUBRASSY            BRANCH IF ASSEMBLING A SUBROUTINE.
 3252              SWE, CAC3    L PASS 2      16            Z,AU1               POINT TO AD HOC SUBRO DIRECTORY ORIGIN.
 3254              EX           N,AU1         CAC 3         L NEXT SUB          POINT TO AD HOC ENTRY OF FIRST SUBRO.
 3256              TS           ZERO          MERJ WAIT     RD POPO 1           KNOCK OUT MERGE WAIT IF ASSEMBLING PROG.

 3258   SUBRASSY   SWE, SPECMAG L PASS 2      32            L NEXT SUB          OTHERWISE POINT TO END-OF-THREAD SIGNAL.
 3260              TX           N,SC,1        -             HEALTH +1           DON'T CUSS NEAR-DEFINITION IN SUBRO ASSY
 3262              TS           -             -             HEALTH3
 32622             TX           N,SC,1        -             ASYM FITZ           NOR UNDEFINED SETLOCS
 32624             TS           Z,SC,7        Z,SH          FITS FITZ      C
 3263              TX           C,+2          -             STATE0 +1           NOR UNDEFINED
 3265              TX           N,SC,1        -             STATE1 +1           NOR NEARLY DEFINED SYMBOLS.
 3267              TS           -             -             NO ADRESS

 3268   RD POPO 1  TS           Z,X5          POPO BUFF     PHI TAPE
 3269              RF,2         5,0           -             DISASTER            READ FIRST POPO RECORD.

 3271              TX           ZERO          -             ERR PAGES
 3274              S, PHI LOAD  PARP NAME     1             END INIT 2          LOAD PARTICULAR PASS 2 FOR THIS MACHINE.

# Page 331
#      @YUL SYSTEM ASSEMBLER -- PASS 2                                           USER'S OWN PAGE NO.  67        PAGE  67

P32755  FINAL PASS 2 INITIALIZATION, HIDING IN A BUFFER.



 3276              SETLOC,1     HEALTH

 3277   END INIT 2 TX           L CUS LIST    -             Z,AU1
 3278              TX           BANK 5        -             Z,AU2
 3279              TS           M MXR         Z,MXR         N,AU2,8        C    CODING IN BANK 5 PUTS CONVERTED CUSSLIST
 3281              TX           ONES          -             N,AU1               INTO THE FIRST 64 WORDS OF BANK 2.
 3283   RESET MXR  TX           GENL MXR      -             Z,MXR          S
 32832             WA           BIT 33        ONE           Z,R6                INITIALIZE PROGRAM'S RECORD COUNT.
 3284              TS           L LINE        Z,X0          PASS 2



 SEQBRK            END          YUL PASS 2    GENERAL
